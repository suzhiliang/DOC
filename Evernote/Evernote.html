<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/302292 (zh-CN); Windows/6.1.7601 Service Pack 1 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="336"/>

<div>
<span><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">ftp账号：ruida</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">ftp密码：ruida&amp;ftp</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">ftp映射目录：/data_resources</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">[root@bogon /]# useradd ruida -d /data_resources/</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">useradd：警告：此主目录已经存在。</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">不从 skel 目录里向其中复制任何文件。</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">[root@bogon /]# passwd ruida</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">更改用户 root 的密码 。</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">新的 密码：</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">重新输入新的 密码：</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><div><font color="#004080" face="微软雅黑"><span style="font-size:12pt">passwd： 所有的身份验证令牌已经成功更新。</span></font></div><div><span style="font-size: 12pt;"><span style="color: rgb(0, 64, 128);"><br/></span></span></div><div>挂载:</div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">假设这边要把机子：192.168.4.122的目录/glusterfsConsume直接引用到机子192.168.4.121的目录/glusterfsConsume，做法如下：</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">（1）在121这台机子</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">vi /etc/exports</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">写上：</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">/glusterfsConsume *(rw,no_root_squash)</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">     （2）在两台机子启动nfs服务</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">service rpcbind start</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">service nfs start</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">     （3）在122执行</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">mount -t nfs 192.168.4.121:/glusterfsConsume/ /glusterfsConsume/</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">（4）查看挂载是否成功，执行命令：</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">df -h</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><div><font color="#004080" face="微软雅黑"><span style="font-size:12pt">如果挂载成功，就会出现类似3.7.0截图的内容</span></font></div><div><span style="font-size: 12pt;"><span style="color: rgb(0, 64, 128);"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="color: rgb(0, 64, 128);"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="color: rgb(0, 64, 128);"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="color: rgb(0, 64, 128);"><br/></span></span></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">CentOS  Java tomcat工程涉及的验证码出不了解决方法：</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">微软雅黑宋体微软雅黑华文细黑微软雅黑宋体网站验证码突然无法显示，并报如下错误。</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">Caused by: java.lang.NoClassDefFoundError: Could not initialize class sun.awt.X11GraphicsEnvironment</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">Caused by: java.lang.InternalError: Can't connect to X11 window server using 'localhost:10.0' as the value of the DISPLAY variable.</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt"> </span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">网上搜索了一下，在catalina.sh里加上一句“-Djava.awt.headless=true \”，问题解决。</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">经查，出现这种情况一般就是启动tomcat的用户无法访问Xserver，包括Xserver没有启动或者没有权限访问.</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt"> </span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">以下为转贴：</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">1.什么是Headless mode？</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">Headless模式是系统的一种配置模式。在该模式下，系统缺少了显示设备、键盘或鼠标。</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt"> </span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">2.何时使用和headless mode？</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">Headless模式虽然不是我们愿意见到的，但事实上我们却常常需要在该模式下工作，尤其是服务器端程序开发者。因为服务器（如提供Web服务的主机）往往可能缺少前述设备，但又需要使用他们提供的功能，生成相应的数据，以提供给客户端（如浏览器所在的配有相关的显示设备、键盘和鼠标的主机）。</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt"> </span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">3.如何使用和Headless mode？</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">一般是在程序开始激活headless模式，告诉程序，现在你要工作在Headless mode下，就不要指望硬件帮忙了，你得自力更生，依靠系统的计算能力模拟出这些特性来:</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">System.setProperty(&quot;java.awt.headless&quot;,&quot;true&quot;);</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt"> </span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">修改${TOMCAT_HOME}/bin/catalina.sh或${TOMCAT_HOME}/bin/catalina.bat文件：</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">在所有类似以下代码：</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">    &quot;$_RUNJAVA&quot; $JAVA_OPTS $CATALINA_OPTS \</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">      -Djava.endorsed.dirs=&quot;$JAVA_ENDORSED_DIRS&quot; -classpath &quot;$CLASSPATH&quot; \</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">      -Djava.security.manager \</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">      -Djava.security.policy==&quot;$CATALINA_BASE&quot;/conf/catalina.policy \</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">      -Dcatalina.base=&quot;$CATALINA_BASE&quot; \</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">      -Dcatalina.home=&quot;$CATALINA_HOME&quot; \</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">      -Djava.io.tmpdir=&quot;$CATALINA_TMPDIR&quot; \</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt"> </span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">在尾部加上一句：</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">      -Djava.awt.headless=true \</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt"> </span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">修改后内容如下：</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">    exec &quot;$_RUNJAVA&quot; $JAVA_OPTS $CATALINA_OPTS \</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">      -Djava.endorsed.dirs=&quot;$JAVA_ENDORSED_DIRS&quot; -classpath &quot;$CLASSPATH&quot; \</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">      -Dcatalina.base=&quot;$CATALINA_BASE&quot; \</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">      -Dcatalina.home=&quot;$CATALINA_HOME&quot; \</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">      -Djava.io.tmpdir=&quot;$CATALINA_TMPDIR&quot; \</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">      -Djava.awt.headless=true \</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt"> </span></font></div><div align="left" style="min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">以tomcat6.0为例，总共有七处这样的地方，修改好后即可。</span></font> <font color="#0000FF" face="微软雅黑"><span style="font-size:12pt">anan-台式机 18:53:27</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">这个去看看，平时配置tomcat，挺重要的。。</span></font></div><div align="left" style="min-height: 15pt;"><font color="#008242" face="微软雅黑"><span style="font-size:12pt">苏志亮 18:54:24</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">恩恩</span></font></div><div align="left" style="min-height: 15pt;"><font color="#0000FF" face="微软雅黑"><span style="font-size:12pt">anan-台式机 18:54:25</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">=====================</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">=====================</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">以下是刚才说的那个文件同步的部署及操作脚本：</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">微软雅黑192.168.4.121    191.168.4.122</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">如果没装nfs，则安装：</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">yum install nfs-utils rpcbind</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">把122机子/glusterfsConsume这个目录挂载到121这个机子。</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">1、在两台机子的/目录下创建glusterfsConsume文件夹</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">2、设置目录权限</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">     chmod 777 /glusterfsConsume</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">     chmod 777 /glusterfsConsume/*</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">3、在122    的vi /etc/exports</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">写上  </span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">/glusterfsConsume *(rw,no_root_squash)</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">4,在两台机子启动nfs服务</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">service rpcbind start</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">service nfs start</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">5、在122挂载</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">挂载命令:mount -t nfs 192.168.4.122:/glusterfsConsume/ /glusterfsConsume/</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">查看是否成功</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">  df -h</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><div><font color="#004080" face="微软雅黑"><span style="font-size:12pt">取消挂载：umount /glusterfsConsume/</span></font></div><div><span style="font-size: 12pt;"><span style="color: rgb(0, 64, 128);"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="color: rgb(0, 64, 128);"><br/></span></span></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">centos配置开机启动，比如说：配置nginx、tomcat、php等服务开机自动打开</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">微软雅黑（1）vi /etc/rc.local</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">（2）加入：</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">/usr/local/nginx/sbin/nginx</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">/usr/local/tomcat/bin/startup.sh</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><div><font color="#004080" face="微软雅黑"><span style="font-size:12pt">/usr/local/php/sbin</span></font></div></div></div></div></div></span>
</div>
<hr>
<a name="337"/>

<div>
<span><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">主库创建用户：iquser_80.01_rw</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">主库执行：</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">mysql&gt; grant all privileges on iq_auth80_01.* to 'iquser_80.01_rw'@'%' identified by 'iquser_80.01_rw~';</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">Query OK, 0 rows affected (0.00 sec)</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">mysql&gt; grant all privileges on iq_auth80_02.* to 'iquser_80.02_rw'@'%' identified by 'iquser_80.02_rw~';</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">Query OK, 0 rows affected (0.00 sec)</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">mysql&gt; grant all privileges on iq_basicdata80_01.* to 'iquser_80.01_rw'@'%' identified by 'iquser_80.01_rw~';</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">Query OK, 0 rows affected (0.00 sec)</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">mysql&gt; grant all privileges on iq_basicdata80_02.* to 'iquser_80.02_rw'@'%' identified by 'iquser_80.02_rw~';</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">Query OK, 0 rows affected (0.00 sec)</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">mysql&gt; grant all privileges on iq_ruida80_01.* to 'iquser_80.01_rw'@'%' identified by 'iquser_80.01_rw~';</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">Query OK, 0 rows affected (0.00 sec)</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">mysql&gt; grant all privileges on iq_ruida80_02.* to 'iquser_80.02_rw'@'%' identified by 'iquser_80.02_rw~';</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">Query OK, 0 rows affected (0.00 sec)</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">mysql&gt; flush privileges;</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">Query OK, 0 rows affected (0.00 sec)</span></font></div><div align="left" style="min-height: 15pt;"><font color="#0000FF" face="微软雅黑"><span style="font-size:12pt">anan-台式机 14:18:38</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">=============================</span></font></div><div align="left" style="min-height: 15pt;"><font color="#0000FF" face="微软雅黑"><span style="font-size:12pt">anan-台式机 14:18:46</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">从库创建用户：iquser_80.02_r</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">从库执行：</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">mysql&gt; grant select,execute on iq_auth80_01.* to 'iquser_80.01_r'@'%' identified by 'iquser_80.01_r~';</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">Query OK, 0 rows affected (0.01 sec)</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">mysql&gt; grant select,execute on iq_auth80_02.* to 'iquser_80.02_r'@'%' identified by 'iquser_80.02_r~';</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">Query OK, 0 rows affected (0.00 sec)</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">mysql&gt; grant select,execute on iq_basicdata80_01.* to 'iquser_80.01_r'@'%' identified by 'iquser_80.01_r~';</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">Query OK, 0 rows affected (0.00 sec)</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">mysql&gt; grant select,execute on iq_basicdata80_02.* to 'iquser_80.02_r'@'%' identified by 'iquser_80.02_r~';</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">Query OK, 0 rows affected (0.00 sec)</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">mysql&gt; grant select,execute on iq_ruida80_01.* to 'iquser_80.01_r'@'%' identified by 'iquser_80.01_r~';</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">Query OK, 0 rows affected (0.00 sec)</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">mysql&gt; grant select,execute on iq_ruida80_02.* to 'iquser_80.02_r'@'%' identified by 'iquser_80.02_r~';</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">Query OK, 0 rows affected (0.00 sec)</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">mysql&gt; flush privileges;</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 15pt;"><div><font color="#004080" face="微软雅黑"><span style="font-size:12pt">Query OK, 0 rows affected (0.00 sec)</span></font></div><div><span style="font-size: 12pt;"><span style="color: rgb(0, 64, 128);"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="color: rgb(0, 64, 128);"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="color: rgb(0, 64, 128);"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="color: rgb(0, 64, 128);"><br/></span></span></div><div><span style="font-size: 12pt;"><span style="color: rgb(0, 64, 128);"><br/></span></span></div><div>//刷新</div><div>FLUSH PRIVILEGES;</div></div></span>
</div>
<hr>
<a name="344"/>

<div>
<span>Linux启动/停止/重启Mysql数据库的方法<br/><br/>1、查看mysql版本<br/>方法一：status;<br/>方法二：select version();<br/><br/>2、Mysql启动、停止、重启常用命令<br/>a、启动方式<br/>1、使用 service 启动：<br/>[root@localhost /]# service mysqld start (5.0版本是mysqld)<br/>[root@szxdb etc]# service mysql start (5.5.7版本是mysql)<br/><br/>2、使用 mysqld 脚本启动：<br/>/etc/inint.d/mysqld start<br/><br/>3、使用 safe_mysqld 启动：<br/>safe_mysqld&amp;<br/><br/>b、停止<br/>1、使用 service 启动：<br/>service mysqld stop<br/><br/>2、使用 mysqld 脚本启动：<br/>/etc/inint.d/mysqld stop<br/><br/>3、mysqladmin shutdown<br/><br/>c、重启<br/>1、使用 service 启动：<br/>service mysqld restart <br/>service mysql restart (5.5.7版本命令)<br/><br/>2、使用 mysqld 脚本启动：<br/>/etc/init.d/mysqld restart</span>
</div>
<hr>
<a name="345"/>

<div>
<span><a href="Evernote_files/qt-faststart安装方法.doc"><img src="Evernote_files/64a7e05e49821666d1b8ffcf03456dd2.png" alt="qt-faststart安装方法.doc"></a></span>
</div>
<hr>
<a name="347"/>

<div>
<span>&lt;Connector URIEncoding=&quot;UTF-8&quot; connectionTimeout=&quot;20000&quot; port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot; redirectPort=&quot;8443&quot;/&gt;<br/>    </span>
</div>
<hr>
<a name="348"/>

<div>
<span><a href="Evernote_files/startOpenoffice.bat"><img src="Evernote_files/5c739d96505ef21091f79479752bbb3b.png" alt="startOpenoffice.bat"></a>
</span>
</div>
<hr>
<a name="350"/>

<div>
<span><a href="Evernote_files/oppenoffice使用说明文档.doc"><img src="Evernote_files/c7a2d7300b263fac4ae56ae6746371f9.png" alt="oppenoffice使用说明文档.doc"></a>
</span>
</div>
<hr>
<a name="353"/>

<div>
<span><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><a name="1260"></a></span><h1><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">6.1：配置Zookeeper</span></h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（1）上传zookeeper       注意是160多M那个才是<br/>
（2）tar zxvf zookeeper-3.4.5.tar.gz   --- 省掉<br/>
（3）cd zookeeper-3.4.5<br/>
（4）cd ..<br/>
（5）mv zookeeper-3.4.5 /usr/local<br/>
（6）cd /usr/local<br/>
（7）ls<br/>
（8）cd zookeeper-3.4.5/</span></span></div><div>（9）ls</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（10）chmod 777 ../bin/*<br/>
（11）./usr/local/zookeeper-3.4.5/bin/zkServer.sh<br/>
（12）/usr/local/zookeeper-3.4.5/bin/zkServer.sh start<br/>
（13）ps -ef|grep zoo<br/><br/><br/><br/><br/>
一、安装需求<br/>
安装java 1.6及hadoop 0.20.x<br/><br/>
二、安装zookeeper<br/>
1、下载zookeeper<br/>
wget http://mirror.bit.edu.cn/apache//zookeeper/zookeeper-3.4.3/zookeeper-3.4.3.tar.gz（本次安装3.4.3版本）<br/>
其他版本下载地址（最好使用stable版本）：http://zookeeper.apache.org/releases.html<br/><br/>
2、解压<br/>
tar -xf zookeeper-3.4.3.tar.gz<br/>
将解压后的zookeeper-3.4.3文件放在系统的/usr/local/中。并改名为zookeeper<br/><br/>
3、将zookeeper/conf目录下的zoo_sample.cfg文件拷贝一份，命名为为“zoo.cfg”<br/><br/>
4、修改zoo.cfg配置文件<br/>
修改zoo.cfg内容为：<br/>
# The number of milliseconds of each tick<br/>
tickTime=2000<br/>
# The number of ticks that the initial <br/>
# synchronization phase can take<br/>
initLimit=10<br/>
# The number of ticks that can pass between <br/>
# sending a request and getting an acknowledgement<br/>
syncLimit=5<br/>
# the directory where the snapshot is stored.</span></span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"># do not use /tmp for storage, /tmp here is just <br/>
# example sakes.<br/></span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">dataDir=/usr/local/zookeeper/data<br/>
dataLogDir=/usr/local/zookeeper/logs<br/><br/>
# the port at which the clients will connect<br/>
clientPort=2181<br/>
#<br/>
# Be sure to read the maintenance section of the <br/>
# administrator guide before turning on autopurge.<br/>
#<br/>
# http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance<br/>
#<br/>
# The number of snapshots to retain in dataDir<br/>
#autopurge.snapRetainCount=3<br/>
# Purge task interval in hours<br/>
# Set to &quot;0&quot; to disable auto purge feature<br/>
#autopurge.purgeInterval=1<br/><br/>
# 2888,3888 are election port<br/>
server.1=zookeeper:2888:3888<br/><br/><br/></span></div></div><div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">dataDir=/usr/local/zookeeper/data  (在zookeeper创建data) <br/>
dataLogDir=/usr/local/zookeeper/logs  (在zookeeper创建logs  )</span></div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
 其中，2888端口号是zookeeper服务之间通信的端口，而3888是zookeeper与其他应用程序通信的端口。而zookeeper是在hosts中已映射了本机的ip。</span></div><div>initLimit：这个配置项是用来配置 Zookeeper 接受客户端（这里所说的客户端不是用户连接 Zookeeper服务器的客户端，而是 Zookeeper 服务器集群中连接到 Leader 的 Follower 服务器）初始化连接时最长能忍受多少个心跳时间间隔数。当已经超过 10 个心跳的时间（也就是 tickTime）长度后 Zookeeper 服务器还没有收到客户端的返回信息，那么表明这个客户端连接失败。总的时间长度就是 5*2000=10 秒。</div><div>syncLimit：这个配置项标识 Leader 与 Follower 之间发送消息，请求和应答时间长度，最长不能超过多少个 tickTime 的时间长度，总的时间长度就是 2*2000=4 秒。</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">server.A=B：C：D：其中 A 是一个数字，表示这个是第几号服务器；B 是这个服务器的 ip 地址；C 表示的是这个服务器与集群中的 Leader 服务器交换信息的端口；D 表示的是万一集群中的 Leader 服务器挂了，需要一个端口来重新进行选举，选出一个新的 Leader，而这个端口就是用来执行选举时服务器相互通信的端口。如果是伪集群的配置方式，由于 B 都是一样，所以不同的 Zookeeper 实例通信端口号不能一样，所以要给它们分配不同的端口号。</span></div><div><br/></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
5、创建dataDir参数指定的目录(这里指的是“ </span>/usr/local/zookeeper/data”)，并在目录下创建文件，命名为“myid”。</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
6、编辑“myid”文件，并在对应的IP的机器上输入对应的编号。如在zookeeper上，“myid”文件内容就是1。由于本次只在单点上进行安装配置，所以只有一个server.1。若还有其他服务器，比如地址为192.168.1.102，则在zoo.cfg文件中还需加入server.2=192.168.1.102:2888:3888。那么myid文件在192.168.1.102服务器上的内容就是2。<br/>
至此，如果是多服务器配置，就需要将zookeeper-3.4.3目录拷贝到其他服务器，然后按照上述的方法修改myid。</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><p><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><strong>注意：</strong>一定要谨记将logs文件夹重建，因为里面的<span style="color: rgb(255, 0, 0);">version-2</span>里面会保存原有记录，此记录有可能与新集群有冲突。</span></p><div><strong>注意：</strong>还有dataDir也要重建，原有的节点快照都会导致新集群出现问题。手动创建数据存放目录（/usr/local/zookeeper/data），然后在目录中创建一个叫做&quot;myid&quot;的文件，文件内容为“<span style="color: rgb(255, 0, 0);">1</span>”。此处的1与上面的1对应。</div><br/>
7、在/etc/profile文件中设置PATH<br/>
修改profile文件：<br/>
sudo vi /etc/profile<br/><br/>
export ZOOKEEPER_HOME=/usr/local/zookeeper<br/>
PATH=$ZOOKEEPER_HOME/bin:$PATH<br/>
export PATH<br/><br/><br/><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">7.1  source /etc/profile</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">8、安装完毕<br/><br/>
三、启动并测试zookeeper<br/>
1、在所有服务器中执行：zookeeper/bin/zkServer.sh start<br/><br/>
2、输入jps命令查看进程：<br/>
namenode上显示为（本次为单机配置）：<br/>
7724 DataNode<br/>
19769 HMaster<br/>
7485 NameNode<br/>
8064 JobTracker<br/>
19361 QuorumPeerMain<br/>
8323 TaskTracker<br/>
7972 SecondaryNameNode<br/>
21691 Jps<br/>
19988 HRegionServer<br/><br/>
其中，QuorumPeerMain是zookeeper进程，启动正常。（HMaster和HRegionServer为已启动的hbase进程，其他为安装hadoop后启动的进程）<br/><br/>
3、查看状态：zookeeper/bin/zkServer.sh status<br/>
JMX enabled by default<br/>
Using config: /home/hadooptest/zookeeper-3.4.3/bin/../conf/zoo.cfg<br/>
Mode: standalone<br/><br/>
4、启动客户端脚本：zookeeper/bin/zkCli.sh -server zookeeper:2181<br/>
WatchedEvent state:SyncConnected type:None path:null<br/>
[zk: zookeeper:2181(CONNECTED) 0] <br/>
[zk: zookeeper:2181(CONNECTED) 0] help<br/>
ZooKeeper -server host:port cmd args<br/>
        connect host:port<br/>
        get path [watch]<br/>
        ls path [watch]<br/>
        set path data [version]<br/>
        rmr path<br/>
        delquota [-n|-b] path<br/>
        quit <br/>
        printwatches on|off<br/>
        create [-s] [-e] path data acl<br/>
        stat path [watch]<br/>
        close <br/>
        ls2 path [watch]<br/>
        history <br/>
        listquota path<br/>
        setAcl path acl<br/>
        getAcl path<br/>
        sync path<br/>
        redo cmdno<br/>
        addauth scheme auth<br/>
        delete path [version]<br/>
        setquota -n|-b val path<br/>
[zk: zookeeper:2181(CONNECTED) 1] ls /<br/>
[hbase, zookeeper]<br/>
[zk: zookeeper:2181(CONNECTED) 2] <br/><br/>
5、停止zookeeper进程：zookeeper/bin/zkServer.sh stop</span></div></div></span>
</div>
<hr>
<a name="354"/>

<div>
<span><a name="1244"></a><h1>1.2：MySQL 主从安装要点步骤</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（1）192.168.5.241 为主， 192.168.5.242为从<br/>
（2）192.168.5.241, 查看进程是否在运行<br/>
     ps -ef|grep mysql<br/>
（3）192.168.5.241, 登入MySQL<br/>
     mysql -uroot -proot<br/>
（4）192.168.5.241，数据库设为只读</span></div><div>     flush tables with read lock;</div><div>     exit</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（5）192.168.5.241，导出主MySQL数据库（有两个库ruida.sql、ruida2.sql）<br/>
     mysqldump -uroot -proot ruida &gt;/tmp/ruida.sql<br/>
     mysqldump -uroot -proot ruida2 &gt;/tmp/ruida2.sql<br/>
（6）192.168.5.241，将上一步到处的数据库拷贝到从机上：192.168.5.242<br/>
     scp /tmp/ruida* 192.168.5.242:/tmp<br/>
（7）192.168.5.242，将上一步从主机拷贝过来的sql导入到数据库当中<br/>
     mysql -uroot -proot ruida&lt;/tmp/ruida.sql<br/>
     mysql -uroot -proot ruida2&lt;/tmp/ruida2.sql<br/>
（8）192.168.5.241,<br/>
     show master status;        <span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 12px; text-align: left; background-color: rgb(255, 255, 255);">在MYSQL的主从复制中 ，通过命令show  master status，可以查看master数据库当前正在使用的二进制日志及当前执行二进制日志位置</span><br/>
（9）192.168.5.241<br/>
     exit<br/>
（10）192.168.5.241<br/>
     mysql -uroot -proot<br/>
（11）192.168.5.242<br/>
     mysql -uroot -proot<br/>
（12）192.168.5.242<br/>
     show master status;<br/>
     exit<br/>
（13）192.168.5.242, 查看下my-medium.cnf这个文件在哪边，如果事先已经知道存放在哪就不要这一步<br/>
     find / -name *my*.cnf<br/>
（14）192.168.5.242<br/>
     cp /usr/share/doc/MySQL-server-5.5.38/my-medium.cnf /etc/my.cnf<br/>
（15）192.168.5.242<br/>
     vi /etc/my.cnf<br/>
     将server-id修改为2, 如下（这里是从机，主机后面也要修改，主机为：1）:<br/>
     # required unique id between 1 and 2^32 - 1<br/>
     # defaults to 1 if master-host is not set<br/>
     # but will not function as a master if omitted<br/>
     server-id       = 2<br/>
（16）192.168.5.242，重启mysql服务<br/>
     service mysql restart<br/>
（17）192.168.5.241<br/>
     cp /usr/share/doc/MySQL-server-5.5.38/my-medium.cnf /etc/my.cnf<br/>
     service mysql restart<br/>
（18）192.168.5.241<br/>
     mysql -uroot -proot<br/>
（19）192.168.241, 记得命令后面一定要加分号<br/>
     </span>show master status;</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">     结果如下：<br/>
     +------------------+----------+--------------+------------------+<br/>
     | File             | Position | Binlog_Do_DB | Binlog_Ignore_DB |<br/>
     +------------------+----------+--------------+------------------+<br/>
     | mysql-bin.000001 |      107 |              |                  |<br/>
     +------------------+----------+--------------+------------------+<br/>
     1 row in set (0.00 sec)<br/>
（20）192.168.5.241， 创建从数据库的账号（用于从机复制）<br/>
     GRANT REPLICATION SLAVE ON *.* TO repl@'192.168.5.242' IDENTIFIED BY 'repl';<br/><br/>
（21）192.168.5.242，<br/>
     mysql -uroot -proot<br/>
（22）192.168.5.242, 设置从数据库参数<br/>
     mysql&gt; change master to master_host='192.168.5.241', master_user='repl', master_password='repl',master_log_file='mysql-bin.000001', master_log_pos=107;<br/>
（23）192.168.5.241,<br/>
        unlock tables;<br/>
（24）192.168.5.242， 对应的停止的指令为：stop slave<br/>
     start slave;</span></div><div>（25）192.168.5.242</div><div>     show slave status\G</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（26）192.168.5.241<br/>
     SHOW DATABASES;<br/>
（27）192.168.5.241<br/>
     use ruida<br/>
     show tables;<br/>
（28）192.168.5.241<br/>
     create table ljk (id int(10));<br/>
（29）192.168.5.241<br/>
     insert into ljk values ('1');<br/>
（30）192.168.5.242<br/>
     use ruida<br/>
     show tables;<br/>
（31）192.168.5.242<br/>
     select * from ljk;<br/>
（32）192.168.5.242<br/>
     insert into ljk values ('2');<br/>
（33）192.168.5.242<br/>
     select * from ljk;<br/>
（34）192.168.5.241<br/>
     select * from ljk;<br/>
后面几步就是用来校验：主数据库插入一条记录，从数据库是否同步；从数据库插入一条记录，主数据库不会同步<br/><br/></span></div></span>
</div>
<hr>
<a name="356"/>

<div>
<span><a name="1388"></a><h1>文件在线预览</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">yum list 列出所有可安装的软件包 可以通过 yum grouplist 来查看可能批量安装哪些列表<br/>
先装X windows<br/>
#yum groupinstall 'X Window System' -y<br/><br/>
安装GNOME桌面环境<br/>
#yum groupinstall GNOME Desktop Environment<br/><br/>
安装KDE桌面环境<br/>
#yum groupinstall KDE  Desktop Environment<br/><br/><br/>
首先，安装OpenOffice<br/>
（1）<br/>
cd /usr/local<br/><br/>
（2）<br/>
mkdir Openoffice<br/><br/>
（3）<br/>
cp Apache_OpenOffice_incubating_3.4.1_Linux_x86-64_install-rpm_zh-CN.tar.gz ./Openoffice/OpenOffice.tar.gz<br/><br/>
（4）<br/>
cd OpenOffice<br/><br/>
（5）<br/>
tar</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"> xf OpenOffice.tar.gz<br/><br/>
（6）<br/>
cd zh-CN<br/><br/>
（7）<br/>
cd RPMS/<br/><br/>
（8）<br/>
rpm -ivh *.rpm<br/><br/>
（9）<br/>
cd desktop-integration/<br/><br/>
（10）安装<br/>
rpm -ivh openoffice.org3.4-redhat-menus-3.4-9593.noarch.rpm<br/><br/>
注意可能需要重新安下openoffice.org-ure-3.4.1-9593.x86_64.rpm 这个rpm 在RPMS目录下<br/><br/>
（11）启动服务<br/>
cd /opt/openoffice.org3/program</span></div><div>soffice -headless -accept=&quot;socket,host=127.0.0.1,port=8001;urp;&quot;-nofirststartwizard &amp;</div><div><font size="3">网上查看</font></div><div><font size="3">soffice --headless --accept=&quot;socket,host=127.0.0.1,port=8100;urp;&quot; --nofirststartwizard &amp;</font></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/><br/>
其次，安装swftool<br/>
（1）<br/>
cd /usr/local<br/>
mkdir swftools<br/><br/>
（2）<br/>
cp swftools-0.9.1.tar.gz ./swftools/swftools.tar.gz<br/><br/>
（3）<br/>
cd swftools<br/><br/>
（4）<br/>
tar xf swftools.tar.gz<br/><br/>
（5）<br/>
cd swftools-0.9.1/<br/><br/>
（6）<br/>
yum install gcc* automake zlib-devel libjpeg-devel giflib-devel freetype-devel<br/>
yum -y install giflib-devel libjpeg-devel freetype-devel t1lib-devel zlib<br/>
./configure<br/>
make<br/>
make install</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">。<br/><br/></span></div></span>
</div>
<hr>
<a name="358"/>

<div>
<span><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><a name="1388"></a></span><h1><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">文件在线预览</span></h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">yum list 列出所有可安装的软件包 可以通过 yum grouplist 来查看可能批量安装哪些列表<br/>
先装X windows<br/>
#yum groupinstall 'X Window System' -y<br/><br/>
安装GNOME桌面环境<br/>
#yum groupinstall GNOME Desktop Environment<br/><br/>
安装KDE桌面环境<br/>
#yum groupinstall KDE  Desktop Environment<br/><br/><br/>
首先，安装OpenOffice<br/>
（1）<br/>
cd /usr/local<br/><br/>
（2）</span></span></div><div>mkdir Openoffice</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
（3）</span></span></div><div>cd OpenOffice</div><div><br/></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（4）</span></span></div><div>cp Apache_OpenOffice_incubating_3.4.1_Linux_x86-64_install-rpm_zh-CN.tar.gz </div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></span></div><div>（5）</div><div>tar -zxvf  OpenOffice.tar.gz</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
（6）<br/>
cd zh-CN<br/><br/>
（7）<br/>
cd RPMS/<br/><br/>
（8）<br/>
rpm -ivh *.rpm<br/><br/>
（9）<br/>
cd desktop-integration/<br/><br/>
（10）安装<br/>
rpm -ivh openoffice.org3.4-redhat-menus-3.4-9593.noarch.rpm</span></div><div><br/></div><div>即使没报错也需要重新安下openoffice.org-ure-3.4.1-9593.x86_64.rpm 这个rpm 在RPMS目录下</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
（11）</span>启动服务（有误）</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">cd /opt/openoffice.org3/program</span></div><div>soffice --headless --accept=&quot;socket,host=127.0.0.1,port=8001;urp;&quot;-nofirststartwizard &amp;</div><div><br/></div><div><br/></div><div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><font color="#010101" face="宋体" size="2"><br/></font></span></div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
其次，安装swftool<br/>
（1）<br/>
cd /usr/local<br/>
mkdir swftools</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
（2）</span></div><div>cd swftools</div><div><br/></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（3）</span></div><div>cp swftools-0.9.1.tar.gz </div><div><br/></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（4）<br/>
tar xf swftools.tar.gz<br/><br/>
（5）<br/>
cd swftools-0.9.1/<br/><br/>
（6）<br/>
yum install gcc* automake zlib-devel libjpeg-devel giflib-devel freetype-devel<br/>
yum -y install giflib-devel libjpeg-devel freetype-devel t1lib-devel zlib<br/>
./configure<br/>
make<br/>
make install</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><br/></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">。<br/><br/></span></div></span>
</div>
<hr>
<a name="359"/>

<div>
<span><a name="1936"></a><div><br/></div><div><span style="font-size: 26px;"><b>安装ffmpeg</b></span><span style="font-size: 24px;">（转换工具）</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">安装ffmpeg及其依赖包：</span></div><div>准备工作，安装git</div><div>yum install  git</div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">安装依赖包:</span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">#yum -y install gcc glibc glibc-devel make nasm pkgconfig lib-devel openssl-devel expat-devel gettext-devel libtool mhash.x86_64 perl-Digest-SHA1.x86_64</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">1). Yasm<br/>
# wget http://www.tortall.net/projects/yasm/releases/yasm-1.2.0.tar.gz<br/>
# tar xzvf yasm-1.2.0.tar.gz<br/>
# cd yasm-1.2.0<br/>
# ./configure<br/>
# make<br/>
# make install<br/>
# cd ..<br/><br/>
2). x264<br/>
# git clone git://git.videolan.org/x264<br/>
# cd x264<br/>
# ./configure --enable-shared<br/>
# make<br/>
# make install<br/>
# cd ..<br/><br/>
3). LAME<br/>
# wget http://downloads.sourceforge.net/project/lame/lame/3.99/lame-3.99.5.tar.gz<br/>
# tar xzvf lame-3.99.5.tar.gz<br/>
# cd lame-3.99.5<br/>
#./configure --enable-nasm<br/>
# make<br/>
# make install<br/>
# cd ..<br/><br/>
4). libogg<br/>
# wget http://downloads.xiph.org/releases/ogg/libogg-1.3.0.tar.gz<br/>
# tar xzvf libogg-1.3.0.tar.gz<br/>
# cd libogg-1.3.0<br/>
# ./configure<br/>
# make<br/>
# make install<br/>
# cd ..<br/><br/>
5). libvorbis<br/>
# wget http://downloads.xiph.org/releases/vorbis/libvorbis-1.3.3.tar.gz<br/>
# tar xzvf libvorbis-1.3.3.tar.gz<br/>
# cd libvorbis-1.3.3<br/>
# ./configure<br/>
# make<br/>
# make install<br/>
# cd ..<br/><br/>
6). libvpx</span></div><div># git clone <a href="http://git.chromium.org/webm/libvpx.git"></a><a href="http://git.chromium.org/webm/libvpx.git">http://git.chromium.org/webm/libvpx.git</a></div><div><br/></div><div><a href="http://storage.googleapis.com/downloads.webmproject.org/releases/webm/libvpx-1.4.0.tar.bz2" style="color: rgb(85, 85, 255); font-weight: bold; font-family: verdana, tahoma, helvetica, arial, sans-serif; font-size: 16px; text-align: left;"></a><a href="http://storage.googleapis.com/downloads.webmproject.org/releases/webm/libvpx-1.4.0.tar.bz2">http://storage.googleapis.com/downloads.webmproject.org/releases/webm/libvpx-1.4.0.tar.bz2</a></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">#</span>  tar -vxjf libvpx-1.4.0.tar.bz2</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"># cd libvpx<br/>
# ./configure  --enable-shared<br/>
# make<br/>
# make install</span></div><div># cd ..</div><div><br/></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">如果有报错</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; text-align: left; background-color: rgb(255, 255, 255);">bzip2 -d  gcc-4.1.0.tar.bz2 </span><br style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; text-align: left; background-color: rgb(255, 255, 255);">---上面解压完之后执行下面的命令。</span><br style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; text-align: left; background-color: rgb(255, 255, 255);">tar -xvf gcc-4.1.0.tar 或 tar -xvf *.tar</span><br style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; text-align: left; background-color: rgb(255, 255, 255);">解完之后会出现多一个文件夹 gcc-4.1.0</span><br/><br/>
7). FAAD2<br/>
# wget http://downloads.sourceforge.net/project/faac/faad2-src/faad2-2.7/faad2-2.7.tar.gz<br/>
# tar zxvf faad2-2.7.tar.gz<br/>
# cd faad2-2.7<br/>
# ./configure<br/>
# make<br/>
# make install<br/>
# cd ..</span></div><div><br/></div><div>8). FAAC<span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（gcc和g++要安装）</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"># wget http://downloads.sourceforge.net/project/faac/faac-src/faac-1.28/faac-1.28.tar.gz<br/>
# tar zxvf faac-1.28.tar.gz<br/>
# cd faac-1.28<br/>
# ./configure<br/>
# make<br/>
# make install</span></div><div># cd ..</div><div><br/></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">8.1 报错内容： <br/><br/>
In file included from config_opts.cpp:1:<br/>
/include/mpeg4ip.h:126: error: new declaration 'char* strcasestr(const char*, const char*)'<br/>
/usr/include/string.h:369: error: ambiguates old declaration 'const char* strcasestr(const char*, const char*)'<br/>
解决办法一：<br/><br/>
vi common/mp4v2/mpeg4ip.h<br/><br/>
注释掉函数声明，如下所示：</span></div><div><img src="Evernote_files/Image.png" type="image/png" style="cursor: default; height: auto;"/></div><div>//char* strcasestr(const char*, const char*)</div><div><br/></div><div><br/></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">解决办法二：</span></div><div>从123行开始修改此文件mpeg4ip.h，到129行结束。</div><div>修改前：</div><div>#ifdef __cplusplus<br/>
extern &quot;C&quot; {<br/>
#endif<br/>
char *strcasestr(const char *haystack, const char *needle);<br/>
#ifdef __cplusplus<br/>
}<br/>
#endif<br/><br/>
修改后：<br/>
#ifdef __cplusplus<br/>
extern &quot;C++&quot; {<br/>
#endif<br/>
const char *strcasestr(const char *haystack, const char *needle);<br/>
#ifdef __cplusplus<br/>
}</div><div>#endif</div><div><br/><br/>
9). Xvid<br/>
# wget http://downloads.xvid.org/downloads/xvidcore-1.3.2.tar.gz<br/>
# tar zxvf xvidcore-1.3.2.tar.gz<br/>
# cd xvidcore/build/generic<br/>
# ./configure<br/>
# make<br/>
# make install<br/>
# cd ..<br/><br/>
10). ffmpeg<br/>
# git clone git://source.ffmpeg.org/ffmpeg<br/>
# cd ffmpeg<br/>
# ./configure  --prefix=/opt/ffmpeg/ --enable-version3  --enable-libvpx --enable-libfaac --enable-libmp3lame  --enable-libvorbis --enable-libx264 --enable-libxvid --enable-shared --enable-gpl --enable-postproc --enable-nonfree  --enable-avfilter --enable-pthreads<br/>
# make &amp;&amp; make install<br/>
# cd ..<br/><br/>
修改/etc/ld.so.conf如下:<br/>
include ld.so.conf.d/*.conf<br/>
/lib<br/>
/lib64<br/>
/usr/lib<br/>
/usr/lib64<br/>
/usr/local/lib<br/>
/usr/local/lib64</div><div>/opt/ffmpeg/lib</div><div>在/opt/ffmpeg/lib下执行</div><div># ldconfig</div><div><br/></div><div><br/></div><div><font face="宋体" size="1"><span style="font-size:9pt">qt-faststart  MP4 MEDADATE移动工具</span></font></div><div><font face="宋体" size="1"><span style="font-size:9pt">qt-faststart安装方法：</span></font></div><div><font face="宋体" size="1"><span style="font-size:9pt">进入FFMpeg安装目录（是安装目录，不是opt/ffmpeg目录），执行命令：</span></font></div><div><font face="宋体" size="1"><span style="font-size:9pt">cd ffmpeg </span></font></div><div><font face="宋体" size="1"><span style="font-size:9pt">make tools/qt-faststart </span></font></div><div><font face="宋体" size="1"><span style="font-size:9pt">cp -a tools/qt-faststart /usr/bin/</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><div><span style="font-size: 9pt;"><span style="font-family: 宋体;"><br/></span></span></div><div><span style="font-size: 9pt;"><span style="font-family: 宋体;"><br/></span></span></div><div><span style="font-size: 9pt;"><span style="font-family: 宋体;"><br/></span></span></div><div>启动在/opt/ffmpeg/bin下执行</div><div>./ffmpeg</div><div><font face="宋体" size="1"><span style="font-size:9pt"> </span></font></div><div><span style="font-size: 9pt;"><span style="font-family: 宋体;"><br/></span></span></div><div><span style="font-size: 9pt;"><span style="font-family: 宋体;"><br/></span></span></div><div><span style="font-size: 9pt;"><span style="font-family: 宋体;"><br/></span></span></div><div><span style="font-size: 9pt;"><span style="font-family: 宋体;"><br/></span></span></div><div><span style="font-size: 9pt;"><span style="font-family: 宋体;"><br/></span></span></div><div><span style="font-size: 9pt;"><span style="font-family: 宋体;"><br/></span></span></div><div><span style="font-size: 9pt;"><span style="font-family: 宋体;"><br/></span></span></div><div><font face="宋体" size="2">博客资料</font></div><div><hr/></div><div><a href="http://www.cnblogs.com/wanghetao/p/3386311.html">http://www.cnblogs.com/wanghetao/p/3386311.html</a></div></div></span>
</div>
<hr>
<a name="364"/>

<div>
<span><a name="1836"></a><div><br/></div><div><span style="font-size: 26px;"><b>nginx 流媒体部署</b></span><span style="font-size: 24px;">（视频播放）</span></div><div><strong style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">一、准备工作（要安装）</strong></div><div><b><span style="font-size: 16px;"><span style="font-family: 宋体, Arial;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(102, 102, 102);"><br/></span></span></span></span></b></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">Nginx: http://nginx.org</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">模块:nginx_mod_h264_streaming(支持h264编码的视频)</span></span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">http://h264.code-shop.com/download/nginx_mod_h264_streaming-2.2.7.tar.gz</span></div><div><span style="font-size: 16px;"><span style="font-family: 宋体, Arial;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(102, 102, 102);">解压后</span></span></span></span></div><div><div><span style="background-color: rgb(255, 255, 255); color: rgb(75, 75, 75); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px;">将src/ngx_http_streaming_module.c文件中以下代码删除或者是注释掉就可以了：</span></div><p style="box-sizing: border-box; margin: 10px auto; color: rgb(75, 75, 75); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; background-color: rgb(255, 255, 255);">/* TODO: Win32 */</p><p style="box-sizing: border-box; margin: 10px auto; color: rgb(75, 75, 75); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; background-color: rgb(255, 255, 255);">if (r-&gt;zero_in_uri)</p><p style="box-sizing: border-box; margin: 10px auto; color: rgb(75, 75, 75); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; background-color: rgb(255, 255, 255);">{</p><p style="box-sizing: border-box; margin: 10px auto; color: rgb(75, 75, 75); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; background-color: rgb(255, 255, 255);">return NGX_DECLINED;</p><div>}</div><div><br/></div><div>nginx -rtmp-module模块</div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">https://github.com/arut/nginx-rtmp-module</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/></div><div><br/></div></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">模块:http_flv_module 支持flv</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">模块:http_mp4_module 支持mp4</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">下载地址:</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">http://h264.code-shop.com/download/nginx_mod_h264_streaming-2.2.7.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">1、安装依赖包:</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">#yum -y install gcc glibc glibc-devel make nasm pkgconfig lib-devel openssl-devel expat-devel gettext-devel libtool mhash.x86_64 perl-Digest-SHA1.x86_64</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">2、安装相关工具包</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">1). git</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># mkdir soft-source</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd soft-source</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://codemonkey.org.uk/projects/git-snapshots/git/git-latest.tar.xz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># xz -d git-latest.tar.xz</span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># tar -xf git-latest.tar </span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd git-2014-06-27</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># autoconf</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make &amp;&amp; make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># git --version</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">git version 2.0.0.GIT</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">2). zlib</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://zlib.net/zlib-1.2.8.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># tar -zxvf zlib-1.2.8.tar.gz cd zlib-1.2.8</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">3). pcre</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://exim.mirror.fr/pcre/pcre-8.12.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># tar zxvf pcre-8.12.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd pcre-8.12</span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make &amp;&amp; make install(如果报</span>make[1]: *** [pcrecpp.lo] Error 1，原因是 缺少gcc安转包，则 yum -y install gcc-c++，重新从<span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">./configure</span> 开始<span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">)</span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">4). yadmi</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">yadmi的作用是为flv文件添加关键帧，才能实现拖动播放</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://sourceforge.net/projects/yamdi/files/yamdi/1.4/yamdi-1.4.tar.gz/download  </span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># tar xzvf yamdi-1.4.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd yamdi-1.4</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make &amp;&amp; make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"> </span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">使用方法：</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># yamdi -i input.flv -o out.flv</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">给input.flv文件 添加关键帧，输出为out.flv文件</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">5). OpenSSL</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://www.openssl.org/source/openssl-1.0.1c.tar.gz</span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># tar -zxvf openssl-1.0.1c.tar.gz</span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd </span><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">openssl-1.0.1c</span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># </span><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">./config</span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make</span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span></div><div><br/></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">3、安装ffmpeg及其依赖包：</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">1). Yasm</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://www.tortall.net/projects/yasm/releases/yasm-1.2.0.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># tar xzvf yasm-1.2.0.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd yasm-1.2.0</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">2). x264</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># git clone git://git.videolan.org/x264</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd x264</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure --enable-shared </span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">3). LAME</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://downloads.sourceforge.net/project/lame/lame/3.99/lame-3.99.5.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># tar xzvf lame-3.99.5.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd lame-3.99.5</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">#./configure --enable-nasm</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">4). libogg</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://downloads.xiph.org/releases/ogg/libogg-1.3.0.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># tar xzvf libogg-1.3.0.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd libogg-1.3.0</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">5). libvorbis</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://downloads.xiph.org/releases/vorbis/libvorbis-1.3.3.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># tar xzvf libvorbis-1.3.3.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd libvorbis-1.3.3</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">6). libvpx</span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">地址失效</span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">(# git clone http://git.chromium.org/webm/libvpx.git</span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd libvpx</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure  --enable-shared</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..)</span></div><div><span style="color: rgb(102, 102, 102);"><span style="font-size: 16px;"><span style="font-family: 宋体;">用下面方法安装</span></span></span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">#</span> wget  <a href="http://storage.googleapis.com/downloads.webmproject.org/releases/webm/libvpx-1.5.0.tar.bz2">http://storage.googleapis.com/downloads.webmproject.org/releases/webm/libvpx-1.5.0.tar.bz2</a></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">#</span>  tar  -jxvf libvpx-1.5.0.tar.bz2</div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">#</span>  cd  libvpx-1.5.0</div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">#</span>  ./configure</div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">#</span>  make &amp;&amp; make install</div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">#</span>  cd ..</div><div><br/></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">7). FAAD2</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://downloads.sourceforge.net/project/faac/faad2-src/faad2-2.7/faad2-2.7.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># tar zxvf faad2-2.7.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd faad2-2.7</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">8). FAAC</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://downloads.sourceforge.net/project/faac/faac-src/faac-1.28/faac-1.28.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># tar zxvf faac-1.28.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd faac-1.28</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make</span></div><div><span style="font-size: 16px;"><span style="font-family: 宋体, Arial;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(102, 102, 102);"><br/></span></span></span></span></div><div><span style="font-size: 16px;"><span style="font-family: 宋体, Arial;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(102, 102, 102);"><br/></span></span></span></span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">   （报</span>make[3]: *** [3gp.o] Error 1<span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">错</span> ，则修改文件faac-1.28/common/mp4v2/mpeg4ip.h</div><div>修改前</div><table style="table-layout:fixed;width:634px;"><tr><td style="width:5.520504731861198%;"><pre>
1
2
3
4
5
6
7
</pre></td><td style="width:95.0112566516578%;"><pre style="font-family:monospace;"><span style="color: #666666; font-style: italic;">#ifdef __cplusplus
</span>extern <span style="color: #0000ff;">&quot;C&quot;</span> <span style="color: #009900;">{</span><span style="color: #666666; font-style: italic;">#endif
</span>char <span style="color: #339933;">*</span>strcasestr<span style="color: #009900;">(</span><span style="color: #000000; font-weight: bold;">const</span> char <span style="color: #339933;">*</span>haystack<span style="color: #339933;">,</span> <span style="color: #000000; font-weight: bold;">const</span> char <span style="color: #339933;">*</span>needle<span style="color: #009900;">)</span><span style="color: #339933;">;</span><span style="color: #666666; font-style: italic;">#ifdef __cplusplus
</span><span style="color: #009900;">}</span><span style="color: #666666; font-style: italic;">#endif</span></pre></td></tr></table>
 修改后
<div><table style="table-layout:fixed;width:682px;"><tr><td style="width:5.278592375366569%;"><pre>
1
2
3
4
5
6
7
</pre></td><td style="width:93.841642228739%;"><pre style="font-family:monospace;"><span style="color: #666666; font-style: italic;">#ifdef __cplusplus
</span>extern <span style="color: #0000ff;">&quot;C++&quot;</span> <span style="color: #009900;">{</span><span style="color: #666666; font-style: italic;">#endif
</span><span style="color: #000000; font-weight: bold;">const</span> char <span style="color: #339933;">*</span>strcasestr<span style="color: #009900;">(</span><span style="color: #000000; font-weight: bold;">const</span> char <span style="color: #339933;">*</span>haystack<span style="color: #339933;">,</span> <span style="color: #000000; font-weight: bold;">const</span> char <span style="color: #339933;">*</span>needle<span style="color: #009900;">)</span><span style="color: #339933;">;</span><span style="color: #666666; font-style: italic;">#ifdef __cplusplus
</span><span style="color: #009900;">}</span><span style="color: #666666; font-style: italic;">#endif</span></pre></td></tr></table></div><div><span style="font-size: 16px;"><span style="font-family: 宋体, Arial;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(102, 102, 102);"><br/></span></span></span></span></div><div><span style="font-size: 16px;"><span style="font-family: 宋体, Arial;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(102, 102, 102);">make clean 重新./configure</span></span></span></span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span></div><div><span style="font-size: 16px;"><span style="font-family: 宋体, Arial;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(102, 102, 102);"><br/></span></span></span></span></div><div><span style="font-size: 16px;"><span style="font-family: 宋体, Arial;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(102, 102, 102);"><br/></span></span></span></span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">9). Xvid</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://downloads.xvid.org/downloads/xvidcore-1.3.2.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># tar zxvf xvidcore-1.3.2.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd xvidcore/build/generic</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span></div><div><span style="font-size: 16px;"><span style="font-family: 宋体, Arial;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(102, 102, 102);"><br/></span></span></span></span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">10). ffmpeg</span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># git clone git://source.ffmpeg.org/ffmpeg</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd ffmpeg</span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure  --prefix=/opt/ffmpeg/ --enable-version3  </span><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">--enable-libvpx --enable-libfaac --enable-libmp3lame  </span><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">--enable-libvorbis --enable-libx264 --enable-libxvid </span><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">--enable-shared --enable-gpl --enable-postproc --enable-nonfree  </span><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">--enable-avfilter --enable-pthreads</span></div><div align="left"><br/></div><div align="left"><br/></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># make &amp;&amp; make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">修改/etc/ld.so.conf如下:</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">include ld.so.conf.d/*.conf</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">/lib</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">/lib64</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">/usr/lib</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">/usr/lib64</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">/usr/local/lib</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">/usr/local/lib64</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">/opt/ffmpeg/lib</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># ldconfig</span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"><br/></span></div><div> <span style="font-size: 12px;"><span style="font-family: &apos;Courier New&apos;;">TS流分割器segmenter的安装与使用(可不用)</span></span></div><div style="margin-top: 0px; margin-bottom: 0px; padding: 0px; font-family: &apos;Courier New&apos; !important; font-size: 12px;"><br/></div><div><span style="font-size: 12px;"><span style="font-family: &apos;Courier New&apos;;"><span style="margin: 0px; padding: 0px;">git clone https:</span><span style="margin: 0px; padding: 0px; color: rgb(0, 128, 0);">//</span><span style="color: rgb(0, 128, 0);">github.com/johnf/m3u8-segmenter</span></span></span></div><div><br/></div><div>cd m3u8-segmenter</div><div><span style="font-size: 12px;"><span style="font-family: &apos;Courier New&apos;;"><span style="margin: 0px; padding: 0px;">gcc -Wall -g </span></span></span>m3u8-segmenter.c <span style="font-size: 12px;"><span style="font-family: &apos;Courier New&apos;;"><span style="margin: 0px; padding: 0px;">-o segmenter -lavformat -lavcodec -lavutil -liconv -std=c99 -I/usr/local/include -L/usr/local/lib  -L/usr/local/Mediosofa/ffmpeg/libavcodec  -lavcodec -L/usr/local/libiconv -lswresample -lm -lpthread -lz</span></span></span></div><div style="margin-top: 0px; margin-bottom: 0px; padding: 0px; font-family: &apos;Courier New&apos; !important; font-size: 12px;"><span style="margin: 0px; padding: 0px;">cp segmenter </span>/usr/bin/<span style="margin: 0px; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);"> </span></div><div><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: &apos;Courier New&apos; !important; font-size: 12px;"><span style="margin: 0px; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);"><br/></span></pre></div><div><strong style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">二、安装Nginx相关模块</strong><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);">1. 模块安装</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://h264.code-shop.com/download/nginx_mod_h264_streaming-2.2.7.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># tar zxvf nginx_mod_h264_streaming-2.2.7.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"># git clone git://github.com/arut/nginx-rtmp-module.git</span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; text-align: left; background-color: rgb(255, 255, 255);"><br/></span></div><div>nginx编译(以此份为准,要检查插件路径，如果放在当前目录下../nginx要改成./nginx)</div><div> ./configure --prefix=/usr/local/nginx  --add-module=../nginx_mod_h264_streaming-2.2.7 --with-http_flv_module --with-http_gzip_static_module --with-http_stub_status_module --with-http_mp4_module  --with-http_ssl_module --add-module=../nginx-rtmp-module-master --with-cc-opt=-I/opt/ffmpeg/include --with-ld-opt='-L/opt/ffmpeg/lib -Wl,-rpath=/opt/ffmpeg/lib' --with-pcre=../pcre-8.12 --with-zlib=../zlib-1.2.8 --with-openssl=../openssl-1.0.1c</div><div><span style="font-size: 9pt;"><span style="font-family: 宋体;"><br/></span></span></div><div><font face="宋体" size="1"><span style="font-size:9pt"> ./configure --prefix=/usr/local/nginx  --add-module=../nginx_mod_h264_streaming-2.2.7 --with-http_flv_module --with-http_gzip_static_module --with-http_stub_status_module --with-http_mp4_module  --with-http_ssl_module--with-pcre=../pcre-8.12 --with-zlib=../zlib-1.2.8 --with-openssl=../openssl-1.0.1c</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><div><span style="font-size: 9pt;"><span style="font-family: 宋体;"><br/></span></span></div></div><div>make</div><div>make install</div><div><br/></div><div><br/></div><div>server里面增加</div><div>http协议</div><div><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px;"><span style="box-sizing: border-box;">location </span>~<span style="box-sizing: border-box;"> \.flv$ {
                    flv;
                    #limit_conn one </span><span style="box-sizing: border-box; color: rgb(128, 0, 128);">20</span><span style="box-sizing: border-box;">;#限制客户端并发连接数
                    limit_rate 200k;#限制每客户端最大带宽
            }
            location </span>~<span style="box-sizing: border-box;"> \.mp4$ {
                    flv;
                    #limit_conn one </span><span style="box-sizing: border-box; color: rgb(128, 0, 128);">20</span><span style="box-sizing: border-box;">;
                    limit_rate 200k;
            }</span></pre><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px;"><span style="box-sizing: border-box;"><br/></span></pre><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px;"><span style="box-sizing: border-box;">rtmp协议：</span></pre><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px;"><span style="box-sizing: border-box;">#rtmp点播配置<br/><br/>rtmp {<br/><br/>   server {<br/><br/>        listen 1935;<br/><br/>        chunk_size 4000;<br/><br/>        application  vod {<br/><br/>                play /usr/local/nginx/vod/flvs;  #点播媒体文件存放目录<br/>         }<br/>     application  vod_http {<br/><br/>                play http://192.168.5.201:8080/nginx_http;  #点播媒体文件存放目录<br/>         }<br/>     }<br/>     }     </span></pre><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px;"><span style="box-sizing: border-box;"><br/></span></pre><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px;"><span style="box-sizing: border-box;">http测试</span>&lt;html&gt;
</pre>
  &lt;head&gt;<br/>
    &lt;script src=&quot;jwplayer.js&quot;&gt;&lt;/script&gt;<br/>
  &lt;/head&gt;<br/>
&lt;body&gt;<br/>
  &lt;div id='my-video'&gt;&lt;/div&gt;<br/>
  &lt;script type='text/javascript'&gt;<br/>
    jwplayer('my-video').setup({<br/>
      file:'test1.flv',<br/>
      width:'50%',<br/>
      aspectratio:'3:2',<br/>
      fallback:'false',<br/>
      primary:'flash'<br/>
    });<br/>
  &lt;/script&gt;<br/>
&lt;/body&gt;<br/>
&lt;/html&gt;</div><div><br/></div><div><br/><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px;"><span style="box-sizing: border-box;">rtmp测试： </span></pre><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px;"><span style="box-sizing: border-box;"> </span>&lt;html&gt;
</pre>
  &lt;head&gt;<br/>
    &lt;script src=&quot;jwplayer.js&quot;&gt;&lt;/script&gt;<br/>
  &lt;/head&gt;<br/>
&lt;body&gt;<br/>
  &lt;div id='my-video'&gt;&lt;/div&gt;<br/>
  &lt;script type='text/javascript'&gt;<br/>
    jwplayer('my-video').setup({<br/>
      file:'test1.flv',<br/>
      streamer:'rtmp://www.iqcedu.com:1935/vod_http',<br/>
      width:'50%',<br/>
      aspectratio:'3:2',<br/>
      fallback:'false',<br/>
      primary:'flash'<br/>
    });<br/>
  &lt;/script&gt;<br/>
&lt;/body&gt;<br/>
&lt;/html&gt;<br/>
~                                                                                                                                                                                              <br/><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px;"><span style="box-sizing: border-box;">~                  </span></pre><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px;"><span style="box-sizing: border-box;"><br/></span></pre></div></span>
</div>
<hr>
<a name="366"/>

<div>
<span><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="宋体" size="1"><span style="font-size:9pt">http://www.hdcvpn.cn/help.shtml</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="宋体" size="1"><span style="font-size:9pt">杨帆  16:52</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="宋体" size="1"><span style="font-size:9pt">账号iqboard</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><div><font face="宋体" size="1"><span style="font-size:9pt">密码iqboard123</span></font></div></div></span>
</div>
<hr>
<a name="367"/>

<div>
<span><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><a name="1264"></a></span><div><br/></div><div style="font-weight: bold; font-size: 26px;"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">7.1：配置Redis</span></div><div>（1）yum install tcl* libstdc++*       yum install gcc</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（2）上传redis-2.8.8.tar.gz<br/>
（3）解压redis:<br/>
        tar zxvf redis-2.8.8.tar.gz<br/>
（4）cd redis-2.8.8</span></span></div><div>（5）make</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（6）</span></span> make install</div><div>如果报错 </div><div><code>zmalloc.h:50:31: error: jemalloc/jemalloc.h: No such file or directory<br/>
zmalloc.h:55:2: error: #error &quot;Newer version of jemalloc required&quot;<br/>
make[1]: *** [adlist.o] Error 1<br/>
make[1]: Leaving directory `/data0/src/redis-2.6.2/src'</code></div><div>make: *** [all] Error 2</div><div>解决办法是：</div><div><span style="font-family: 微软雅黑, Verdana, Arial, Helvetica, sans-serif; font-size: 14px; background-color: rgb(247, 250, 253);">make MALLOC=libc</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（7）</span></span> cd ..    </div><div>（8）cd /usr/local</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（9）cd redis-2.8.8/<br/>
（10）ls src/<br/>
（11）cd src/</span></span></div><div>（12）./redis-server   &amp;  或者：<span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">/usr/local/redis-2.8.8/src/redis-server &amp;</span>   ---在后台启动</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（12）Ctrl + z<br/>
（13） ps -ef|grep redis<br/>
（14）开机启动：<br/>
vi /etc/rc.local<br/>
加入：<br/>
/usr/local/redis-2.8.8/src/redis-server &amp;<br/>
（15）cd /usr/local/src</span></div></span>
</div>
<hr>
<a name="370"/>

<div>
<span><a name="1258"></a><h1>5.2：vsftp</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">A： 安装FTP工具<br/>
（1） yum install vsftpd*</span></div><div>（2） vi /etc/sysconfig/selinux  对配置文件修改为（SELINUX=<span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">permissive</span> ）：</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
     # This file controls the state of SELinux on the system.<br/>
     # SELINUX= can take one of these three values:<br/>
     #     enforcing - SELinux security policy is enforced.<br/>
     #     permissive - SELinux prints warnings instead of enforcing.<br/>
     #     disabled - No SELinux policy is loaded.<br/>
     SELINUX=permissive<br/>
     # SELINUXTYPE= can take one of these two values:<br/>
     #     targeted - Targeted processes are protected,<br/>
     #     mls - Multi Level Security protection.<br/>
     SELINUXTYPE=targeted<br/><br/>
（3） setenforce 0<br/>
（4）vi /etc/vsftpd/user_list<br/>
bin<br/>
daemon<br/>
adm<br/>
lp<br/>
sync<br/>
shutdown<br/>
halt<br/>
mail<br/>
news<br/>
uucp<br/>
operator<br/>
games<br/>
nobody<br/>
（5）vi /etc/vsftpd/ftpusers<br/>
bin<br/>
daemon<br/>
adm<br/>
lp<br/>
sync<br/>
shutdown<br/>
halt<br/>
mail<br/>
news<br/>
uucp<br/>
operator<br/>
games<br/>
nobody<br/>
（5） service vsftpd start<br/><br/><br/>
（6）用FlashFXP进行FTP连接试试看，如果能正常连接说明配置成功（前提条件要有这个账号）<br/>
192.168.5.241<br/>
root<br/>
root123<br/><br/>
/sbin/service vsftpd stop<br/><br/>
B： 启动、停止、查寻Ftp服务<br/>
     service vsftpd start<br/>
     service vsftpd stop<br/>
      service vsftpd status<br/><br/>
C：增加FTP账号<br/>
ftpUser=ruida<br/>
ftpPassword=ruida&amp;ftp<br/>
  C-1：输入，意思是将要产生的ruida映射到磁盘目录glusterfs<br/>
     useradd ruida -d /glusterfs/<br/>
  C-2：设置密码（过程会提示要输入两次密码）：<br/>
            passwd ruida<br/><br/><br/>
如果报如下错误（可以不予理会，也可以按下面方式处理试试看）：<br/>
useradd: warning: the home directory already exists.<br/>
Not copying any file from skel directory into it.<br/>
Creating mailbox file: File exists<br/><br/>
则处理方式如下：<br/>
cp /etc/skel/.bash_profile /glusterfs/<br/>
cp /etc/skel/.bashrc /glusterfs/<br/>
cp /etc/skel/.bash_logout /glusterfs/<br/><br/><br/>
D：记得修改映射目录的权限，否则文件无法上传</span></div><div>  chmod 777 glusterfs</div><div>  chmod  -R 777 glusterfs/*</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/><br/>
卸载：yum remove vsftpd<br/><br/><br/>
（IQclass端的上传下载）<br/><br/><br/>
最后 /etc/vsftpd/vsftpd.conf<br/>
pasv_enable=YES<br/>
pasv_min_port=3000<br/>
pasv_max_port=3004<br/><br/>
chroot_local_user=YES   这个要打开<br/><br/><br/><br/>
如下配置：<br/>
# Example config file /etc/vsftpd/vsftpd.conf<br/>
#<br/>
# The default compiled in settings are fairly paranoid. This sample file<br/>
# loosens things up a bit, to make the ftp daemon more usable.<br/>
# Please see vsftpd.conf.5 for all compiled in defaults.<br/>
#<br/>
# READ THIS: This example file is NOT an exhaustive list of vsftpd options.<br/>
# Please read the vsftpd.conf.5 manual page to get a full idea of vsftpd's<br/>
# capabilities.<br/>
#<br/>
# Allow anonymous FTP? (Beware - allowed by default if you comment this out).<br/>
anonymous_enable=No<br/>
#<br/>
# Uncomment this to allow local users to log in.<br/>
local_enable=YES<br/>
#<br/>
# Uncomment this to enable any form of FTP write command.<br/>
write_enable=YES<br/>
#<br/>
# Default umask for local users is 077. You may wish to change this to 022,<br/>
# if your users expect that (022 is used by most other ftpd's)<br/>
local_umask=022<br/>
#<br/>
# Uncomment this to allow the anonymous FTP user to upload files. This only<br/>
# has an effect if the above global write enable is activated. Also, you will<br/>
# obviously need to create a directory writable by the FTP user.<br/>
#anon_upload_enable=YES<br/>
#<br/>
# Uncomment this if you want the anonymous FTP user to be able to create<br/>
# new directories.<br/>
#anon_mkdir_write_enable=YES<br/>
#<br/>
# Activate directory messages - messages given to remote users when they<br/>
# go into a certain directory.<br/>
dirmessage_enable=YES<br/>
#<br/>
# The target log file can be vsftpd_log_file or xferlog_file.<br/>
# This depends on setting xferlog_std_format parameter<br/>
xferlog_enable=YES<br/>
#<br/>
# Make sure PORT transfer connections originate from port 20 (ftp-data).<br/>
connect_from_port_20=YES<br/>
#<br/>
# If you want, you can arrange for uploaded anonymous files to be owned by<br/>
# a different user. Note! Using &quot;root&quot; for uploaded files is not<br/>
# recommended!<br/>
#chown_uploads=YES<br/>
#chown_username=whoever<br/>
#<br/>
# The name of log file when xferlog_enable=YES and xferlog_std_format=YES<br/>
# WARNING - changing this filename affects /etc/logrotate.d/vsftpd.log<br/>
#xferlog_file=/var/log/xferlog<br/>
#<br/>
# Switches between logging into vsftpd_log_file and xferlog_file files.<br/>
# NO writes to vsftpd_log_file, YES to xferlog_file<br/>
xferlog_std_format=YES<br/>
#<br/>
# You may change the default value for timing out an idle session.<br/>
#idle_session_timeout=600<br/>
#<br/>
# You may change the default value for timing out a data connection.<br/>
#data_connection_timeout=120<br/>
#<br/>
# It is recommended that you define on your system a unique user which the<br/>
# ftp server can use as a totally isolated and unprivileged user.<br/>
#nopriv_user=ftpsecure<br/>
#<br/>
# Enable this and the server will recognise asynchronous ABOR requests. Not<br/>
# recommended for security (the code is non-trivial). Not enabling it,<br/>
# however, may confuse older FTP clients.<br/>
#async_abor_enable=YES<br/>
#<br/>
# By default the server will pretend to allow ASCII mode but in fact ignore<br/>
# the request. Turn on the below options to have the server actually do ASCII<br/>
# mangling on files when in ASCII mode.<br/>
# Beware that on some FTP servers, ASCII support allows a denial of service<br/>
# attack (DoS) via the command &quot;SIZE /big/file&quot; in ASCII mode. vsftpd<br/>
# predicted this attack and has always been safe, reporting the size of the<br/>
# raw file.<br/>
# ASCII mangling is a horrible feature of the protocol.<br/>
#ascii_upload_enable=YES<br/>
#ascii_download_enable=YES<br/>
#<br/>
# You may fully customise the login banner string:<br/>
#ftpd_banner=Welcome to blah FTP service.<br/>
#<br/>
# You may specify a file of disallowed anonymous e-mail addresses. Apparently<br/>
# useful for combatting certain DoS attacks.<br/>
#deny_email_enable=YES<br/>
# (default follows)<br/>
#banned_email_file=/etc/vsftpd/banned_emails<br/>
#<br/>
# You may specify an explicit list of local users to chroot() to their home<br/>
# directory. If chroot_local_user is YES, then this list becomes a list of<br/>
# users to NOT chroot().<br/>
chroot_local_user=YES<br/>
#chroot_list_enable=YES<br/>
# (default follows)<br/>
#chroot_list_file=/etc/vsftpd/chroot_list<br/>
#<br/>
# You may activate the &quot;-R&quot; option to the builtin ls. This is disabled by<br/>
# default to avoid remote users being able to cause excessive I/O on large<br/>
# sites. However, some broken FTP clients such as &quot;ncftp&quot; and &quot;mirror&quot; assume<br/>
# the presence of the &quot;-R&quot; option, so there is a strong case for enabling it.<br/>
#ls_recurse_enable=YES<br/>
#<br/>
# When &quot;listen&quot; directive is enabled, vsftpd runs in standalone mode and<br/>
# listens on IPv4 sockets. This directive cannot be used in conjunction<br/>
# with the listen_ipv6 directive.<br/>
listen=YES<br/>
#<br/>
# This directive enables listening on IPv6 sockets. To listen on IPv4 and IPv6<br/>
# sockets, you must run two copies of vsftpd with two configuration files.<br/>
# Make sure, that one of the listen options is commented !!<br/>
#listen_ipv6=YES<br/><br/>
pasv_enable=YES<br/>
pasv_min_port=3000<br/>
pasv_max_port=3004<br/><br/>
pam_service_name=vsftpd<br/>
userlist_deny=NO<br/>
#userlist_enable=YES<br/>
tcp_wrappers=YES<br/><br/><br/>
查看SELinux状态：<br/>
1、/usr/sbin/sestatus -v      ##如果SELinux status参数为enabled即为开启状态<br/>
SELinux status:                 enabled<br/>
2、getenforce                 ##也可以用这个命令检查<br/>
关闭SELinux：<br/>
1、临时关闭（不用重启机器）：<br/>
setenforce 0                  ##设置SELinux 成为permissive模式<br/>
                              ##setenforce 1 设置SELinux 成为enforcing模式<br/>
2、修改配置文件需要重启机器：<br/>
修改/etc/selinux/config 文件<br/>
将SELINUX=enforcing改为SELINUX=disabled<br/>
重启机器即可<br/><br/><br/></span></div></span>
</div>
<hr>
<a name="372"/>

<div>
<span><a name="1252"></a><h1>3.1：安装 JavaJDK</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">部署JavaJDK -- 主要 JDK 跟 SDK 是有差别的，这里是JDK<br/><br/>
SDK 是 Software Development Kit 的缩写，中文意思是“软件开发工具包”。<br/>
JDK 是 Java Development Kit 的缩写，中文意思是“JAVA开发工具包”。<br/>
所以，不难看出，SDK是一个总称，JDK是SDK中具体的一种软件开发包。<br/>
补充一点，JDK有三个版本：<br/>
J2SE,standard edition,标准版，是我们通常用的一个版本，从JDK 5.0开始，改名为Java SE。<br/>
J2EE,enterprise edition,企业版，使用这种JDK开发J2EE应用程序，从JDK 5.0开始，改名为Java EE。<br/>
J2ME,micro edtion,主要用于移动设备、嵌入式设备上的java应用程序,从JDK 5.0开始，改名为Java ME<br/><br/></span></div><div>首先，查看是否已经装有Java</div><div>rpm -qa|grep gcj（rpm -qa|grep jdk），如果有</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">libgcj-devel-4.4.7-4.el6.i686<br/>
libgcj-4.4.7-4.el6.i686<br/>
java-1.5.0-gcj-1.5.0.0-29.1.el6.i686</span></div><div><br/></div><div><font color="#010101" face="微软雅黑" size="1"><span style="font-size:9pt">卸载所有查询出来的文件：</span></font></div><div>rpm -e --nodeps java-1.5.0-gcj-1.5.0.0-29.1.el6.i686</div><div><br/></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">如果安装文件为bin文件：<br/>
（1） 上传： 4-jdk-6u38-ea-bin-b04-linux-i586-31_oct_2012.bin<br/>
（2）增加可执行权限：chmod +x 4-jdk-6u38-ea-bin-b04-linux-i586-31_oct_2012.bin</span></div><div>（3）执行安装：./4-jdk-6u38-ea-bin-b04-linux-i586-31_oct_2012.bin</div><div><span style="font-size: medium;">       此时会生成文件</span><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">4-jdk-6u38-ea-bin-b04-linux-i586-31_oct_2012</span><span style="font-size: medium;">.rpm，同样给所有用户添加可执行的权限</span></div><div><span style="font-size: medium;">       #chmod +x</span> <span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">4-jdk-6u38-ea-bin-b04-linux-i586-31_oct_2012</span><span style="font-size: medium;">.rpm</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（4）</span><span style="font-size: medium;">#rpm -ivh </span><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">4-jdk-6u38-ea-bin-b04-linux-i586-31_oct_2012</span><span style="font-size: medium;">.rpm</span></div><div><br/></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">如果安装文件为tar.gz文件</span></div><div>（5）上传： jdk-7u67-linux-x64.tar.gz</div><div>（6）tar –zxvf jdk-7u67-linux-x64.tar.gz</div><div><br/></div><div><br/></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（7）mkdir /usr/java<br/>
（8）mv jdk1.6.0_38 /usr/java/<br/>
（8）添加环境变量： vi /etc/profile<br/><br/>
     JAVA_HOME=/usr/java/jdk1.6.0_34<br/>
     CLASSPATH=$JAVA_HOME/lib/tools.jar:$JAVA_HOME/jre/lib/rt.jar<br/>
     PATH=$JAVA_HOME/bin:$PATH:$HOME/bin:$JAVA_HOME/jre/bin</span></div><div>     export JAVA_HOME CLASSPATH PATH</div><div><br/></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（9）  使环境变量生效</span></div><div>     source /etc/profile</div><div><br/></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（10）查看有没有配置成功： </span></div></span>
</div>
<hr>
<a name="373"/>

<div>
<span></span>
</div>
<hr>
<a name="375"/>

<div>
<span><a name="1286"></a><h1>配置多个tomcat</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">/usr/local/tomcat2/conf/server.xml<br/><br/>
&lt;Server port=&quot;8006&quot; shutdown=&quot;SHUTDOWN&quot;&gt;<br/>
#此处的8005已改为8006<br/>
&lt;Connector port=&quot;8081&quot; protocol=&quot;HTTP/1.1&quot;<br/>
               connectionTimeout=&quot;20000&quot;<br/>
               redirectPort=&quot;8443&quot; /&gt;<br/>
#此处的8080已改为8081<br/>
&lt;Connector port=&quot;8010&quot; protocol=&quot;AJP/1.3&quot; redirectPort=&quot;8443&quot; /&gt;<br/>
#此处的8009已改为8010</span></div></span>
</div>
<hr>
<a name="376"/>

<div>
<span><a name="1671"></a><h1>账号密码</h1></span>
</div>
<hr>
<a name="378"/>

<div>
<span><a name="2124"></a><h1>笔记</h1><div><span>20120701      zxc_123</span></div></span>
</div>
<hr>
<a name="381"/>

<div>
<span><a name="1936"></a><h1>安装ffmpeg</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">安装ffmpeg及其依赖包：</span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">yum install  git<br/>
1). Yasm<br/>
# wget http://www.tortall.net/projects/yasm/releases/yasm-1.2.0.tar.gz<br/>
# tar xzvf yasm-1.2.0.tar.gz<br/>
# cd yasm-1.2.0<br/>
# ./configure<br/>
# make<br/>
# make install<br/>
# cd ..<br/><br/>
2). x264<br/>
# git clone git://git.videolan.org/x264<br/>
# cd x264<br/>
# ./configure --enable-shared<br/>
# make<br/>
# make install<br/>
# cd ..<br/><br/>
3). LAME<br/>
# wget http://downloads.sourceforge.net/project/lame/lame/3.99/lame-3.99.5.tar.gz<br/>
# tar xzvf lame-3.99.5.tar.gz<br/>
# cd lame-3.99.5<br/>
#./configure --enable-nasm<br/>
# make<br/>
# make install<br/>
# cd ..<br/><br/>
4). libogg<br/>
# wget http://downloads.xiph.org/releases/ogg/libogg-1.3.0.tar.gz<br/>
# tar xzvf libogg-1.3.0.tar.gz<br/>
# cd libogg-1.3.0<br/>
# ./configure<br/>
# make<br/>
# make install<br/>
# cd ..<br/><br/>
5). libvorbis<br/>
# wget http://downloads.xiph.org/releases/vorbis/libvorbis-1.3.3.tar.gz<br/>
# tar xzvf libvorbis-1.3.3.tar.gz<br/>
# cd libvorbis-1.3.3<br/>
# ./configure<br/>
# make<br/>
# make install<br/>
# cd ..<br/><br/>
6). libvpx<br/>
# git clone <a href="http://git.chromium.org/webm/libvpx.git">http://git.chromium.org/webm/libvpx.git</a></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><a href="http://storage.googleapis.com/downloads.webmproject.org/releases/webm/libvpx-1.4.0.tar.bz2" style="color: rgb(85, 85, 255); font-weight: bold; font-family: verdana, tahoma, helvetica, arial, sans-serif; font-size: 16px; line-height: 19.1875px; text-align: left;">http://storage.googleapis.com/downloads.webmproject.org/releases/webm/libvpx-1.4.0.tar.bz2</a><br/>
# cd libvpx<br/>
# ./configure  --enable-shared<br/>
# make<br/>
# make install<br/>
# cd ..</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">bzip2 -d  gcc-4.1.0.tar.bz2 </span><br style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">---上面解压完之后执行下面的命令。</span><br style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">tar -xvf gcc-4.1.0.tar 或 tar -xvf *.tar</span><br style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">解完之后会出现多一个文件夹 gcc-4.1.0</span><br/><br/>
7). FAAD2<br/>
# wget http://downloads.sourceforge.net/project/faac/faad2-src/faad2-2.7/faad2-2.7.tar.gz<br/>
# tar zxvf faad2-2.7.tar.gz<br/>
# cd faad2-2.7<br/>
# ./configure<br/>
# make<br/>
# make install<br/>
# cd ..<br/><br/>
8). FAAC<br/>
# wget http://downloads.sourceforge.net/project/faac/faac-src/faac-1.28/faac-1.28.tar.gz<br/>
# tar zxvf faac-1.28.tar.gz<br/>
# cd faac-1.28<br/>
# ./configure<br/>
# make<br/>
# make install<br/>
# cd ..<br/>
2.1 报错内容： <br/><br/>
In file included from config_opts.cpp:1:<br/>
/include/mpeg4ip.h:126: error: new declaration 'char* strcasestr(const char*, const char*)'<br/>
/usr/include/string.h:369: error: ambiguates old declaration 'const char* strcasestr(const char*, const char*)'<br/>
解决办法：<br/><br/>
vi common/mp4v2/mpeg4ip.h<br/><br/>
注释掉函数声明，如下所示：</span><div><img src="Evernote_files/Image [1].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/><br/>
//char* strcasestr(const char*, const char*)<br/><br/><br/>
9). Xvid<br/>
# wget http://downloads.xvid.org/downloads/xvidcore-1.3.2.tar.gz<br/>
# tar zxvf xvidcore-1.3.2.tar.gz<br/>
# cd xvidcore/build/generic<br/>
# ./configure<br/>
# make<br/>
# make install<br/>
# cd ..<br/><br/>
10). ffmpeg<br/>
# git clone git://source.ffmpeg.org/ffmpeg<br/>
# cd ffmpeg<br/>
# ./configure  --prefix=/opt/ffmpeg/ --enable-version3  --enable-libvpx --enable-libfaac --enable-libmp3lame  --enable-libvorbis --enable-libx264 --enable-libxvid --enable-shared --enable-gpl --enable-postproc --enable-nonfree  --enable-avfilter --enable-pthreads<br/>
# make &amp;&amp; make install<br/>
# cd ..<br/><br/>
修改/etc/ld.so.conf如下:<br/>
include ld.so.conf.d/*.conf<br/>
/lib<br/>
/lib64<br/>
/usr/lib<br/>
/usr/lib64<br/>
/usr/local/lib<br/>
/usr/local/lib64<br/>
/opt/ffmpeg/lib<br/>
# ldconfig</div></div></div></span>
</div>
<hr>
<a name="388"/>

<div>
<span><a name="1290"></a><h1>地址信息</h1><div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">root   <span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: 宋体; text-indent: 0mm;"> iqcloud.cn.123</span></span></div>
tomcat主 58.22.30.37 221        192.168.5.201<br/>
tomcat备 58.22.30.37 222        192.168.5.202<br/>
nginx主  58.22.30.37 225        192.168.5.205<br/>
nginx备  58.22.30.37 226        192.168.5.206<br/>
mysql主  58.22.30.37 224        192.168.5.204<br/>
mysql从  58.22.30.37 223        192.168.5.203<br/>
外网路由器：http://58.22.30.37:8888/   账号：admin 密码:returnstarlock
<div><br/></div><div><br/></div><div><br/></div><div><br/></div><div>pc主机IP    root iqboard<br/><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><img src="Evernote_files/Image [2].png" type="image/png" alt="graphic" border="0" height="152" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="434"/></div></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><br/></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><br/></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;">云网盘 ，云资源账号密码：<span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: 宋体; text-indent: 0mm;">VC4QfaDa 123123</span></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font color="#010101" face="宋体" size="1"><span style="font-size:9pt">unqzJ53F  123456 </span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font color="#010101" face="宋体" size="1"><span style="font-size:9pt"><br/></span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font color="#010101" face="宋体" size="2">电信：</font><span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: 宋体; text-indent: 0mm;">182.157.1.28   联通：</span><span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: 宋体; text-indent: 0mm;">36.250.229.28</span></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><span style="font-size: 8pt; color: rgb(0, 64, 128); text-indent: 0mm;">托管技术经理，陈小华：15980608307</span></div></div></div></span>
</div>
<hr>
<a name="390"/>

<div>
<span><a name="1519"></a><h1>IP地址</h1><div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">cd /etc/sysconfig/network-scripts</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">DEVICE=eth0<br/>
HWADDR=00:1F:E2:0A:B0:13<br/>
TYPE=Ethernet<br/>
IPADDR=192.168.5.211<br/>
NETMASK=255.255.255.0<br/>
GATEWAY=192.168.5.1<br/>
ONBOOT=yes<br/>
NM_CONTROLLED=yes<br/>
BOOTPROTO=static<br/>
DNS1=58.22.96.66</span></div></span>
</div>
<hr>
<a name="391"/>

<div>
<span><a name="1284"></a><h1>ftp 防火墙</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">CentOS/RHEL如何设置防火墙允许被动FTP连接<br/>
Sat, 11/21/2009 - 16:46 - tlbluestar<br/>
参考地址： <a href="http://lists.centos.org/pipermail/centos/2005-December/015896.html">http://lists.centos.org/pipermail/centos/2005-December/015896.html</a></span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">关于被动FTP的工作原理，请参阅此文。<br/>
(1)首先修改防火墙iptables的规则，添加如下内容：<br/>
[root@dlghost sysconfig]# vi /etc/sysconfig/iptables<br/>
-A RH-Firewall-1-INPUT -m state --state ESTABLISHED -m tcp -p tcp --sport 1024: --dport 1024: -j ACCEPT<br/>
(2)然后将ip_nat_ftp添加为自动加载模块：<br/>
# cat /etc/sysconfig/iptables-config | grep ip_nat_ftp<br/>
IPTABLES_MODULES=&quot;ip_nat_ftp&quot;<br/>
(3)重新启动iptables防火墙：<br/>
# /etc/init.d/iptables condrestart<br/><br/><br/><br/><br/><br/>
在 /etc/sysconfig/iptables 编辑<br/><br/>
[root@nginx2 ~]# vi /etc/sysconfig/iptables<br/><br/>
# Generated by iptables-save v1.4.7 on Fri Dec 12 20:37:55 2014<br/>
*filter<br/>
:INPUT ACCEPT [0:0]<br/>
:FORWARD ACCEPT [0:0]<br/>
:OUTPUT ACCEPT [0:0]<br/>
-A INPUT -p tcp -m tcp --dport 21 -j ACCEPT<br/>
-A INPUT -p tcp -m tcp --dport 20 -j ACCEPT<br/>
-A INPUT -p icmp -j ACCEPT<br/>
-A INPUT -s 127.0.0.1/32 -d 127.0.0.1/32 -j ACCEPT<br/>
-A INPUT -p tcp -m tcp --dport 80 -j ACCEPT<br/>
-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT<br/>
-A INPUT -p icmp -j ACCEPT<br/>
-A INPUT -i lo -j ACCEPT<br/>
-A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT<br/>
-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT<br/>
-A INPUT -j REJECT --reject-with icmp-host-prohibited<br/>
-A INPUT -j REJECT --reject-with icmp-port-unreachable<br/>
-A FORWARD -j REJECT --reject-with icmp-host-prohibited<br/>
-A FORWARD -j REJECT --reject-with icmp-port-unreachable<br/>
-A OUTPUT -j ACCEPT<br/>
COMMIT<br/>
# Completed on Fri Dec 12 20:37:55 2014</span></div></div></span>
</div>
<hr>
<a name="394"/>

<div>
<span><a name="1836"></a><h1>nginx 流媒体部署</h1><div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><strong style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">一、准备工作</strong><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">Nginx: http://nginx.org</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">模块:nginx_mod_h264_streaming(支持h264编码的视频)</span></span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">http://h264.code-shop.com/download/nginx_mod_h264_streaming-2.2.7.tar.gz</span></div><div><span style="background-color: rgb(255, 255, 255); color: rgb(75, 75, 75); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; line-height: 20px;">将src/ngx_http_streaming_module.c文件中以下代码删除或者是注释掉就可以了：</span></div><p style="box-sizing: border-box; margin: 10px auto; color: rgb(75, 75, 75); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; line-height: 20px; background-color: rgb(255, 255, 255);">/* TODO: Win32 */</p><p style="box-sizing: border-box; margin: 10px auto; color: rgb(75, 75, 75); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; line-height: 20px; background-color: rgb(255, 255, 255);">if (r-&gt;zero_in_uri)</p><p style="box-sizing: border-box; margin: 10px auto; color: rgb(75, 75, 75); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; line-height: 20px; background-color: rgb(255, 255, 255);">{</p><p style="box-sizing: border-box; margin: 10px auto; color: rgb(75, 75, 75); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; line-height: 20px; background-color: rgb(255, 255, 255);">return NGX_DECLINED;</p><div>}</div><div><br/></div><div>nginx -rtmp-module模块</div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">https://github.com/arut/nginx-rtmp-module</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/></div><div><br/></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">模块:http_flv_module 支持flv</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">模块:http_mp4_module 支持mp4</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">下载地址:</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">http://h264.code-shop.com/download/nginx_mod_h264_streaming-2.2.7.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">1、安装依赖包:</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">#yum -y install gcc glibc glibc-devel make nasm pkgconfig lib-devel openssl-devel expat-devel gettext-devel libtool mhash.x86_64 perl-Digest-SHA1.x86_64</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">2、安装相关工具包</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">1). git</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># mkdir soft-source</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd soft-source</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://codemonkey.org.uk/projects/git-snapshots/git/git-latest.tar.xz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># xz -d git-latest.tar.xz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar xzvf git-latest.tar </span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd git-2014-06-27</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># autoconf</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make &amp;&amp; make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># git --version</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">git version 2.0.0.GIT</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">2). zlib</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://zlib.net/zlib-1.2.8.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar -zxvf zlib-1.2.8.tar.gz cd zlib-1.2.8</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">3). pcre</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://exim.mirror.fr/pcre/pcre-8.12.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar zxvf pcre-8.12.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd pcre-8.12</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make &amp;&amp; make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">4). yadmi</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">yadmi的作用是为flv文件添加关键帧，才能实现拖动播放</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://sourceforge.net/projects/yamdi/files/yamdi/1.4/yamdi-1.4.tar.gz/download  </span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar xzvf yamdi-1.4.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd yamdi-1.4</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make &amp;&amp; make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"> </span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">使用方法：</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># yamdi -i input.flv -o out.flv</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">给input.flv文件 添加关键帧，输出为out.flv文件</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">5). OpenSSL</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://www.openssl.org/source/openssl-1.0.1c.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar -zxvf openssl-1.0.1c.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./config</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">3、安装ffmpeg及其依赖包：</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">1). Yasm</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://www.tortall.net/projects/yasm/releases/yasm-1.2.0.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar xzvf yasm-1.2.0.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd yasm-1.2.0</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">2). x264</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># git clone git://git.videolan.org/x264</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd x264</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure --enable-shared </span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">3). LAME</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://downloads.sourceforge.net/project/lame/lame/3.99/lame-3.99.5.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar xzvf lame-3.99.5.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd lame-3.99.5</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">#./configure --enable-nasm</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">4). libogg</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://downloads.xiph.org/releases/ogg/libogg-1.3.0.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar xzvf libogg-1.3.0.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd libogg-1.3.0</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">5). libvorbis</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://downloads.xiph.org/releases/vorbis/libvorbis-1.3.3.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar xzvf libvorbis-1.3.3.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd libvorbis-1.3.3</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">6). libvpx</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># git clone http://git.chromium.org/webm/libvpx.git</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd libvpx</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure  --enable-shared</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">7). FAAD2</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://downloads.sourceforge.net/project/faac/faad2-src/faad2-2.7/faad2-2.7.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar zxvf faad2-2.7.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd faad2-2.7</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">8). FAAC</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://downloads.sourceforge.net/project/faac/faac-src/faac-1.28/faac-1.28.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar zxvf faac-1.28.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd faac-1.28</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">9). Xvid</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://downloads.xvid.org/downloads/xvidcore-1.3.2.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar zxvf xvidcore-1.3.2.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd xvidcore/build/generic</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">10). ffmpeg</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># git clone git://source.ffmpeg.org/ffmpeg</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ffmpeg</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure  --prefix=/opt/ffmpeg/ --enable-version3  </span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">--enable-libvpx --enable-libfaac --enable-libmp3lame  </span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">--enable-libvorbis --enable-libx264 --enable-libxvid </span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">--enable-shared --enable-gpl --enable-postproc --enable-nonfree  </span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">--enable-avfilter --enable-pthreads</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make &amp;&amp; make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">修改/etc/ld.so.conf如下:</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">include ld.so.conf.d/*.conf</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">/lib</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">/lib64</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">/usr/lib</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">/usr/lib64</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">/usr/local/lib</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">/usr/local/lib64</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">/opt/ffmpeg/lib</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ldconfig</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"><br/></span></div><div><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: &apos;Courier New&apos; !important; font-size: 12px; line-height: 18px;"><span style="margin: 0px; padding: 0px; line-height: 1.5 !important;">TS流分割器segmenter的安装与使用

</span><span style="margin: 0px; padding: 0px; line-height: 1.5 !important;">git clone https:</span><span style="margin: 0px; padding: 0px; line-height: 1.5 !important; color: rgb(0, 128, 0);">//</span><span style="margin: 0px; padding: 0px; line-height: 1.5 !important; color: rgb(0, 128, 0);">github.com/johnf/m3u8-segmenter<br style="margin: 0px; padding: 0px;"/>cd m3u8-segmenter<br style="margin: 0px; padding: 0px;"/></span><span style="margin: 0px; padding: 0px; line-height: 1.5 !important;"> gcc -Wall -g segmenter.c -o segmenter -lavformat -lavcodec -lavutil -liconv -std=c99 -I/usr/local/include -L/usr/local/lib  -L/usr/local/Mediosofa/ffmpeg/libavcodec  -lavcodec -L/usr/local/libiconv -lswresample -lm -lpthread -lz<br/></span><span style="margin: 0px; padding: 0px; line-height: 1.5 !important;">cp segmenter </span>/usr/bin/<span style="margin: 0px; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 1.5; background-color: rgb(255, 255, 255);"> </span></pre><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: &apos;Courier New&apos; !important; font-size: 12px; line-height: 18px;"><span style="margin: 0px; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 1.5; background-color: rgb(255, 255, 255);"><br/></span></pre></div><div><strong style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">二、安装Nginx相关模块</strong><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">1. 模块安装</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://h264.code-shop.com/download/nginx_mod_h264_streaming-2.2.7.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar zxvf nginx_mod_h264_streaming-2.2.7.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># git clone git://github.com/arut/nginx-rtmp-module.git</span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"><br/></span></div>
nginx编译
<div> ./configure --prefix=/usr/local/nginx  --add-module=../nginx_mod_h264_streaming-2.2.7 --with-http_flv_module --with-http_gzip_static_module --with-http_stub_status_module --with-http_mp4_module  --with-http_ssl_module --add-module=../nginx-rtmp-module-master --with-cc-opt=-I/opt/ffmpeg/include --with-ld-opt='-L/opt/ffmpeg/lib -Wl,-rpath=/opt/ffmpeg/lib' --with-pcre=../pcre-8.12 --with-zlib=../zlib-1.2.8 --with-openssl=../openssl-1.0.1c</div><div>make</div><div>make install</div><div><br/></div><div><br/></div><div>server里面增加</div><div>http协议</div><div><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px; line-height: 19px;"><span style="box-sizing: border-box; line-height: 1.5 !important;">location </span>~<span style="box-sizing: border-box; line-height: 1.5 !important;"> \.flv$ {
                    flv;
                    #limit_conn one </span><span style="box-sizing: border-box; line-height: 1.5 !important; color: rgb(128, 0, 128);">20</span><span style="box-sizing: border-box; line-height: 1.5 !important;">;#限制客户端并发连接数
                    limit_rate 200k;#限制每客户端最大带宽
            }
            location </span>~<span style="box-sizing: border-box; line-height: 1.5 !important;"> \.mp4$ {
                    flv;
                    #limit_conn one </span><span style="box-sizing: border-box; line-height: 1.5 !important; color: rgb(128, 0, 128);">20</span><span style="box-sizing: border-box; line-height: 1.5 !important;">;
                    limit_rate 200k;
            }</span></pre><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px; line-height: 19px;"><span style="box-sizing: border-box; line-height: 1.5 !important;"><br/></span></pre><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px; line-height: 19px;"><span style="box-sizing: border-box; line-height: 1.5 !important;">rtmp协议：</span></pre><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px; line-height: 19px;"><span style="box-sizing: border-box; line-height: 1.5 !important;">#rtmp点播配置<br/><br/>rtmp {<br/><br/>   server {<br/><br/>        listen 1935;<br/><br/>        chunk_size 4000;<br/><br/>        application  vod {<br/><br/>                play /usr/local/nginx/vod/flvs;  #点播媒体文件存放目录<br/>         }<br/>     application  vod_http {<br/><br/>                play http://192.168.5.201:8080/nginx_http;  #点播媒体文件存放目录<br/>         }<br/>     }<br/>     }     </span></pre><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px; line-height: 19px;"><span style="box-sizing: border-box; line-height: 1.5 !important;"><br/></span></pre><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px; line-height: 19px;"><span style="box-sizing: border-box; line-height: 1.5 !important;">http测试</span>&lt;html&gt;
</pre>
  &lt;head&gt;<br/>
    &lt;script src=&quot;jwplayer.js&quot;&gt;&lt;/script&gt;<br/>
  &lt;/head&gt;<br/>
&lt;body&gt;<br/>
  &lt;div id='my-video'&gt;&lt;/div&gt;<br/>
  &lt;script type='text/javascript'&gt;<br/>
    jwplayer('my-video').setup({<br/>
      file:'test1.flv',<br/>
      width:'50%',<br/>
      aspectratio:'3:2',<br/>
      fallback:'false',<br/>
      primary:'flash'<br/>
    });<br/>
  &lt;/script&gt;<br/>
&lt;/body&gt;<br/>
&lt;/html&gt;</div><div><br/></div><div><br/><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px; line-height: 19px;"><span style="box-sizing: border-box; line-height: 1.5 !important;">rtmp测试： </span></pre><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px; line-height: 19px;"><span style="box-sizing: border-box; line-height: 1.5 !important;"> </span>&lt;html&gt;
</pre>
  &lt;head&gt;<br/>
    &lt;script src=&quot;jwplayer.js&quot;&gt;&lt;/script&gt;<br/>
  &lt;/head&gt;<br/>
&lt;body&gt;<br/>
  &lt;div id='my-video'&gt;&lt;/div&gt;<br/>
  &lt;script type='text/javascript'&gt;<br/>
    jwplayer('my-video').setup({<br/>
      file:'test1.flv',<br/>
      streamer:'rtmp://www.iqcedu.com:1935/vod_http',<br/>
      width:'50%',<br/>
      aspectratio:'3:2',<br/>
      fallback:'false',<br/>
      primary:'flash'<br/>
    });<br/>
  &lt;/script&gt;<br/>
&lt;/body&gt;<br/>
&lt;/html&gt;<br/>
~                                                                                                                                                                                              <br/><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px; line-height: 19px;"><span style="box-sizing: border-box; line-height: 1.5 !important;">~                  </span></pre><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px; line-height: 19px;"><span style="box-sizing: border-box; line-height: 1.5 !important;"><br/></span></pre></div></div></span>
</div>
<hr>
<a name="397"/>

<div>
<span><a name="1282"></a><h1>centos全面卸载mysql</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">CentOS下如何完全卸载MySQL？解决卸载不干净的问题<br/><br/>
系统：CentOS 6.5，MySQL：MySql 5.6<br/><br/>
这里主要解决使用rpm安装的卸载问题，安装方法见：CentOS安装mysql*.rpm提示conflicts with file from package的解决办法<br/><br/>
虽然说这里的是使用rpm安装的卸载问题，我觉得使用yum方式安装的如果遇到相同的问题也一样适用。<br/><br/>
查看已经安装的服务<br/>
rpm –qa|grep -i mysql<br/>
-i 作用是不区分大小写<br/><br/>
可以看到有两个安装包<br/>
MySQL-server-5.6.19-1.linux_glibc2.5.x86_64.rpm<br/>
MySQL-client-5.6.19-1.linux_glibc2.5.x86_64.rpm<br/>
删除这两个服务(去掉后缀)<br/>
rpm –e MySQL-client-5.6.19-1.linux_glibc2.5.x86_64<br/>
rpm -e MySQL-server-5.6.19-1.linux_glibc2.5.x86_64<br/>
查看残留的目录：<br/>
whereis mysql<br/><br/>
然后删除mysql目录：<br/>
rm –rf /usr/lib64/mysql<br/><br/>
删除相关文件：<br/>
rm –rf /usr/my.cnf<br/>
rm -rf /root/.mysql_sercret<br/>
最关键的：<br/>
rm -rf /var/lib/mysql<br/><br/>
如果这个目录如果不删除，再重新安装之后，密码还是之前的密码，不会重新初始化！</span></div></span>
</div>
<hr>
<a name="398"/>

<div>
<span><a name="1280"></a><h1>C：6台服务器磁盘分区列表</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">A：nginx主：192.168.5.205<br/>
Filesystem            Size  Used Avail Use% Mounted on<br/>
/dev/sda1             233G  4.8G  216G   3% /<br/>
tmpfs                  32G  112K   32G   1% /dev/shm<br/>
/dev/sdb1             1.5T  223M  1.4T   1% /boot<br/>
/dev/sdb2            1013G  200M  961G   1% /home<br/><br/>
B：nginx备：192.168.5.206<br/>
Filesystem            Size  Used Avail Use% Mounted on<br/>
/dev/sda1             233G  170G   52G  77% /<br/>
tmpfs                  32G  240K   32G   1% /dev/shm<br/>
/dev/sdb1             1.5T  165G  1.2T  13% /boot<br/>
/dev/sdb2            1013G  200M  961G   1% /home<br/><br/>
C：tomcat1：192.168.5.201<br/>
Filesystem            Size  Used Avail Use% Mounted on<br/>
/dev/sda1             233G  4.2G  217G   2% /<br/>
tmpfs                  32G     0   32G   0% /dev/shm<br/>
/dev/sdb1             1.5T  223M  1.4T   1% /boot<br/>
/dev/sdb2            1013G  200M  961G   1% /home<br/><br/>
D：tomcat2：192.168.5.202<br/>
Filesystem      Size  Used Avail Use% Mounted on<br/>
/dev/sda3       232G  490M  220G   1% /<br/>
tmpfs            32G     0   32G   0% /dev/shmE<br/>
/dev/sda1      1008M   62M  896M   7% /boot<br/>
/dev/sdb2       1.5T  198M  1.4T   1% /home<br/>
/dev/sdb1       1.9T  3.7G  1.8T   1% /usr<br/><br/>
E：MySQL主：192.168.5.204<br/>
Filesystem            Size  Used Avail Use% Mounted on<br/>
/dev/sda2             962G  4.4G  909G   1% /<br/>
tmpfs                 7.8G     0  7.8G   0% /dev/shm<br/>
/dev/sda1             856G  226M  813G   1% /boot<br/><br/>
F：MySQL从：192.168.5.203<br/>
Filesystem            Size  Used Avail Use% Mounted on<br/>
/dev/sda2             962G  4.4G  909G   1% /<br/>
tmpfs                 7.8G     0  7.8G   0% /dev/shm<br/>
/dev/sda1             856G  226M  813G   1% /boot<br/></span></div></span>
</div>
<hr>
<a name="400"/>

<div>
<span><a name="1278"></a><h1>B：数据库配置信息</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">装完数据库时，第一次添加的用户名跟密码为：<br/>
root<br/>
root<br/><br/>
服务器内部使用（局域网用）<br/>
ruida<br/>
ruida~<br/><br/>
服务器外部使用<br/>
ruida1<br/>
ruida1~</span></div></span>
</div>
<hr>
<a name="404"/>

<div>
<span><a name="1272"></a><h1>9.2：安装PHP可能会遇到的问题无标题笔记</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">PHP安装过程出问题时，看看是否需要安装下面的哲别包...<br/>
yum -y install libevent libevent-devel<br/>
yum -y install libxml2 libxml2-devel<br/>
yum -y install curl-devel<br/>
yum -y install libpng-devel<br/>
yum install libjpeg-devel<br/>
yum install freetype-devel<br/>
yum -y install libtool-ltdl-devel<br/>
yum -y install libmcrypt libmcrypt-devel</span></div></span>
</div>
<hr>
<a name="405"/>

<div>
<span><a name="1276"></a><h1>A：系统配置信息</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">由上到下：<br/>
编号          内存          硬盘          名称          序号                    IP<br/><br/>
1         64G          1T*5          Tomcat2     29307794582           192.168.5.202</span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">2          64G          1T*5          Tomcat1     33661359254          192.168.5.201 </span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">3          64G          1T*5          Nginx2     42610353302            192.168.5.206 </span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">4          16G          1T*2          MySQL2     19648322966          192.168.5.203 </span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">5          16G          1T*2          MySQL1     17471540630          192.168.5.204 </span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">6          64G          1T*5          Nginx1     3488737430              192.168.5.205 <br/><br/>
做Red5时，1T*5分配如下：4T中的300G 系统，余下有1.5T当资源用（150000， 分给boot目录），再剩下的home<br/>
安装系统时选择从300G里再分出一个swap（64*1024=65536）用于交换<br/><br/>
密码：iqcloud.cn.123<br/><br/><br/>
硬盘Red5<br/>
http://zh.community.dell.com/techcenter/systems-management/w/wiki/392<br/>
Dell客服电话：<br/><br/>
1. 亮黄灯问题：<br/>
引起问题的原因：硬盘被爬过，Dell服务器系统日志未清除，导致这个问题<br/><br/>
解决方法：<br/>
（1）找一台机子（非服务器）跟一条网线，将网线连接到服务器后单独一个网口<br/>
（2）将这台机子的IP地址设置成 192.168.0.***  ***不能是120， 子网掩码（255.255.255.0， 一般会自动产生）<br/>
（3）拼 192.168.0.120  120是Dell服务器的IP（他们设置定死的）<br/>
（4）默认用户是：root， 密码：calvin   不区分大小写<br/>
（5）登入进去后，如果有提示要修改密码，可以自己修改一个<br/>
（6）（5）修改完后进去后，在服务器日志那边将日志清除掉就可以<br/><br/>
热备启动，顶替坏掉的硬盘，这时如果还要再加热备的解决方法：<br/>
（1）要同大小同型号的硬盘插进去<br/>
（2）跟设置Red5步骤里面的设置热备盘的方式一样对这块盘设置为热备<br/><br/>
假如4块Red5盘坏掉第三块，想把第三块替换掉的处理方式：<br/>
（1）提供一块跟坏掉的硬盘型号、大小一致的新盘<br/>
（2）拔出坏的硬盘，换上新的硬盘<br/>
（3）如果出现黄灯，按上面方式处理<br/><br/>
如果4块盘做Red5，某天要加上一块盘（第五块），也一起整成Red5<br/>
（1）如果在4块盘做Red5的时候弄成两个分区，那么Red5就要重新做，数据会丢失；<br/>
（2）如果在4块盘做Red5的时候弄成一个分区，是可以支持的。。。<br/><br/>
root<br/>
iqcloud.cn.123<br/>
iqboard.cn.123</span></div></div></span>
</div>
<hr>
<a name="408"/>

<div>
<span><a name="1268"></a><h1>8.2：keepalived实现双机热备</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（1）主机：192.168.5.241   备用机：192.168.5.242<br/>
（2）keepalived实现双击热备在 “7.1：redis安装、keepalived部署及实现热备（从11310帧开始）.lxe”<br/>
（3）192.168.5.242：<br/>
     cd /usr/local/keepalived<br/>
（4）192.168.5.242<br/>
     mv /etc/keepalived/keepalived.conf /etc/keepalived/keepalived.conf.org<br/>
（5）192.168.5.242<br/>
         vi /etc/keepalived/keepalived.conf<br/>
输入内容：<br/>
global_defs {<br/>
   notification_email {<br/>
     acassen@firewall.loc<br/>
     failover@firewall.loc<br/>
     sysadmin@firewall.loc<br/>
   }<br/>
   notification_email_from Alexandre.Cassen@firewall.loc<br/>
#smtp_server 192.168.200.1<br/>
#smtp_connect_timeout 30<br/>
   router_id LVS_DEVEL<br/>
}<br/><br/>
vrrp_script check_nginx {<br/>
                script &quot;/root/check_nginx.sh&quot;<br/>
                interval 2<br/>
                weight 2<br/>
}<br/>
vrrp_instance VI_1 {<br/>
    state BACKUP                                     <span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"> ####主用MASTER，从用BACKUP</span><br/>
    interface eth1                                        ###网卡<br/>
    virtual_router_id 51                       ###路由器标识<br/>
    priority 90                                   ###优先级<br/>
    mcast_src_ip 192.168.5.242              ###本机IP<br/>
    advert_int 1                                            <span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">####VRRP Multicast广播周期秒数</span><br/>
    authentication {<br/>
        auth_type PASS<br/>
        auth_pass 1111<br/>
    }<br/>
    virtual_ipaddress {<br/>
        192.168.5.244/24<br/><br/>
}<br/>
（6）192.168.5.242<br/>
     vi /root/check_nginx.sh<br/>
输入：<br/>
#!/bin/bash<br/>
A=`ps -C nginx --no-header |wc -l`<br/>
if [ $A -eq 0 ];then<br/>
     /usr/local/nginx/sbin/nginx<br/>
     sleep 3<br/>
     if [ `ps -C nginx --no-header |wc -l` -eq 0 ];then<br/>
     /etc/init.d/keepalived stop<br/>
     fi<br/>
fi<br/><br/>
（7）192.168.5.241<br/>
     cd /usr/local/keepalived<br/>
（8）192.168.5.241<br/>
     mv /etc/keepalived/keepalived.conf /etc/keepalived/keepalived.conf.org<br/>
（9）192.168.5.241<br/>
     vi /etc/keepalived/keepalived.conf<br/>
     输入：<br/>
global_defs {<br/>
   notification_email {<br/>
     acassen@firewall.loc<br/>
     failover@firewall.loc<br/>
     sysadmin@firewall.loc<br/>
   }<br/>
   notification_email_from Alexandre.Cassen@firewall.loc<br/>
#smtp_server 192.168.200.1<br/>
#smtp_connect_timeout 30<br/>
   router_id LVS_DEVEL<br/>
}<br/><br/>
vrrp_script check_nginx {<br/>
                script &quot;/root/check_nginx.sh&quot;<br/>
                interval 2<br/>
                weight 2<br/>
}<br/>
vrrp_instance VI_1 {<br/>
    state MASTER<br/>
    interface eth0<br/>
    virtual_router_id 51<br/>
    priority 100<br/>
    mcast_src_ip 192.168.5.241<br/>
    advert_int 1<br/>
    authentication {<br/>
        auth_type PASS<br/>
        auth_pass 1111<br/>
    }<br/>
    virtual_ipaddress {<br/>
        192.168.5.244/24<br/><br/>
}<br/>
track_script {<br/>
       check_nginx<br/>
       }<br/>
}<br/><br/>
（10）192.168.5.241<br/>
     vi /root/check_nginx.sh<br/>
输入：<br/>
#!/bin/bash<br/>
A=`ps -C nginx --no-header |wc -l`<br/>
if [ $A -eq 0 ];then<br/>
/usr/local/nginx/sbin/nginx<br/>
sleep 3<br/>
if [ `ps -C nginx --no-header |wc -l` -eq 0 ];then<br/>
/etc/init.d/keepalived stop<br/>
fi<br/>
fi<br/><br/>
注意：记得要对 check_nginx.sh 加执行权限<br/>
chmod +x check_nginx.sh<br/><br/>
查看脚本执行是否正常：<br/>
#sh -x check_nginx.sh<br/>
++ ps -C nginx --no-header<br/>
++ wc -l<br/>
+ A=0<br/>
+ '[' 0 -eq 0 ']'<br/>
+ /usr/local/nginx/sbin/nginx<br/>
+ sleep 3<br/>
++ ps -C nginx --no-header<br/>
++ wc -l<br/>
+ '[' 2 -eq 0 ']'<br/><br/>
（11）192.168.5.241<br/>
     service keepalived restart<br/>
（12）ip a      出现如下内容才是正确：<br/>
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 16436 qdisc noqueue state UNKNOWN<br/>
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00<br/>
    inet 127.0.0.1/8 scope host lo<br/>
    inet6 ::1/128 scope host<br/>
       valid_lft forever preferred_lft forever<br/>
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UNKNOWN qlen 1000<br/>
    link/ether 00:0c:29:dd:73:df brd ff:ff:ff:ff:ff:ff<br/>
    inet 192.168.5.241/24 brd 192.168.5.255 scope global eth0<br/>
    inet6 fe80::20c:29ff:fedd:73df/64 scope link<br/>
       valid_lft forever preferred_lft forever<br/>
通过window的cmd要能拼得通：192.168.5.244<br/><br/>
（13）注意点：<br/>
keeplived的 网卡记得要根据实际情况修改： interface eth0<br/>
如果IP漂移不了，估计是：virtual_router_id 51  那个“51”要修改为“60”<br/>
查看keeplived日志： tail -f /var/log/messages<br/>
重启网卡：service network restart<br/><br/><br/><br/><br/><br/>
关于iptable也是一样，如果开启的话，每台机器都会找不到对方而强制启动成master，这时候会访问到后启动的那台上，关于iptable相关的设置我也尝试了很久，可以用以下抓包监控：<br/><br/>
tcpdump -v -i eth0 host 224.0.0.18<br/>
tcpdump -vvv -n -i eth0 host 224.0.0.18<br/><br/>
看到这个网段内所有进行监听的机器，主要必须是双向的，有去有回才对。<br/><br/>
iptable以下规则可以搞定：<br/><br/>
# /sbin/iptables -I INPUT -i eth0 -d 224.0.0.0/8 -j ACCEPT<br/>
# /sbin/iptables -A INPUT -p 112 -i eth0 -j ACCEPT<br/>
# /sbin/iptables -A OUTPUT -p 112 -o eth0 -j ACCEPT<br/>
# /sbin/service iptables save<br/>
注意网卡eth0是内网还是外网。然后重启iptables，keepalived。<br/><br/>
再检查日志看master和backup是否正确进入各自的状态了。<br/><br/><br/></span></div></span>
</div>
<hr>
<a name="409"/>

<div>
<span><a name="1266"></a><h1>8.1：配置keepalived</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（1）上传keepalived<br/>
（2）tar zxvf keepalived-1.2.13.tar.gz<br/>
（3）cd keepalived-1.2.13<br/>
（4）./configure --prefix=/usr/local/keepalived<br/>
（5）make<br/>
（6）make install<br/>
（7）cp -r /usr/local/keepalived/etc/* /etc<br/>
（8）chkconfig --add keepalived<br/>
（9）chkconfig --level 345 keepalived on<br/>
（10）ln -s /usr/local/keepalived/sbin/keepalived /usr/sbin/keepalived<br/>
（11）service keepalived start<br/>
（12）注意：（8）-（11）将keepalived作为系统服务</span></div></span>
</div>
<hr>
<a name="410"/>

<div>
<span><a name="1270"></a><h1>9.1：安装PHP</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（1）安装libiconv</span><div><pre style="margin-top: 0px; margin-bottom: 10px; padding: 0px; font-family: arial, &apos;courier new&apos;, courier, 宋体, monospace; white-space: pre-wrap; word-wrap: break-word; color: rgb(51, 51, 51); font-size: 14px; line-height: 24px; widows: 1; background-color: rgb(241, 254, 221);"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">yum -y install gcc
</span></pre><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">  tar xvf libiconv-1.12.tar.gz<br/>
  cd libiconv-1.12<br/>
  ./configure<br/>
  make<br/>
  make install<br/><br/>
（2）安装libmcrypt（提供多种加密函数）php的组件</span></div><div><ol start="1" style="font-size: 12px; line-height: 1.4em; margin: 0px 0px 1px; padding: 2px 0px; border: 1px solid rgb(209, 215, 220); list-style-position: initial; list-style-image: initial; color: rgb(43, 145, 175); font-family: Monaco, &apos;DejaVu Sans Mono&apos;, &apos;Bitstream Vera Sans Mono&apos;, Consolas, &apos;Courier New&apos;, monospace; text-align: left; widows: 1; background-color: rgb(255, 255, 255);"><li style="font-size: 1em; margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; border-left-width: 1px; border-left-style: solid; border-left-color: rgb(209, 215, 220); line-height: 18px; background-color: rgb(250, 250, 250);"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="color: black;">yum install glibc-headers  </span></span></li><li style="font-size: 1em; margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; border-left-width: 1px; border-left-style: solid; border-left-color: rgb(209, 215, 220); line-height: 18px; background-color: rgb(250, 250, 250);"><span style="color: black;">  </span></li><li style="font-size: 1em; margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; border-left-width: 1px; border-left-style: solid; border-left-color: rgb(209, 215, 220); line-height: 18px; background-color: rgb(250, 250, 250);"><span style="color: black;">yum install gcc-c++   </span></li></ol>
tar zxvf libmcrypt-2.58.tar.gz<br/>
cd libmcrypt-2.5.8<br/>
./configure<br/>
make<br/>
make install<br/><br/>
如果出错，这这样安装：<br/>
wget http://www.51osos.com/uploads/soft/libmcrypt-2.5.8.tar.gz<br/><br/><br/>
（3）安装php<br/>
yum install openssl*</div><div>yum install -y mysql-devel* </div><div>yum -y install libevent libevent-devel<br/>
yum -y install libxml2 libxml2-devel<br/>
yum -y install curl-devel<br/>
yum -y install libpng-devel<br/>
yum install libjpeg-devel<br/>
yum install freetype-devel<br/>
yum -y install libtool-ltdl-devel<br/>
yum -y install libmcrypt libmcrypt-devel <br/><br/>
tar jxvf php-5.3.28.tar.bz2<br/>
cd php-5.3.28<br/><br/>
64位机子<br/>
ln -s /usr/lib64/mysql/libmysqlclient.so /usr/lib/libmysqlclient.so<br/><br/>
下面这几个有可能不是必须的<br/>
ln -s /usr/lib64/mysql/libmysqlclient.so.16 /usr/lib/libmysqlclient.so.16<br/>
ln -s /usr/lib64/mysql/libmysqlclient_r.so.16 /usr/lib/libmysqlclient_r.so.16<br/>
ln -s /usr/lib64/mysql/mysql_config /usr/lib/mysql_config
<div><p style="font-size: 13px; margin: 10px auto; color: rgb(75, 75, 75); font-family: georgia, verdana, Arial, helvetica, sans-seriff; line-height: 20.7999992370605px; widows: 1; background-color: rgb(255, 255, 255);">ln -s /usr/lib64/mysql/libmysqlclient.a /usr/lib/libmysqlclient.a </p><p style="font-size: 13px; margin: 10px auto; color: rgb(75, 75, 75); font-family: georgia, verdana, Arial, helvetica, sans-seriff; line-height: 20.7999992370605px; widows: 1; background-color: rgb(255, 255, 255);">ln -s /usr/lib64/mysql/libmysqlclient_r..a /usr/lib/libmysqlclient_r.a </p><br/>
查看连接是否正常<br/>
ll /usr/lib/libmysqlclient.so*</div><div><br/></div><div>32位 64位 —— 2014.09.22在北京九龙，九龙公司不部署员说32、64位都适用<br/>
 ./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc --with-mysql --with-mysqli  --with-freetype-dir --with-jpeg-dir --with-png-dir --with-zlib --with-libxml-dir=/usr --enable-xml --disable-rpath --enable-discard-path --enable-safe-mode --enable-ftp --enable-bcmath --enable-shmop --enable-sysvsem --enable-inline-optimization --with-curlwrappers --enable-mbregex --enable-fastcgi --enable-fpm --enable-force-cgi-redirect --enable-mbstring --with-mcrypt --with-gd --enable-gd-native-ttf --with-openssl --with-mhash --enable-pcntl --enable-sockets --with-iconv-dir=/usr/local --with-zlib --enable-zip --with-curl<br/><br/>
 make ZEND_EXTRA_LIBS='-liconv'<br/>
make install<br/><br/><br/><br/>
暂时不用<br/>
./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc --with-mysql --with-mysqli  --with-freetype-dir --with-jpeg-dir --with-png-dir --with-zlib --with-libxml-dir=/usr --enable-xml --disable-rpath --enable-discard-path --enable-safe-mode --enable-bcmath --enable-shmop --enable-sysvsem --enable-inline-optimization --with-curlwrappers --enable-mbregex --enable-fastcgi --enable-fpm --enable-force-cgi-redirect --enable-mbstring --with-mcrypt --with-gd --enable-gd-native-ttf --with-openssl --with-mhash --enable-pcntl --enable-sockets --with-iconv-dir=/usr/local--with-zlib-dir=usr–with-zip<br/>
make<br/>
make clean<br/>
make ZEND_EXTRA_LIBS='-liconv'<br/>
make install<br/><br/>
64位(可能暂时不用这个)：<br/>
CFLAGS=&quot;-O3 -fPIC&quot; ./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc --with-mysql-dir=/usr --with-mysqli  --with-freetype-dir --with-jpeg-dir --with-png-dir --with-zlib --with-libxml-dir=/usr --enable-xml --disable-rpath --enable-discard-path --enable-safe-mode --enable-bcmath --enable-shmop --enable-sysvsem --enable-inline-optimization --with-curlwrappers --enable-mbregex --enable-fastcgi --enable-fpm --enable-force-cgi-redirect --enable-mbstring --with-mcrypt --with-gd --enable-gd-native-ttf --with-openssl --with-mhash --enable-pcntl --enable-sockets --with-iconv-dir=/usr/local --with-zlib-dir=usr<br/>
若编译过程中报mysql相关错误,大多是因为php默认去/usr/lib/下去寻找mysql相关文件，而64为系统rpm方式安装的mysql相关文件在/usr/lib64/下。为相关文件创建软连接即可<br/>
ln -s /usr/lib64/mysql/libmysqlclient.so.16 /usr/lib/libmysqlclient.so.16<br/>
ln -s /usr/lib64/mysql/libmysqlclient_r.so.16 /usr/lib/libmysqlclient_r.so.16<br/>
ln -s /usr/lib64/mysql/mysql_config /usr/lib/mysql_config
<div><p style="margin: 10px auto; color: rgb(75, 75, 75); font-family: georgia, verdana, Arial, helvetica, sans-seriff; font-size: 13px; line-height: 20.7999992370605px; widows: 1; background-color: rgb(255, 255, 255);">ln -s /usr/lib64/mysql/libmysqlclient.a /usr/lib/libmysqlclient.a </p><p style="margin: 10px auto; color: rgb(75, 75, 75); font-family: georgia, verdana, Arial, helvetica, sans-seriff; font-size: 13px; line-height: 20.7999992370605px; widows: 1; background-color: rgb(255, 255, 255);">ln -s /usr/lib64/mysql/libmysqlclient_r..a /usr/lib/libmysqlclient_r.a </p>
编译完成后，执行make<br/>
make ZEND_EXTRA_LIBS='-liconv'<br/>
make install</div><div><br/>
启动PHP<br/>
cp php.ini-production /usr/local/php/etc/php.ini<br/>
cd /usr/local/php/etc<br/>
cp php-fpm.conf.default  php-fpm.conf<br/>
cd ..<br/>
./sbin/php-fpm</div><div><br/>
netstat -npl|grep :9000<br/>
ps -ef|grep php<br/>
cd /usr/local/nginx/conf<br/>
vi nginx.conf<br/>
修改nginx 配置文件，把php请求交给监听在9000端口的php-cgi来处理, 见文档.....<br/><br/>
/usr/local/nginx/sbin/nginx -s reload<br/>
cd ..<br/>
cd html/<br/>
cat index.html<br/>
（4）上传资源。。。<br/>
（5）建立数据库<br/>
mysql -uroot -proot<br/>
create database ruida1;<br/>
create database ruida2;<br/>
（6）导入数据库<br/>
mysql -uroot -proot ruida&lt;ruida.sql<br/>
mysql -uroot -proot ruida2&lt;ruida2.sql<br/>
（7）修改php程序连接的数据库<br/>
     vi data/config.php<br/>
（8）<br/>
select user.host from mysql.user;<br/>
select user,host from mysql.user;<br/>
+------+-----------+<br/>
| user | host      |<br/>
+------+-----------+<br/>
| root | %         |<br/>
| root | 127.0.0.1 |<br/>
| root | ::1       |<br/>
|      | bogon     |<br/>
| root | bogon     |<br/>
|      | localhost |<br/>
| root | localhost |<br/>
+------+-----------+<br/>
7 rows in set (0.00 sec)<br/>
grant all on *.* to root@'192.168.5.%' identified by 'root';<br/>
select user,host from mysql.user;<br/>
+------+-------------+<br/>
| user | host        |<br/>
+------+-------------+<br/>
| root | %           |<br/>
| root | 127.0.0.1   |<br/>
| root | 192.168.5.% |<br/>
| root | ::1         |<br/>
|      | bogon       |<br/>
| root | bogon       |<br/>
|      | localhost   |<br/>
| root | localhost   |<br/>
+------+-------------+<br/>
8 rows in set (0.00 sec)<br/><br/>
（9）<br/>
../sbin/nginx -s reload<br/>
（10）网页开不了，差错<br/>
tail -30 ../logs/error.log<br/>
tail -30 ../logs/access.log<br/>
（10）netstat |grep 3306<br/>
（11）netstat -npl|grep 3306<br/>
（12）PHP如果没开起来( netstat -npl|grep 9000 没任何东西)，则要开启<br/>
./sbin/php-fpm<br/>
（13）安装zip，这一步可以在比较前面实现<br/>
yum install zip<br/>
（14）如果安装php时编译时没有在最后面加上–with-zip，就要重新配置php<br/>
     a.     killall php-fpm<br/>
     b.     ps -ef|grep php<br/>
     c.     cd /usr/local<br/>
     d.     rm -rf php/<br/>
     e.     cd php<br/>
     f.     tar jxvf php-5.3.28.tar.bz2<br/>
     g.     cd php-5.3.28<br/>
     h.     ./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc --with-mysql --with-mysqli  --with-freetype-dir --with-jpeg-dir --with-png-dir --with-zlib --with-libxml-dir=/usr --enable-xml --disable-rpath --enable-discard-path --enable-safe-mode --enable-bcmath --enable-shmop --enable-sysvsem --enable-inline-optimization --with-curlwrappers --enable-mbregex --enable-fastcgi --enable-fpm --enable-force-cgi-redirect --enable-mbstring --with-mcrypt --with-gd --enable-gd-native-ttf --with-openssl --with-mhash --enable-pcntl --enable-sockets --with-iconv-dir=/usr/local--with-zlib-dir=usr–with-zip<br/>
     i.     make ZEND_EXTRA_LIBS='-liconv'<br/>
     j.     make install<br/>
     l.     进入：cd php-5.3.28<br/>
     m.     cp php.ini-production /usr/local/php/etc/php.ini<br/>
     n.     cd /usr/local/php/etc/<br/>
     o.     cp php-fpm.conf.default php-fpm.conf<br/>
         p.     ../sbin/php-fpm<br/>
    <br/>
     至此，PHP又重新配置了<br/>
（15）ll -d /usr/local/nginx/html<br/>
（16）此刻，网页可以访问，但会有提示语<br/>
（17）nginx是以nobody用户运行，而我们直接拷贝的网站目录/usr/local/nginx/html的目录属性为root，需要执行以下命令将其属组更改为<br/>
     chown nobody -R /usr/local/nginx/html/<br/>
（18）因为锐达项目有云盘功能涉及到上传文件，需注意修改php.ini里几处设置（关于php解析超时时间以及上传文件大小限制）：<br/>
     vi /usr/local/php/etc/php.ini<br/>
     修改以下配置指：<br/>
     upload_max_filesize = 1024M<br/>
     post_max_size = 1024M<br/>
     memory_limit = 256M<br/>
     max_execution_time=30<br/>
     file_uploads = On<br/><br/>
     kill all php-fpm<br/>
     ps -ef|grep php<br/>
     /usr/local/php/sbin/php-fpm<br/>
（19）vi /usr/local/nginx/conf/nginx.conf   增加一行： client_max_body_size 1024m 位置如下：<br/>
     #gzip  on;<br/>
    <br/>
        client_max_body_size 1024m;<br/>
   <br/>
        server {<br/></div></div></div><div><br/></div><div><p style="color: rgb(51, 51, 51); font-family: &apos;Comic Sans MS&apos;, &apos;Microsoft YaHei&apos;, Verdana, Arial, Helvetica, sans-serif; font-size: 14px; widows: 1;">然后再次wget http://127.0.0.1/phpinfo.php 进行测试，如果没有内容或无法正常下载，这时问题可能就是出在了：</p><div style="margin: 12px 0px; padding: 0px; text-align: left; box-sizing: border-box; overflow: hidden !important; position: relative !important; direction: ltr !important; width: 880px; font-family: Monaco, MonacoRegular, &apos;Courier New&apos;, monospace; border: 1px !important; text-shadow: none !important; color: rgb(51, 51, 51); widows: 1; font-size: 12px !important; line-height: 15px !important; height: auto;"><div style="margin: 0px; padding: 0px; border: 0px; width: 880px; overflow: hidden; position: relative; z-index: 1; background-position: 0px 50%; background-repeat: initial initial;"><table style="border: none !important; padding: 0px !important; margin: 0px !important; width: auto !important; border-spacing: 0px !important; border-collapse: collapse !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><tbody><tr style="padding: 0px !important; border: none !important; vertical-align: top !important; margin: 0px !important; background-position: 0px 50%; background-repeat: initial initial;"><td style="vertical-align: top !important; border-bottom-width: 0px; padding: 0px 5px 0px 0px !important; margin: 0px !important; border-right-style: solid !important; border-top-width: 0px; border-right-width: 3px !important; border-left-width: 0px; border-right-color: rgb(108, 226, 108) !important; color: rgb(175, 175, 175) !important; background-position: 0px 50%; background-repeat: initial initial;"><div style="margin: 0px; padding: 0px; border: 0px; white-space: nowrap; background-position: 0px 50%; background-repeat: initial initial;"><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">1</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">2</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">3</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">4</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">5</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">6</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">7</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">8</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">9</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">10</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">11</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">12</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">13</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">14</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">15</div></div></td><td style="vertical-align: top !important; border: 0px; padding: 0px !important; margin: 0px !important; width: 847px; background-position: 0px 50%; background-repeat: initial initial;"><div style="margin: 0px; padding: 0px; border: none !important; color: rgb(0, 0, 0); white-space: pre; overflow: visible; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">[</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">root</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">@</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">dbweb102</span> <span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">~</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">]</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span> <span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">cat</span> <span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">/</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">usr</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">/</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">local</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">/</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">nginx</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">/</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">conf</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">/</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_params</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-color: rgb(249, 249, 249) !important; background-position: initial initial !important; background-repeat: initial initial !important;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">QUERY</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>STRING<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">      </span> <span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">query_string</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">REQUEST</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>METHOD<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">    </span> <span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">request_method</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-color: rgb(249, 249, 249) !important; background-position: initial initial !important; background-repeat: initial initial !important;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">CONTENT</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>TYPE<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">      </span> <span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">content_type</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">CONTENT</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>LENGTH<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">    </span> <span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">content_length</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-color: rgb(249, 249, 249) !important; background-position: initial initial !important; background-repeat: initial initial !important;"> </div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(184, 92, 0) !important;">############# 添加下面这一行 ############</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-color: rgb(249, 249, 249) !important; background-position: initial initial !important; background-repeat: initial initial !important;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">SCRIPT</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>FILENAME<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">    </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">document_root</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">fastcgi_script_name</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(184, 92, 0) !important;">############# 添加上面这一行 ############</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-color: rgb(249, 249, 249) !important; background-position: initial initial !important; background-repeat: initial initial !important;"> </div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">SCRIPT</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>NAME<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">        </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">fastcgi_script_name</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-color: rgb(249, 249, 249) !important; background-position: initial initial !important; background-repeat: initial initial !important;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">REQUEST</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>URI<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">        </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">request_uri</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">DOCUMENT</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>URI<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">      </span> <span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">document_uri</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-color: rgb(249, 249, 249) !important; background-position: initial initial !important; background-repeat: initial initial !important;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">DOCUMENT</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>ROOT<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">      </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">document_root</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">SERVER</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>PROTOCOL<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">    </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">server_protocol</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div></div></td></tr></tbody></table></div></div><p style="color: rgb(51, 51, 51); font-family: &apos;Comic Sans MS&apos;, &apos;Microsoft YaHei&apos;, Verdana, Arial, Helvetica, sans-serif; font-size: 14px; widows: 1;"></p><p style="color: rgb(51, 51, 51); font-family: &apos;Comic Sans MS&apos;, &apos;Microsoft YaHei&apos;, Verdana, Arial, Helvetica, sans-serif; font-size: 14px; widows: 1;">不用wget，直接在浏览器中访问http://127.0.0.1/phpinfo.php如果看到不报报错的空白页面，</p></div></div></span>
</div>
<hr>
<a name="413"/>

<div>
<span><a name="1262"></a><h1>6-PC-Service 分布式文件系统</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">Glusterfs 分布式文件系统配置笔记<br/><br/>
端口号： ps -aux | grep glusterfs<br/>
49152<br/><br/>
六台机子信息：<br/>
Nginx：192.168.5.205<br/>
Nginx：192.168.5.206<br/>
Tomcat1：192.168.5.201<br/>
Tomcat2：192.168.5.202<br/><br/>
服务端的目录信息：<br/>
tomcat1： /boot/glusterfs<br/>
tomcat2： /home/glusterfs<br/><br/>
服务端：<br/>
Tomcat1为：192.168.5.201<br/>
Tomcat2为：192.168.5.202<br/><br/>
客户端：<br/>
nginx1 为：192.168.5.205<br/>
nginx2 为：192.168.5.206<br/><br/>
（1）在两台服务端都执行：<br/>
vi /etc/yum.repos.d/glusterfs-epel.repo<br/><br/>
输入：<br/>
[glusterfs-epel]<br/>
name=GlusterFS is a clustered file-system capable of scaling to several petabytes.<br/>
baseurl=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-$releasever/$basearch/<br/>
enabled=1<br/>
skip_if_unavailable=1<br/>
gpgcheck=1<br/>
gpgkey=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/pub.key<br/>
[glusterfs-noarch-epel]<br/>
name=GlusterFS is a clustered file-system capable of scaling to several petabytes.<br/>
baseurl=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-$releasever/noarch<br/>
enabled=1<br/>
skip_if_unavailable=1<br/>
gpgcheck=1<br/>
gpgkey=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/pub.key<br/>
[glusterfs-source-epel]<br/>
name=GlusterFS is a clustered file-system capable of scaling to several petabytes. - Source<br/>
baseurl=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-$releasever/SRPMS<br/>
enabled=0<br/>
skip_if_unavailable=1<br/>
gpgcheck=1<br/>
gpgkey=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/pub.key<br/><br/>
（2）在两台服务器上都执行：<br/>
yum install glusterfs glusterfs-server<br/><br/>
（3）在两台服务器上都执行，启动服务：<br/>
service glusterd start<br/><br/>
（4）将用于存储的主机加入到“存储池”，这边只要在两台服务器任选一台执行，这边就选择Tomcat1：192.168.5.201，执行如下：<br/>
gluster peer probe 192.168.5.202<br/><br/>
（5）存储池内的信息（任一台），这边选择Tomcat1：192.168.5.201<br/>
gluster peer status<br/>
结果例如：<br/>
Number of Peers: 1<br/><br/>
Hostname: 192.168.5.202<br/>
Uuid: b40caadc-3afb-433b-a769-62f52d0a8b92<br/>
State: Peer in Cluster (Connected)<br/><br/>
（6）df -h 并挂接分区 ---------  Del -----<br/>
mount -t ntfs-3g /dev/sda2 /data/ftp-data<br/>
查挂接结果<br/>
mount <br/>
这里分区已经映射到：/home<br/>
df -h /home<br/>
/dev/sda2              25G  172M   24G   1% /home<br/>
mount -t auto /dev/sda2 /home<br/><br/>
（7）Create volume（创建卷）<br/>
Glusterfs的卷有多种可选模式，我们采用其中的两种Distributed和Replicated，其中Distributed类似于磁盘的RAID 0模式；Replicated类似于磁盘的RAID1模式（glusterfs中可以制定副本的数量，这里我们存储两个副本即可）。我们利用此两种模式在两台台server间做成类似于RAID 10的模式，提供高性能和高可用的存储服务。<br/>
在任意一台server执行：<br/>
gluster volume create ftp-volume replica 2 192.168.5.201:/boot/glusterfs 192.168.5.202:/home/glusterfs<br/><br/>
gluster volume create ftp-volume replica 2 192.168.5.211:/data/ftp-data 192.168.5.169:/home 192.168.5.209:/home 192.168.5.210:/home force   ?????<br/><br/>
##上述命令中：dir为每台服务器上要加入存储池的目录（此目录最好做一个单独分区挂载至此目录）。按照上述命令server2：/dir作为server1:/dir的副本；server4:/dir作为server3:/dir的副本<br/><br/>
（8）gluster volume start ftp-volume<br/>
（9）gluster volume status<br/>
（10）在nginx主：192.168.5.166<br/>
（11）nginx主、备<br/>
yum install glusterfs glusterfs-client<br/><br/>
（12）选择服务器任意一台这边选择tomcat1：192.168.5.201<br/>
mount -t glusterfs 192.168.5.201:/ftp-volume /usr/local/nginx/html/ruida<br/><br/>
（13）在/etc/rc.local添加如下内容，以便实现开机自动挂载<br/>
mount -t glusterfs 192.168.5.201:/ftp-volume /glusterfs/  2&gt;/var/log/gluster-client.err</span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><font color="#FF0000" face="宋体" size="1"><span style="font-size:9pt"><b>mount</b></span></font> <font color="#010101" face="宋体" size="1"><span style="font-size:9pt">-t glusterfs 192.168.5.209:/resources /glusterfsConsume/</span></font></span></div><br/>
（14）df -h<br/>
（15）在客户端建立目录或者文件，服务端会自己同步过来<br/><br/><br/><br/><br/></div></div></span>
</div>
<hr>
<a name="415"/>

<div>
<span><a name="1260"></a><h1>6.1：配置Zookeeper</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（1）上传zookeeper       注意是160多M那个才是<br/>
（2）tar zxvf zookeeper-3.4.5.tar.gz   --- 省掉<br/>
（3）cd zookeeper-3.4.5<br/>
（4）cd ..<br/>
（5）mv zookeeper-3.4.5 /usr/local<br/>
（6）cd /usr/local<br/>
（7）ls<br/>
（8）cd zookeeper-3.4.5/<br/>
（9）ls<br/>
（10）ls conf/<br/>
（11） ls bin/<br/>
（12）chmod 777 ../bin/*<br/>
（13）./usr/local/zookeeper-3.4.5/bin/zkServer.sh<br/>
（14）/usr/local/zookeeper-3.4.5/bin/zkServer.sh start<br/>
（15）ps -ef|grep zoo<br/><br/><br/><br/><br/>
一、安装需求<br/>
安装java 1.6及hadoop 0.20.x<br/><br/>
二、安装zookeeper<br/>
1、下载zookeeper<br/>
wget http://mirror.bit.edu.cn/apache//zookeeper/zookeeper-3.4.3/zookeeper-3.4.3.tar.gz（本次安装3.4.3版本）<br/>
其他版本下载地址（最好使用stable版本）：http://zookeeper.apache.org/releases.html<br/><br/>
2、解压<br/>
tar -xf zookeeper-3.4.3.tar.gz<br/>
将解压后的zookeeper-3.4.3文件放在系统的/home/hadooptest/中。<br/><br/>
3、将zookeeper-3.4.3/conf目录下的zoo_sample.cfg文件拷贝一份，命名为为“zoo.cfg”<br/><br/>
4、修改zoo.cfg配置文件<br/>
修改zoo.cfg内容为：<br/>
# The number of milliseconds of each tick<br/>
tickTime=2000<br/>
# The number of ticks that the initial <br/>
# synchronization phase can take<br/>
initLimit=10<br/>
# The number of ticks that can pass between <br/>
# sending a request and getting an acknowledgement<br/>
syncLimit=5<br/>
# the directory where the snapshot is stored.</span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"># do not use /tmp for storage, /tmp here is just <br/>
# example sakes.<br/>
dataDir=/home/hadooptest/zookeeper-3.4.3/zookeeperdir/zookeeper-data   </span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">dataLogDir=/home/hadooptest/zookeeper-3.4.3/zookeeperdir/logs<br/><br/>
# the port at which the clients will connect<br/>
clientPort=2181<br/>
#<br/>
# Be sure to read the maintenance section of the <br/>
# administrator guide before turning on autopurge.<br/>
#<br/>
# http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance<br/>
#<br/>
# The number of snapshots to retain in dataDir<br/>
#autopurge.snapRetainCount=3<br/>
# Purge task interval in hours<br/>
# Set to &quot;0&quot; to disable auto purge feature<br/>
#autopurge.purgeInterval=1<br/><br/>
# 2888,3888 are election port<br/>
server.1=zookeeper:2888:3888<br/><br/>
dataDir=/home/hadooptest/zookeeper-3.4.3/zookeeperdir/zookeeper-data   (在zookeeperdir创建zookeeper-data)</span></div><div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">dataLogDir=/home/hadooptest/zookeeper-3.4.3/zookeeperdir/logs  (在zookeeperdir创建logs  )</span></div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
 其中，2888端口号是zookeeper服务之间通信的端口，而3888是zookeeper与其他应用程序通信的端口。而zookeeper是在hosts中已映射了本机的ip。<br/>
initLimit：这个配置项是用来配置 Zookeeper 接受客户端（这里所说的客户端不是用户连接 Zookeeper服务器的客户端，而是 Zookeeper 服务器集群中连接到 Leader 的 Follower 服务器）初始化连接时最长能忍受多少个心跳时间间隔数。当已经超过 10 个心跳的时间（也就是 tickTime）长度后 Zookeeper 服务器还没有收到客户端的返回信息，那么表明这个客户端连接失败。总的时间长度就是 5*2000=10 秒。<br/>
syncLimit：这个配置项标识 Leader 与 Follower 之间发送消息，请求和应答时间长度，最长不能超过多少个 tickTime 的时间长度，总的时间长度就是 2*2000=4 秒。<br/>
server.A=B：C：D：其中 A 是一个数字，表示这个是第几号服务器；B 是这个服务器的 ip 地址；C 表示的是这个服务器与集群中的 Leader 服务器交换信息的端口；D 表示的是万一集群中的 Leader 服务器挂了，需要一个端口来重新进行选举，选出一个新的 Leader，而这个端口就是用来执行选举时服务器相互通信的端口。如果是伪集群的配置方式，由于 B 都是一样，所以不同的 Zookeeper 实例通信端口号不能一样，所以要给它们分配不同的端口号。<br/><br/>
5、创建dataDir参数指定的目录(这里指的是“ /home/hadooptest/zookeeper-3.4.3/zookeeperdir/zookeeper-data”)，并在目录下创建文件，命名为“myid”。<br/><br/>
6、编辑“myid”文件，并在对应的IP的机器上输入对应的编号。如在zookeeper上，“myid”文件内容就是1。由于本次只在单点上进行安装配置，所以只有一个server.1。若还有其他服务器，比如地址为192.168.1.102，则在zoo.cfg文件中还需加入server.2=192.168.1.102:2888:3888。那么myid文件在192.168.1.102服务器上的内容就是2。<br/>
至此，如果是多服务器配置，就需要将zookeeper-3.4.3目录拷贝到其他服务器，然后按照上述的方法修改myid。<br/><br/>
7、在/etc/profile文件中设置PATH<br/>
修改profile文件：<br/>
sudo vi /etc/profile<br/><br/>
export ZOOKEEPER_HOME=/usr/local/zookeeper-3.4.3<br/>
PATH=$ZOOKEEPER_HOME/bin:$PATH<br/>
export PATH<br/><br/><br/></span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">7.1  source /etc/profile</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">8、安装完毕<br/><br/>
三、启动并测试zookeeper<br/>
1、在所有服务器中执行：zookeeper-3.4.3/bin/zkServer.sh start<br/><br/>
2、输入jps命令查看进程：<br/>
namenode上显示为（本次为单机配置）：<br/>
7724 DataNode<br/>
19769 HMaster<br/>
7485 NameNode<br/>
8064 JobTracker<br/>
19361 QuorumPeerMain<br/>
8323 TaskTracker<br/>
7972 SecondaryNameNode<br/>
21691 Jps<br/>
19988 HRegionServer<br/><br/>
其中，QuorumPeerMain是zookeeper进程，启动正常。（HMaster和HRegionServer为已启动的hbase进程，其他为安装hadoop后启动的进程）<br/><br/>
3、查看状态：zookeeper-3.4.3/bin/zkServer.sh status<br/>
JMX enabled by default<br/>
Using config: /home/hadooptest/zookeeper-3.4.3/bin/../conf/zoo.cfg<br/>
Mode: standalone<br/><br/>
4、启动客户端脚本：zookeeper-3.4.3/bin/zkCli.sh -server zookeeper:2181<br/>
WatchedEvent state:SyncConnected type:None path:null<br/>
[zk: zookeeper:2181(CONNECTED) 0] <br/>
[zk: zookeeper:2181(CONNECTED) 0] help<br/>
ZooKeeper -server host:port cmd args<br/>
        connect host:port<br/>
        get path [watch]<br/>
        ls path [watch]<br/>
        set path data [version]<br/>
        rmr path<br/>
        delquota [-n|-b] path<br/>
        quit <br/>
        printwatches on|off<br/>
        create [-s] [-e] path data acl<br/>
        stat path [watch]<br/>
        close <br/>
        ls2 path [watch]<br/>
        history <br/>
        listquota path<br/>
        setAcl path acl<br/>
        getAcl path<br/>
        sync path<br/>
        redo cmdno<br/>
        addauth scheme auth<br/>
        delete path [version]<br/>
        setquota -n|-b val path<br/>
[zk: zookeeper:2181(CONNECTED) 1] ls /<br/>
[hbase, zookeeper]<br/>
[zk: zookeeper:2181(CONNECTED) 2] <br/><br/>
5、停止zookeeper进程：zookeeper-3.4.3/bin/zkServer.sh stop</span></div></div></div></div></span>
</div>
<hr>
<a name="419"/>

<div>
<span><a name="1264"></a><h1>7.1：配置Redis</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（1）yum install tcl* libstdc++*       yum install gcc <br/>
（2）上传redis-2.8.8.tar.gz<br/>
（3）解压redis:<br/>
        tar zxvf redis-2.8.8.tar.gz<br/>
（4）cd redis-2.8.8<br/>
（5）make  /  <span style="font-family: 微软雅黑, Verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 28px; background-color: rgb(247, 250, 253);">make MALLOC=libc</span><br/>
（6）cd ..    <br/>
（7）cd /usr/local<br/>
（8）cd redis-2.8.8/<br/>
（9）ls src/<br/>
（10）cd src/<br/>
（11）./redis-server  或者： /usr/local/redis-2.8.8/src/redis-server &amp;   ---在后台启动<br/>
（12）Ctrl + z<br/>
（13） ps -ef|grep redis<br/>
（14）开机启动：<br/>
vi /etc/rc.local<br/>
加入：<br/>
/usr/local/redis-2.8.8/src/redis-server &amp;<br/>
（15）cd /usr/local/src</span></div></span>
</div>
<hr>
<a name="421"/>

<div>
<span><a name="1258"></a><h1>5.2：vsftp</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">A： 安装FTP工具<br/>
（1） yum install vsftpd*<br/>
（2） vi /etc/sysconfig/selinux  对配置文件修改为（SELINUX=i）：<br/><br/>
     # This file controls the state of SELinux on the system.<br/>
     # SELINUX= can take one of these three values:<br/>
     #     enforcing - SELinux security policy is enforced.<br/>
     #     permissive - SELinux prints warnings instead of enforcing.<br/>
     #     disabled - No SELinux policy is loaded.<br/>
     SELINUX=permissive<br/>
     # SELINUXTYPE= can take one of these two values:<br/>
     #     targeted - Targeted processes are protected,<br/>
     #     mls - Multi Level Security protection.<br/>
     SELINUXTYPE=targeted<br/><br/>
（3） setenforce 0<br/>
（4）vi /etc/vsftpd/user_list<br/>
bin<br/>
daemon<br/>
adm<br/>
lp<br/>
sync<br/>
shutdown<br/>
halt<br/>
mail<br/>
news<br/>
uucp<br/>
operator<br/>
games<br/>
nobody<br/>
（5）vi /etc/vsftpd/ftpusers<br/>
bin<br/>
daemon<br/>
adm<br/>
lp<br/>
sync<br/>
shutdown<br/>
halt<br/>
mail<br/>
news<br/>
uucp<br/>
operator<br/>
games<br/>
nobody<br/>
（5） service vsftpd start<br/><br/><br/>
（6）用FlashFXP进行FTP连接试试看，如果能正常连接说明配置成功（前提条件要有这个账号）<br/>
192.168.5.241<br/>
root<br/>
root123<br/><br/>
/sbin/service vsftpd stop<br/><br/>
B： 启动、停止、查寻Ftp服务<br/>
     service vsftpd start<br/>
     service vsftpd stop<br/>
      service vsftpd status<br/><br/>
C：增加FTP账号<br/>
ftpUser=ruida<br/>
ftpPassword=ruida&amp;ftp<br/>
  C-1：输入，意思是将要产生的ruida映射到磁盘目录glusterfs<br/>
     useradd ruida -d /glusterfs/<br/>
  C-2：设置密码（过程会提示要输入两次密码）：<br/>
            passwd ruida<br/><br/><br/>
如果报如下错误（可以不予理会，也可以按下面方式处理试试看）：<br/>
useradd: warning: the home directory already exists.<br/>
Not copying any file from skel directory into it.<br/>
Creating mailbox file: File exists<br/><br/>
则处理方式如下：<br/>
cp /etc/skel/.bash_profile /glusterfs/<br/>
cp /etc/skel/.bashrc /glusterfs/<br/>
cp /etc/skel/.bash_logout /glusterfs/<br/><br/><br/>
D：记得修改映射目录的权限，否则文件无法上传<br/>
  chmod 777 glusterfs<br/>
  chmod 777 glusterfs/*<br/><br/><br/>
卸载：yum remove vsftpd<br/><br/><br/>
（IQclass端的上传下载）<br/><br/><br/>
最后 /etc/vsftpd/vsftpd.conf<br/>
pasv_enable=YES<br/>
pasv_min_port=3000<br/>
pasv_max_port=3004<br/><br/>
chroot_local_user=YES   这个要打开<br/><br/><br/><br/>
如下配置：<br/>
# Example config file /etc/vsftpd/vsftpd.conf<br/>
#<br/>
# The default compiled in settings are fairly paranoid. This sample file<br/>
# loosens things up a bit, to make the ftp daemon more usable.<br/>
# Please see vsftpd.conf.5 for all compiled in defaults.<br/>
#<br/>
# READ THIS: This example file is NOT an exhaustive list of vsftpd options.<br/>
# Please read the vsftpd.conf.5 manual page to get a full idea of vsftpd's<br/>
# capabilities.<br/>
#<br/>
# Allow anonymous FTP? (Beware - allowed by default if you comment this out).<br/>
anonymous_enable=No<br/>
#<br/>
# Uncomment this to allow local users to log in.<br/>
local_enable=YES<br/>
#<br/>
# Uncomment this to enable any form of FTP write command.<br/>
write_enable=YES<br/>
#<br/>
# Default umask for local users is 077. You may wish to change this to 022,<br/>
# if your users expect that (022 is used by most other ftpd's)<br/>
local_umask=022<br/>
#<br/>
# Uncomment this to allow the anonymous FTP user to upload files. This only<br/>
# has an effect if the above global write enable is activated. Also, you will<br/>
# obviously need to create a directory writable by the FTP user.<br/>
#anon_upload_enable=YES<br/>
#<br/>
# Uncomment this if you want the anonymous FTP user to be able to create<br/>
# new directories.<br/>
#anon_mkdir_write_enable=YES<br/>
#<br/>
# Activate directory messages - messages given to remote users when they<br/>
# go into a certain directory.<br/>
dirmessage_enable=YES<br/>
#<br/>
# The target log file can be vsftpd_log_file or xferlog_file.<br/>
# This depends on setting xferlog_std_format parameter<br/>
xferlog_enable=YES<br/>
#<br/>
# Make sure PORT transfer connections originate from port 20 (ftp-data).<br/>
connect_from_port_20=YES<br/>
#<br/>
# If you want, you can arrange for uploaded anonymous files to be owned by<br/>
# a different user. Note! Using &quot;root&quot; for uploaded files is not<br/>
# recommended!<br/>
#chown_uploads=YES<br/>
#chown_username=whoever<br/>
#<br/>
# The name of log file when xferlog_enable=YES and xferlog_std_format=YES<br/>
# WARNING - changing this filename affects /etc/logrotate.d/vsftpd.log<br/>
#xferlog_file=/var/log/xferlog<br/>
#<br/>
# Switches between logging into vsftpd_log_file and xferlog_file files.<br/>
# NO writes to vsftpd_log_file, YES to xferlog_file<br/>
xferlog_std_format=YES<br/>
#<br/>
# You may change the default value for timing out an idle session.<br/>
#idle_session_timeout=600<br/>
#<br/>
# You may change the default value for timing out a data connection.<br/>
#data_connection_timeout=120<br/>
#<br/>
# It is recommended that you define on your system a unique user which the<br/>
# ftp server can use as a totally isolated and unprivileged user.<br/>
#nopriv_user=ftpsecure<br/>
#<br/>
# Enable this and the server will recognise asynchronous ABOR requests. Not<br/>
# recommended for security (the code is non-trivial). Not enabling it,<br/>
# however, may confuse older FTP clients.<br/>
#async_abor_enable=YES<br/>
#<br/>
# By default the server will pretend to allow ASCII mode but in fact ignore<br/>
# the request. Turn on the below options to have the server actually do ASCII<br/>
# mangling on files when in ASCII mode.<br/>
# Beware that on some FTP servers, ASCII support allows a denial of service<br/>
# attack (DoS) via the command &quot;SIZE /big/file&quot; in ASCII mode. vsftpd<br/>
# predicted this attack and has always been safe, reporting the size of the<br/>
# raw file.<br/>
# ASCII mangling is a horrible feature of the protocol.<br/>
#ascii_upload_enable=YES<br/>
#ascii_download_enable=YES<br/>
#<br/>
# You may fully customise the login banner string:<br/>
#ftpd_banner=Welcome to blah FTP service.<br/>
#<br/>
# You may specify a file of disallowed anonymous e-mail addresses. Apparently<br/>
# useful for combatting certain DoS attacks.<br/>
#deny_email_enable=YES<br/>
# (default follows)<br/>
#banned_email_file=/etc/vsftpd/banned_emails<br/>
#<br/>
# You may specify an explicit list of local users to chroot() to their home<br/>
# directory. If chroot_local_user is YES, then this list becomes a list of<br/>
# users to NOT chroot().<br/>
chroot_local_user=YES<br/>
#chroot_list_enable=YES<br/>
# (default follows)<br/>
#chroot_list_file=/etc/vsftpd/chroot_list<br/>
#<br/>
# You may activate the &quot;-R&quot; option to the builtin ls. This is disabled by<br/>
# default to avoid remote users being able to cause excessive I/O on large<br/>
# sites. However, some broken FTP clients such as &quot;ncftp&quot; and &quot;mirror&quot; assume<br/>
# the presence of the &quot;-R&quot; option, so there is a strong case for enabling it.<br/>
#ls_recurse_enable=YES<br/>
#<br/>
# When &quot;listen&quot; directive is enabled, vsftpd runs in standalone mode and<br/>
# listens on IPv4 sockets. This directive cannot be used in conjunction<br/>
# with the listen_ipv6 directive.<br/>
listen=YES<br/>
#<br/>
# This directive enables listening on IPv6 sockets. To listen on IPv4 and IPv6<br/>
# sockets, you must run two copies of vsftpd with two configuration files.<br/>
# Make sure, that one of the listen options is commented !!<br/>
#listen_ipv6=YES<br/><br/>
pasv_enable=YES<br/>
pasv_min_port=3000<br/>
pasv_max_port=3004<br/><br/>
pam_service_name=vsftpd<br/>
userlist_deny=NO<br/>
#userlist_enable=YES<br/>
tcp_wrappers=YES<br/><br/><br/>
查看SELinux状态：<br/>
1、/usr/sbin/sestatus -v      ##如果SELinux status参数为enabled即为开启状态<br/>
SELinux status:                 enabled<br/>
2、getenforce                 ##也可以用这个命令检查<br/>
关闭SELinux：<br/>
1、临时关闭（不用重启机器）：<br/>
setenforce 0                  ##设置SELinux 成为permissive模式<br/>
                              ##setenforce 1 设置SELinux 成为enforcing模式<br/>
2、修改配置文件需要重启机器：<br/>
修改/etc/selinux/config 文件<br/>
将SELINUX=enforcing改为SELINUX=disabled<br/>
重启机器即可<br/><br/><br/></span></div></span>
</div>
<hr>
<a name="423"/>

<div>
<span><a name="1256"></a><h1>5.1：配置FTP</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（1） yum install vsftpd*<br/>
（2） vi /etc/sysconfig/selinux  对配置文件修改为（SELINUX=permissive）：<br/><br/>
     # This file controls the state of SELinux on the system.<br/>
     # SELINUX= can take one of these three values:<br/>
     #     enforcing - SELinux security policy is enforced.<br/>
     #     permissive - SELinux prints warnings instead of enforcing.<br/>
     #     disabled - No SELinux policy is loaded.<br/>
     SELINUX=permissive<br/>
     # SELINUXTYPE= can take one of these two values:<br/>
     #     targeted - Targeted processes are protected,<br/>
     #     mls - Multi Level Security protection.<br/>
     SELINUXTYPE=targeted<br/><br/>
（3） setenforce 0<br/>
（4）vi /etc/vsftpd/user_list<br/>
bin<br/>
daemon<br/>
adm<br/>
lp<br/>
sync<br/>
shutdown<br/>
halt<br/>
mail<br/>
news<br/>
uucp<br/>
operator<br/>
games<br/>
nobody<br/>
（5）vi /etc/vsftpd/ftpusers<br/>
bin<br/>
daemon<br/>
adm<br/>
lp<br/>
sync<br/>
shutdown<br/>
halt<br/>
mail<br/>
news<br/>
uucp<br/>
operator<br/>
games<br/>
nobody<br/>
（5） service vsftpd start<br/>
（6）用FlashFXP进行FTP连接试试看，如果能正常连接说明配置成功<br/>
192.168.5.241<br/>
root<br/>
root123<br/><br/><br/>
/sbin/service vsftpd stop<br/><br/><br/>
C：增加FTP账号<br/>
ftpUser=ruida<br/>
ftpPassword=ruida&amp;ftp<br/>
  C-1：输入，意思是将要产生的ruida映射到磁盘目录glusterfs<br/>
     useradd ruida -d /usr/local/nginx/html/glusterfs/</span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">成功提示：<br/></span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">useradd: warning: the home directory already exists.<br/>
Not copying any file from skel directory into it.<br/>
  C-2：设置密码（过程会提示要输入两次密码）：<br/>
            passwd ruida<br/><br/>
service vsftpd start<br/>
service vsftpd stop<br/>
service vsftpd status<br/><br/><br/>
cp /etc/skel/.bash_profile /boot/glusterfs/<br/>
cp /etc/skel/.bashrc /boot/glusterfs/<br/>
cp /etc/skel/.bash_logout /boot/glusterfs/<br/><br/>
D：记得修改映射目录的权限，否则文件无法上传<br/>
  chmod 777 glusterfs<br/>
  chmod 777 glusterfs/*<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
查看SELinux状态：<br/>
1、/usr/sbin/sestatus -v      ##如果SELinux status参数为enabled即为开启状态<br/>
SELinux status:                 enabled<br/>
2、getenforce                 ##也可以用这个命令检查<br/>
关闭SELinux：<br/>
1、临时关闭（不用重启机器）：<br/>
setenforce 0                  ##设置SELinux 成为permissive模式<br/>
                              ##setenforce 1 设置SELinux 成为enforcing模式<br/>
2、修改配置文件需要重启机器：</span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
修改/etc/selinux/config 文件<br/>
将SELINUX=enforcing改为SELINUX=disabled<br/>
重启机器即可</span></div></div></div></div></span>
</div>
<hr>
<a name="424"/>

<div>
<span><a name="1250"></a><h1>2.1：安装Nginx</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
安装部署之前，先通过yum方式安装常见的依赖包<br/>
yum install gcc* zlib cmake libxml2 libxml2-devel bzip2 bzip2-devel curl curl-devel libjpeg libjpeg-devel libpng libpng-devel freetype-devel pspell-devel libmcrypt libmcrypt-devel freetypepcre-devel*<br/><br/>
（1）安装pcre（perl兼容的正则表达式）<br/>
yum -y install pcre*<br/><br/>
（2）过程如果出现: wget command not found, 则安装：<br/>
yum -y install wget<br/><br/>
（3）在cmd命令行里，通过pscp从window拷贝nginx到CentOS<br/>
pscp -r -l root -pw root123 F:\CentOSTest\nginx 192.168.5.241:/usr/local/src<br/><br/>
（4）解压<br/>
tar zxvf nginx-1.2.3.tar.gz</span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">mv nginx-* /usr/local/src/ </span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
（5）编译<br/>
./configure --with-http_stub_status_module --prefix=/usr/local/nginx<br/><br/><br/>
（6）安装<br/>
make<br/>
make install<br/><br/></span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">echo $?  返回0成功，返回1失败</span></div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
（7）启动nginx服务：<br/>
/usr/local/nginx/sbin/nginx<br/><br/>
（8）查看nginx进程情况<br/>
ps -ef|grep nginx<br/><br/>
防火墙要关<br/><br/>
（9）在浏览器输入： 192.168.5.247 如果出现欢迎界面，说明nginx安装成功</span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（10）nginx(主)   nginx.conf</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
#user  nobody;<br/>
worker_processes  1;     <span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">#nginx进程数，建议设置为等于CPU总核心数。</span><br/><br/>
#error_log  logs/error.log;             <span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">#全局错误日志定义类型，[ debug | info | notice | warn | error | crit ]</span><br/>
#error_log  logs/error.log  notice;<br/>
#error_log  logs/error.log  info;<br/><br/>
#pid        logs/nginx.pid;<br/><br/><span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">#工作模式与连接数上限</span><br/>
events {<br/>
    worker_connections  1024;     <span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">#单个进程最大连接数（最大连接数=连接数*进程数)</span><br/>
}<br/><br/><span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">#设定http服务器</span><br/>
http {<br/>
    include       mime.types;     <span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">#文件扩展名与文件类型映射表</span><br/>
    default_type  application/octet-stream;     <span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">#默认文件类型</span><br/><br/>
    #log_format  main  '$remote_addr - $remote_user [$time_local] &quot;$request&quot; '<br/>
    #                  '$status $body_bytes_sent &quot;$http_referer&quot; '<br/>
    #                  '&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;';<br/><br/>
    #access_log  logs/access.log  main;<br/><br/>
    sendfile        on;   <span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px;">#开启高效文件传输模式，sendfile指令指定nginx是否调用sendfile函数来输出文件，对于普通应用设为 on，如果用来进行下载等应用磁盘IO重负载应用，可设置为off，以平衡磁盘与网络I/O处理速度，降低系统的负载。注意：如果图片显示不正常把这个改成off。</span><br/>
    #tcp_nopush     on;<br/><br/>
    #keepalive_timeout  0;<br/>
    keepalive_timeout  65;    <span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px;">#长连接超时时间，单位是秒</span><br/><br/>
    #gzip  on;<br/>
   <br/>
    client_max_body_size 1024m;     <span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px;">#设定请求缓</span><br/></span><div><span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">#upstream的负载均衡，weight是权重，可以根据机器配置定义权重。weigth参数表示权值，权值越高被分配到的几率越大。</span></div>
    upstream   ruida.iqcloud.com  {<br/>
        server   192.168.5.201:8080;<br/>
        server   192.168.5.202:8080;<br/>
        #ip_hash;<br/>
    }<br/>
  upstream   ruida.RuidaMedil.com  {<br/>
        server   192.168.5.203:8080;<br/>
        server   192.168.5.204:8080;<br/>
        #ip_hash;<br/>
    }</div><div><div><span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">#</span><a href="http://www.honhei.com/" style="font-family: 宋体; font-size: 14px; line-height: 28px; color: rgb(51, 51, 51); text-decoration: none;" target="_blank">虚拟主机</a><span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">的配置</span></div>
    server {</div><div><div><span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">#监听端口</span></div>
        listen       80;</div><div><div><span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">#域名可以有多个，用空格隔开</span></div>
        #server_name  localhost;<br/>
        server_name  58.22.30.37:80;<br/><br/>
        #charset koi8-r;<br/><br/>
        #access_log  logs/host.access.log  main;<br/><div><span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">#对 &quot;/&quot; 启用反向代理</span></div>
        location / {<br/>
            root   html;<br/>
            index  index.php index.html index.htm;<br/>
        }<br/><br/>
        #error_page  404              /404.html;<br/><br/>
        # redirect server error pages to the static page /50x.html<br/>
        #<br/>
        error_page   500 502 503 504  /50x.html;<br/>
        location = /50x.html {<br/>
            root   html;<br/>
        }<br/><br/>
        # proxy the PHP scripts to Apache listening on 127.0.0.1:80<br/>
        #<br/>
        #location ~ \.php$ {<br/>
        #    proxy_pass   http://127.0.0.1;<br/>
        #}<br/><br/>
        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000<br/>
        #<br/>
        location ~ \.php$ {<br/>
            root           html;<br/>
            fastcgi_pass   127.0.0.1:9000;<br/>
            fastcgi_index  index.php;<br/>
        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;<br/>
            include        fastcgi.conf;<br/>
        }<br/><br/>
        location /IQWebOS/ {<br/><br/>
            proxy_pass    http://192.168.5.202:8080/IQWebOS/;<br/>
            proxy_redirect default ;<br/>
        }<br/>
        location /RuidaMedia/ {<br/><br/>
            proxy_pass    http://ruida.RuidaMedil.com/RuidaMedia/;<br/>
            proxy_redirect default ;<br/>
        }<br/><br/>
        location /ruida/ {<br/>
            proxy_pass http://ruida.iqcloud.com/ruida/;<br/>
            proxy_redirect default;<br/>
        }<br/><br/>
        # deny access to .htaccess files, if Apache's document root<br/>
        # concurs with nginx's one<br/>
        #<br/>
        #location ~ /\.ht {<br/>
        #    deny  all;<br/>
        #}<br/>
    }<br/><br/><br/>
    # another virtual host using mix of IP-, name-, and port-based configuration<br/>
    #<br/>
    #server {<br/>
    #    listen       8000;<br/>
    #    listen       somename:8080;<br/>
    #    server_name  somename  alias  another.alias;<br/><br/>
    #    location / {<br/>
    #        root   html;<br/>
    #        index  index.html index.htm;<br/>
    #    }<br/>
    #}<br/><br/><br/>
    # HTTPS server<br/>
    #<br/>
    #server {<br/>
    #    listen       443;<br/>
    #    server_name  localhost;<br/><br/>
    #    ssl                  on;<br/>
    #    ssl_certificate      cert.pem;<br/>
    #    ssl_certificate_key  cert.key;<br/><br/>
    #    ssl_session_timeout  5m;<br/><br/>
    #    ssl_protocols  SSLv2 SSLv3 TLSv1;<br/>
    #    ssl_ciphers  HIGH:!aNULL:!MD5;<br/>
    #    ssl_prefer_server_ciphers   on;<br/><br/>
    #    location / {<br/>
    #        root   html;<br/>
    #        index  index.html index.htm;<br/>
    #    }<br/>
    #}<br/><br/>
}<br/></div><div><br/></div><div><br/></div></div></div></span>
</div>
<hr>
<a name="425"/>

<div>
<span><a name="1254"></a><h1>4.1 ：安装tomcat</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
（1）上传：apache-tomcat-6.0.39.zip<br/>
（2）解压：unzip apache-tomcat-6.0.39.zip<br/>
        如果提示： unzip: command not found<br/>
        则安装：yum install -y unzip zip<br/>
（3）mv apache-tomcat-6.0.39 /usr/local/tomcat<br/>
（4）cd /usr/local/tomcat<br/>
（5）chmod +x bin/*<br/>
（6）./bin/startup.sh<br/>
     Using CATALINA_BASE:   /usr/local/tomcat<br/>
     Using CATALINA_HOME:   /usr/local/tomcat<br/>
     Using CATALINA_TMPDIR: /usr/local/tomcat/temp<br/>
     Using JRE_HOME:        /usr/java/jdk1.6.0_38<br/>
     Using CLASSPATH:       /usr/local/tomcat/bin/bootstrap.jar<br/>
（7）ps -ef|grep tomcat<br/>
（8）netstat -npl|grep java<br/>
     tcp        0      0 ::ffff:127.0.0.1:8005       :::*                        LISTEN      10923/java         <br/>
     tcp        0      0 :::8009                     :::*                        LISTEN      10923/java         <br/>
     tcp        0      0 :::8080                     :::*                        LISTEN      10923/java  </span></div></span>
</div>
<hr>
<a name="427"/>

<div>
<span><a name="1252"></a><h1>3.1：安装 JavaJDK</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">部署JavaJDK -- 主要 JDK 跟 SDK 是有差别的，这里是JDK<br/><br/>
SDK 是 Software Development Kit 的缩写，中文意思是“软件开发工具包”。<br/>
JDK 是 Java Development Kit 的缩写，中文意思是“JAVA开发工具包”。<br/>
所以，不难看出，SDK是一个总称，JDK是SDK中具体的一种软件开发包。<br/>
补充一点，JDK有三个版本：<br/>
J2SE,standard edition,标准版，是我们通常用的一个版本，从JDK 5.0开始，改名为Java SE。<br/>
J2EE,enterprise edition,企业版，使用这种JDK开发J2EE应用程序，从JDK 5.0开始，改名为Java EE。<br/>
J2ME,micro edtion,主要用于移动设备、嵌入式设备上的java应用程序,从JDK 5.0开始，改名为Java ME<br/><br/>
首先，查看是否已经装有Java<br/>
rpm -qa|grep gcj，如果有<br/>
libgcj-devel-4.4.7-4.el6.i686<br/>
libgcj-4.4.7-4.el6.i686<br/>
java-1.5.0-gcj-1.5.0.0-29.1.el6.i686<br/><br/>
卸载： rpm -e --nodeps java-1.5.0-gcj-1.5.0.0-29.1.el6.i686<br/><br/>
（1） 上传： 4-jdk-6u38-ea-bin-b04-linux-i586-31_oct_2012.bin<br/>
（2）增加可执行权限：chmod +x 4-jdk-6u38-ea-bin-b04-linux-i586-31_oct_2012.bin<br/>
（3）执行安装：./4-jdk-6u38-ea-bin-b04-linux-i586-31_oct_2012.bin<br/>
（4）rpm -qa|grep java<br/>
（5）rpm -e java_cup-0.10k gcc-java --nodeps<br/>
（6）mkdir /usr/java<br/>
（7）mv jdk1.6.0_38 /usr/java/<br/>
（8）添加环境变量： vi /etc/profile<br/><br/>
     JAVA_HOME=/usr/java/jdk1.6.0_34<br/>
     CLASSPATH=$JAVA_HOME/lib/tools.jar:$JAVA_HOME/jre/lib/rt.jar<br/>
     PATH=$JAVA_HOME/bin:$PATH:$HOME/bin:$JAVA_HOME/jre/bin<br/>
     export JAVA_HOME CLASSPATH PATH<br/>
（9）  使环境变量生效<br/>
     source /etc/profile<br/>
（10）查看有没有配置成功：java -version</span></div></span>
</div>
<hr>
<a name="431"/>

<div>
<span><a name="1274"></a><h1>10.1 分布式文件系统</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">Glusterfs 分布式文件系统配置笔记192.168.5.166<br/><br/>
六台机子信息：<br/>
Nginx主机远程ip为58.22.30.37，端口为166，本机ip为192.168.5.166<br/>
Nginx备机远程ip为58.22.30.37，端口为168，本机ip为192.168.5.168<br/>
Tomcat1从远程ip为58.22.30.37，端口为211，本机ip为192.168.5.211<br/>
Tomcat2主远程ip为58.22.30.37，端口为169，本机ip为192.168.5.169<br/>
MYSQL1远程ip为58.22.30.37，端口为209，本机ip为192.168.5.209<br/>
MYSQL2远程ip为58.22.30.37，端口为210，本机ip为192.168.5.210<br/><br/>
服务端：<br/>
Tomcat1为：192.168.5.211<br/>
Tomcat2为：192.168.5.169<br/>
MYSQL1 为：192.168.5.209<br/>
MYSQL2 为：192.168.5.210<br/><br/>
客户端：<br/>
nginx1 为：192.168.5.166<br/>
nginx2 为：192.168.5.168<br/><br/>
（1）在四台服务端都执行：<br/>
vi /etc/yum.repos.d/glusterfs-epel.repo<br/><br/>
输入：<br/>
[glusterfs-epel]<br/>
name=GlusterFS is a clustered file-system capable of scaling to several petabytes.<br/>
baseurl=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-$releasever/$basearch/<br/>
enabled=1<br/>
skip_if_unavailable=1<br/>
gpgcheck=1<br/>
gpgkey=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/pub.key<br/>
[glusterfs-noarch-epel]<br/>
name=GlusterFS is a clustered file-system capable of scaling to several petabytes.<br/>
baseurl=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-$releasever/noarch<br/>
enabled=1<br/>
skip_if_unavailable=1<br/>
gpgcheck=1<br/>
gpgkey=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/pub.key<br/>
[glusterfs-source-epel]<br/>
name=GlusterFS is a clustered file-system capable of scaling to several petabytes. - Source<br/>
baseurl=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-$releasever/SRPMS<br/>
enabled=0<br/>
skip_if_unavailable=1<br/>
gpgcheck=1<br/>
gpgkey=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/pub.key<br/><br/>
（2）在四台服务器上都执行：<br/>
yum install glusterfs glusterfs-server<br/><br/>
（3）在四台服务器上都执行，启动服务：<br/>
service glusterd start<br/><br/>
（4）将用于存储的主机加入到“存储池”，这边只要在四台服务器任选一台执行，这边就选择Tomcat1：192.168.5.211，执行如下：<br/>
gluster peer probe 192.168.5.169<br/>
gluster peer probe 192.168.5.209<br/>
gluster peer probe 192.168.5.210<br/><br/>
（5）存储池内的信息（任一台），这边选择Tomcat1：192.168.5.211<br/>
gluster peer status<br/>
结果例如：<br/>
Number of Peers: 3<br/><br/>
Hostname: 192.168.5.169<br/>
Uuid: 3801e9ac-cb0b-4631-a37a-bf331936d3db<br/>
State: Peer in Cluster (Connected)<br/><br/>
Hostname: 192.168.5.209<br/>
Uuid: 6e60328f-f02b-4cd9-a495-48dc7f61ec2a<br/>
State: Peer in Cluster (Connected)<br/><br/>
Hostname: 192.168.5.210<br/>
Uuid: f0a7a5bc-b01e-46dc-a132-d9e59754fc35<br/>
State: Peer in Cluster (Connected)<br/><br/>
（6）df -h 并挂接分区<br/>
mount -t ntfs-3g /dev/sda2 /data/ftp-data<br/>
查挂接结果<br/>
mount<br/>
这里分区已经映射到：/home<br/>
df -h /home<br/>
/dev/sda2              25G  172M   24G   1% /home<br/>
mount -t auto /dev/sda2 /home<br/><br/>
（7）Create volume（创建卷）<br/>
Glusterfs的卷有多种可选模式，我们采用其中的两种Distributed和Replicated，其中Distributed类似于磁盘的RAID 0模式；Replicated类似于磁盘的RAID1模式（glusterfs中可以制定副本的数量，这里我们存储两个副本即可）。我们利用此两种模式在4台server间做成类似于RAID 10的模式，提供高性能和高可用的存储服务。<br/>
在任意一台server执行：<br/>
gluster volume create ftp-volume replica 2 192.168.5.211:/data/ftp-data 192.168.5.169:/data/ftp-data 192.168.5.209:/data/ftp-data 192.168.5.210:/data/ftp-data<br/>
gluster volume create ftp-volume replica 2 192.168.5.211:/home 192.168.5.169:/home 192.168.5.209:/home 192.168.5.210:/home<br/>
gluster volume create ftp-volume replica 2 192.168.5.211:/boot 192.168.5.169:/boot 192.168.5.209:/boot 192.168.5.210:/boot<br/>
gluster volume create ftp-volume replica 2 192.168.5.211:/data/ftp-data 192.168.5.169:/home 192.168.5.209:/home 192.168.5.210:/home force   ?????<br/><br/>
##上述命令中：dir为每台服务器上要加入存储池的目录（此目录最好做一个单独分区挂载至此目录）。按照上述命令server2：/dir作为server1:/dir的副本；server4:/dir作为server3:/dir的副本<br/><br/>
（8）gluster volume start ftp-volume<br/>
（9）gluster volume status  状态是N的时候 <font color="#004080" face="微软雅黑" style="text-align: -webkit-left;"><span style="font-size: 12pt;">mount | grep </span></font><span style="text-align: -webkit-left; color: rgb(1, 1, 1); font-family: 宋体; font-size: 12px;">resources</span><br/>
（10）在nginx主：192.168.5.166<br/>
（11）nginx主、备<br/>
yum install glusterfs glusterfs-client<br/><br/>
（12）选择服务器任意一台这边选择tomcat1：192.168.5.211<br/>
mount -t glusterfs 192.168.5.211:/ftp-volume /glusterfs/</span><div><br/>
 
<div>PC六台</div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">mount | grep </span></font><span style="color: rgb(1, 1, 1); font-family: 宋体; font-size: 12px;">resources</span></div><div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font color="#010101" face="宋体" size="1"><span style="font-size:9pt">mount -t glusterfs 192.168.5.209:/resources /glusterfsConsume/</span></font></div><br/>
（13）在/etc/rc.local添加如下内容，以便实现开机自动挂载<br/>
mount -t glusterfs 192.168.5.201:/ftp-volume /glusterfs/  2&gt;/var/log/gluster-client.err<br/><br/>
（14）df -h<br/>
（15）在客户端建立目录或者文件，服务端会自己同步过来<br/><br/>
mount -t glusterfs 192.168.5.112:/ftp-volume /usr/local/nginx/html/ruida/<br/><br/><br/><br/><br/></div></div></div></span>
</div>
<hr>
<a name="434"/>

<div>
<span><a name="1246"></a><h1>1.3：MySQL 主从配置上的一些操作要点</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">A: 判断主数据库是否能连接上（主要repl是实际的主从用户名，要根据实际相关相应修改）：<br/>
mysql -urepl -prepl -h 192.168.5.209<br/><br/>
B：查看从数据库状态（出现如下记录才是说明主从配置成功）<br/>
show slave status\G;<br/>
mysql&gt; show slave status\G;<br/>
*************************** 1. row ***************************<br/>
               Slave_IO_State: Waiting for master to send event<br/>
                  Master_Host: 192.168.5.209<br/>
                  Master_User: repl<br/>
                  Master_Port: 3306<br/>
                Connect_Retry: 60<br/>
              Master_Log_File: mysql-bin.000002<br/>
          Read_Master_Log_Pos: 485<br/>
               Relay_Log_File: MySQL2-relay-bin.000003<br/>
                Relay_Log_Pos: 631<br/>
        Relay_Master_Log_File: mysql-bin.000002<br/>
             Slave_IO_Running: Yes<br/>
            Slave_SQL_Running: Yes<br/>
              Replicate_Do_DB:<br/>
          Replicate_Ignore_DB:<br/>
           Replicate_Do_Table:<br/>
       Replicate_Ignore_Table:<br/>
      Replicate_Wild_Do_Table:<br/>
  Replicate_Wild_Ignore_Table:<br/>
                   Last_Errno: 0<br/>
                   Last_Error:<br/>
                 Skip_Counter: 0<br/>
          Exec_Master_Log_Pos: 485<br/>
              Relay_Log_Space: 1083<br/>
              Until_Condition: None<br/>
               Until_Log_File:<br/>
                Until_Log_Pos: 0<br/>
           Master_SSL_Allowed: No<br/>
           Master_SSL_CA_File:<br/>
           Master_SSL_CA_Path:<br/>
              Master_SSL_Cert:<br/>
            Master_SSL_Cipher:<br/>
               Master_SSL_Key:<br/>
        Seconds_Behind_Master: 0<br/>
Master_SSL_Verify_Server_Cert: No<br/>
                Last_IO_Errno: 0<br/>
                Last_IO_Error:<br/>
               Last_SQL_Errno: 0<br/>
               Last_SQL_Error:<br/>
  Replicate_Ignore_Server_Ids:<br/>
             Master_Server_Id: 1<br/>
1 row in set (0.00 sec)<br/><br/>
ERROR:<br/>
No query specified<br/><br/>
C：查看主数据库有哪些用户:<br/>
select user,host from mysql.user;<br/>
mysql&gt; select user,host from mysql.user;<br/>
+-------+---------------+<br/>
| user  | host          |<br/>
+-------+---------------+<br/>
| root  | %             |<br/>
| ruida | %             |<br/>
| root  | 127.0.0.1     |<br/>
| repl  | 192.168.5.210 |<br/>
| root  | ::1           |<br/>
|       | localhost     |<br/>
| root  | localhost     |<br/>
|       | mysql1        |<br/>
| root  | mysql1        |<br/>
+-------+---------------+<br/>
9 rows in set (0.00 sec)<br/>
D: delete from mysql.user where user='repl';<br/></span></div></span>
</div>
<hr>
<a name="436"/>

<div>
<span><a name="1244"></a><h1>1.2：MySQL 主从安装要点步骤</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（1）192.168.5.241 为主， 192.168.5.242为从<br/>
（2）192.168.5.241, 查看进程是否在运行<br/>
     ps -ef|grep mysql<br/>
（3）192.168.5.241, 登入MySQL<br/>
     mysql -uroot -proot<br/>
（4）192.168.5.241，数据库设为只读<br/>
     flush tables with read lock;<br/>
（5）192.168.5.241，导出主MySQL数据库（有两个库ruida.sql、ruida2.sql）<br/>
     mysqldump -uroot -proot ruida &gt;/tmp/ruida.sql<br/>
     mysqldump -uroot -proot ruida2 &gt;/tmp/ruida2.sql<br/>
（6）192.168.5.241，将上一步到处的数据库拷贝到从机上：192.168.5.242<br/>
     scp /tmp/ruida* 192.168.5.242:/tmp<br/>
（7）192.168.5.242，将上一步从主机拷贝过来的sql导入到数据库当中<br/>
     mysql -uroot -proot ruida&lt;/tmp/ruida.sql<br/>
     mysql -uroot -proot ruida2&lt;/tmp/ruida2.sql<br/>
（8）192.168.5.241,<br/>
     show master status;        <span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 12px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">在MYSQL的主从复制中 ，通过命令show  master status，可以查看master数据库当前正在使用的二进制日志及当前执行二进制日志位置</span><br/>
（9）192.168.5.241<br/>
     exit<br/>
（10）192.168.5.241<br/>
     mysql -uroot -proot<br/>
（11）192.168.5.242<br/>
     mysql -uroot -proot<br/>
（12）192.168.5.242<br/>
     show master status;<br/>
     exit<br/>
（13）192.168.5.242, 查看下my-medium.cnf这个文件在哪边，如果事先已经知道存放在哪就不要这一步<br/>
     find / -name *my*.cnf<br/>
（14）192.168.5.242<br/>
     cp /usr/share/doc/MySQL-server-5.5.38/my-medium.cnf /etc/my.cnf<br/>
（15）192.168.5.242<br/>
     vi /etc/my.cnf<br/>
     将server-id修改为2, 如下（这里是从机，主机后面也要修改，主机为：1）:<br/>
     # required unique id between 1 and 2^32 - 1<br/>
     # defaults to 1 if master-host is not set<br/>
     # but will not function as a master if omitted<br/>
     server-id       = 2<br/>
（16）192.168.5.242，重启mysql服务<br/>
     service mysql restart<br/>
（17）192.168.5.241<br/>
     cp /usr/share/doc/MySQL-server-5.5.38/my-medium.cnf /etc/my.cnf<br/>
     service mysql restart<br/>
（18）192.168.5.241<br/>
     mysql -uroot -proot<br/>
（19）192.168.241, 记得命令后面一定要加分号<br/>
     show master status;<br/>
     结果如下：<br/>
     +------------------+----------+--------------+------------------+<br/>
     | File             | Position | Binlog_Do_DB | Binlog_Ignore_DB |<br/>
     +------------------+----------+--------------+------------------+<br/>
     | mysql-bin.000001 |      107 |              |                  |<br/>
     +------------------+----------+--------------+------------------+<br/>
     1 row in set (0.00 sec)<br/>
（20）192.168.5.241， 创建从数据库的账号（用于从机复制）<br/>
     GRANT REPLICATION SLAVE ON *.* TO repl@'192.168.5.242' IDENTIFIED BY 'repl';<br/><br/>
（21）192.168.5.242，<br/>
     mysql -uroot -proot<br/>
（22）192.168.5.242, 设置从数据库参数<br/>
     mysql&gt; change master to master_host='192.168.5.241', master_user='repl', master_password='repl',master_log_file='mysql-bin.000001', master_log_pos=107;<br/>
（23）192.168.5.241,<br/>
        unlock tables;<br/>
（24）192.168.5.242， 对应的停止的指令为：stop slave<br/>
     start slave;<br/>
（25）192.168.5.242<br/>
     show slave status\G;<br/>
（26）192.168.5.241<br/>
     SHOW DATABASES;<br/>
（27）192.168.5.241<br/>
     use ruida<br/>
     show tables;<br/>
（28）192.168.5.241<br/>
     create table ljk (id int(10));<br/>
（29）192.168.5.241<br/>
     insert into ljk values ('1');<br/>
（30）192.168.5.242<br/>
     use ruida<br/>
     show tables;<br/>
（31）192.168.5.242<br/>
     select * from ljk;<br/>
（32）192.168.5.242<br/>
     insert into ljk values ('2');<br/>
（33）192.168.5.242<br/>
     select * from ljk;<br/>
（34）192.168.5.241<br/>
     select * from ljk;<br/>
后面几步就是用来校验：主数据库插入一条记录，从数据库是否同步；从数据库插入一条记录，主数据库不会同步<br/><br/></span></div></span>
</div>
<hr>
<a name="437"/>

<div>
<span><a name="1242"></a><h1>1.1：MySQL 安装要点步骤</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">一、记录要即将安装的MySQL用户名、密码、IP<br/>
主：<br/>
usr: root<br/>
pw: root123<br/>
192.168.5.241<br/><br/>
从：<br/>
usr: root<br/>
pw: root123<br/>
192.168.5.242<br/><br/>
usr:root<br/>
pw:iqboard<br/>
192.168.5.248<br/><br/>
二、安装MySQL<br/>
（1）解压命令<br/>
解压tar包<br/>
tar xvf MySQL-5.5.38-1.el6.i686.rpm-bundle.tar<br/><br/>
（2）安装MySQL<br/>
安装系列MySQL 的rpm包<br/>
rpm -ivh MySQL-*<br/>
出错执行：yum -y remove mysql-libs-5.1.*    <br/>
如果有提示：libaio 等相关问题，就安装<br/>
libaio-0.3.107-10.el6.i686.rpm     - 32位<br/>
libaio-0.3.107-10.el6.x86_64.rpm - 64位<br/><br/>
rpm -e  mysql-libs-5.1.71-1.el6.x86_64 --nodeps<br/>
启动MySQL<br/>
service mysql start<br/>
MySQL 用户名跟密码：<br/>
mysqladmin -uroot password root<br/>
Navicat 尝试连接MySQL，如果连接不上，按照如下步骤操作：<br/>
CentOS系统安装好MySQL后，默认情况下不支持用户通过非本机连接上数据库服务器，下面是解决方法：<br/>
1、在控制台执行 mysql -u root -p mysql，CentOS系统提示输入数据库root用户的密码，输入完成后即进入mysql控制台，这个命令的第一个mysql是执     行命令，第二个mysql是系统数据名称，不一样的。<br/>
2、在mysql控制台执行<br/>
     GRANT ALL PRIVILEGES ON *.* TO 'ruida'@'%' IDENTIFIED BY 'ruida~' WITH GRANT OPTION;<br/>
     FLUSH PRIVILEGES;<br/>
3、在mysql控制台执行命令中的 'root'@'%' 可以这样理解: root是用户名，%是主机名或IP地址，这里的%代表任意主机或IP地址，你也可替换成任意其它     用户名或指定唯一的IP地址；'ruida~'是给授权用户指定的登录数据库的密码；另外需要说明一点的是我这里的都是授权所有权限，可以指定部     分权限，GRANT具体操作详情见：http://www.mysqlab.net/docs/refman/en-5.1/page/grant.html<br/></span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">4、不放心的话可以在mysql控制台执行 select host, user from user; 检查一下用户表里的内容<br/>
     这样，我们就完成了CentOS系统安装MySQL支持远程连接。<br/></span></div></div></span>
</div>
<hr>
<a name="440"/>

<div>
<span><a name="1256"></a><h1>5.1：配置FTP</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（1） yum install vsftpd*<br/>
（2） vi /etc/sysconfig/selinux  对配置文件修改为（SELINUX=permissive）：<br/><br/>
     # This file controls the state of SELinux on the system.<br/>
     # SELINUX= can take one of these three values:<br/>
     #     enforcing - SELinux security policy is enforced.<br/>
     #     permissive - SELinux prints warnings instead of enforcing.<br/>
     #     disabled - No SELinux policy is loaded.<br/>
     SELINUX=permissive<br/>
     # SELINUXTYPE= can take one of these two values:<br/>
     #     targeted - Targeted processes are protected,<br/>
     #     mls - Multi Level Security protection.<br/>
     SELINUXTYPE=targeted<br/><br/></span></div><div>（3） 关闭selinux防火墙</div><div>       setenforce 0</div><div>（4）vi /etc/vsftpd/user_list（去掉 root ）</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">bin<br/>
daemon<br/>
adm<br/>
lp<br/>
sync<br/>
shutdown<br/>
halt<br/>
mail<br/>
news<br/>
uucp<br/>
operator<br/>
games<br/>
nobody<br/>
（5）vi /etc/vsftpd/ftpusers<br/>
bin<br/>
daemon<br/>
adm<br/>
lp<br/>
sync<br/>
shutdown<br/>
halt<br/>
mail<br/>
news<br/>
uucp<br/>
operator<br/>
games<br/>
nobody<br/>
（5） service vsftpd start<br/>
（6）用FlashFXP进行FTP连接试试看，如果能正常连接说明配置成功<br/>
192.168.5.241<br/>
root<br/>
root123<br/><br/><br/>
/sbin/service vsftpd stop<br/><br/></span></div><div><br/></div><div>C： 增加FTP账号、权限</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">ftpUser=ruida<br/>
ftpPassword=ruida&amp;ftp</span></div><div>  C-1：输入，意思是将要产生的ruida映射到磁盘目录glusterfsConsume</div><div>     useradd ruida -d /glusterfsConsume</div><div><br/></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">  C-2：设置密码（过程会提示要输入两次密码）：<br/>
            passwd ruida<br/><br/>
service vsftpd start<br/>
service vsftpd stop<br/>
service vsftpd status</span></div><div><br/></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
D：记得修改映射目录的权限，否则文件无法上传<br/>
  chmod 777 glusterfs<br/>
  chmod 777 glusterfs/*<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
查看SELinux状态：<br/>
1、/usr/sbin/sestatus -v      ##如果SELinux status参数为enabled即为开启状态<br/>
SELinux status:                 enabled<br/>
2、getenforce                 ##也可以用这个命令检查<br/>
关闭SELinux：<br/>
1、临时关闭（不用重启机器）：<br/>
setenforce 0                  ##设置SELinux 成为permissive模式<br/>
                              ##setenforce 1 设置SELinux 成为enforcing模式<br/>
2、修改配置文件需要重启机器：</span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
修改/etc/selinux/config 文件<br/>
将SELINUX=enforcing改为SELINUX=disabled<br/>
重启机器即可</span></div></div></span>
</div>
<hr>
<a name="441"/>

<div>
<span><a name="1242"></a><h1>1.1：MySQL 安装要点步骤</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">一、记录要即将安装的MySQL用户名、密码、IP<br/>
主：<br/>
usr: root<br/>
pw: root123<br/>
192.168.5.241<br/><br/>
从：<br/>
usr: root<br/>
pw: root123<br/>
192.168.5.242<br/><br/>
usr:root<br/>
pw:iqboard<br/>
192.168.5.248<br/><br/>
二、安装MySQL<br/>
（1）解压命令<br/>
解压tar包<br/>
tar xvf MySQL-5.5.38-1.el6.i686.rpm-bundle.tar<br/><br/>
（2）安装MySQL<br/>
安装系列MySQL 的rpm包<br/>
rpm -ivh MySQL-*<br/>
出错执行：yum -y remove mysql-libs-5.1.*    <br/>
如果有提示：libaio 等相关问题，就安装<br/>
libaio-0.3.107-10.el6.i686.rpm     - 32位<br/>
libaio-0.3.107-10.el6.x86_64.rpm - 64位</span></div><div><br/></div><div>删除已安装</div><div>rpm -e  mysql-libs-5.1.71-1.el6.x86_64 --nodeps</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">重新安装系列MySQL 的rpm包</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">rpm -ivh MySQL-*</span></div><div><br/></div><div>启动MySQL，<font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">MySQL</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">默认用户是</span></font><font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">root</span></font> <font color="#010101" face="宋体" size="2"><span style="font-size:10pt">，由于初始没有密码，第一次进时只需键入</span></font> <font color="#010101" face="Calibri" size="2"><span style="font-size:10pt">mysql</span></font><font color="#010101" face="宋体" size="2"><span style="font-size:10pt">即可。</span></font></div><div>service mysql start</div><div align="left"><font color="#010101" face="微软雅黑" size="1"><span style="font-size:9pt">设置root密码：</span></font></div><div>mysqladmin -uroot password root</div><div><br/></div><div>创建用户</div><div><br/></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">Navicat 尝试连接MySQL，如果连接不上，按照如下步骤操作：<br/>
CentOS系统安装好MySQL后，默认情况下不支持用户通过非本机连接上数据库服务器，下面是解决方法：<br/>
1、在控制台执行 mysql -u root -p mysql，CentOS系统提示输入数据库root用户的密码，输入完成后即进入mysql控制台，这个命令的第一个mysql是执     行命令，第二个mysql是系统数据名称，不一样的。<br/>
2、在mysql控制台执行<br/>
     GRANT ALL PRIVILEGES ON *.* TO 'ruida'@'%' IDENTIFIED BY 'ruida~' WITH GRANT OPTION;<br/>
     FLUSH PRIVILEGES;<br/>
3、在mysql控制台执行命令中的 'root'@'%' 可以这样理解: root是用户名，%是主机名或IP地址，这里的%代表任意主机或IP地址，你也可替换成任意其它     用户名或指定唯一的IP地址；'ruida~'是给授权用户指定的登录数据库的密码；另外需要说明一点的是我这里的都是授权所有权限，可以指定部     分权限，GRANT具体操作详情见：http://www.mysqlab.net/docs/refman/en-5.1/page/grant.html</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">4、不放心的话可以在mysql控制台执行 select host, user from user; 检查一下用户表里的内容</span></div><div>     这样，我们就完成了CentOS系统安装MySQL支持远程连接。</div><div><br/></div><div>5、如果连不上检查防火墙有没有关</div></span>
</div>
<hr>
<a name="444"/>

<div>
<span><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><a name="1250"></a></span><h1><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">2.1：安装Nginx</span></h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
安装部署之前，先通过yum方式安装常见的依赖包<br/>
yum install gcc* zlib cmake libxml2 libxml2-devel bzip2 bzip2-devel curl curl-devel libjpeg libjpeg-devel libpng libpng-devel freetype-devel pspell-devel libmcrypt libmcrypt-devel freetypepcre-devel*<br/><br/>
（1）安装pcre（perl兼容的正则表达式）<br/>
yum -y install pcre*<br/><br/>
（2）过程如果出现: wget command not found, 则安装：<br/>
yum -y install wget<br/><br/>
（3）在cmd命令行里，通过pscp从window拷贝nginx到CentOS<br/>
pscp -r -l root -pw root123 F:\CentOSTest\nginx 192.168.5.241:/usr/local/src<br/><br/>
（4）解压</span></span></div><div>tar zxvf nginx-1.2.3.tar.gz</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">                                            mv nginx-* /usr/local</span></div><div>cd nginx-1.2.3</div><div><br/></div><div>（5）编译</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">./configure --with-http_stub_status_module --prefix=/usr/local/nginx</span></span></div><div><br/></div><div>如果提示一下错误</div><div>./configure: error: the HTTP gzip module requires the zlib library.</div><div>You can either disable the module by using --without-http_gzip_module<br/>
option, or install the zlib library into the system, or build the zlib library</div><div>statically from the source with nginx by using --with-zlib=&lt;path&gt; option.</div><div>则需要安装“zlib-devel”即可。SSH执行以下命令： yum install -y zlib-devel</div><div>重新编译</div><div><br/></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（6）安装<br/>
make<br/>
make install<br/><br/></span></span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">echo $?  返回0成功，返回1失败</span></div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
（7）启动nginx服务：<br/>
/usr/local/nginx/sbin/nginx<br/><br/>
（8）查看nginx进程情况<br/>
ps -ef|grep nginx<br/><br/>
防火墙要关<br/><br/>
（9）在浏览器输入： 192.168.5.247 如果出现欢迎界面，说明nginx安装成功</span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（10）nginx(主)   nginx.conf</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
#user  nobody;<br/>
worker_processes  1;     <span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; background-color: rgb(255, 255, 255);">#nginx进程数，建议设置为等于CPU总核心数。</span><br/><br/>
#error_log  logs/error.log;             <span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; background-color: rgb(255, 255, 255);">#全局错误日志定义类型，[ debug | info | notice | warn | error | crit ]</span><br/>
#error_log  logs/error.log  notice;<br/>
#error_log  logs/error.log  info;<br/><br/>
#pid        logs/nginx.pid;<br/><br/><span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; background-color: rgb(255, 255, 255);">#工作模式与连接数上限</span><br/>
events {<br/>
    worker_connections  1024;     <span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; background-color: rgb(255, 255, 255);">#单个进程最大连接数（最大连接数=连接数*进程数)</span><br/>
}<br/><br/><span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; background-color: rgb(255, 255, 255);">#设定http服务器</span><br/>
http {<br/>
    include       mime.types;     <span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; background-color: rgb(255, 255, 255);">#文件扩展名与文件类型映射表</span><br/>
    default_type  application/octet-stream;     <span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; background-color: rgb(255, 255, 255);">#默认文件类型</span><br/><br/>
    #log_format  main  '$remote_addr - $remote_user [$time_local] &quot;$request&quot; '<br/>
    #                  '$status $body_bytes_sent &quot;$http_referer&quot; '<br/>
    #                  '&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;';<br/><br/>
    #access_log  logs/access.log  main;<br/><br/>
    sendfile        on;   <span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px;">#开启高效文件传输模式，sendfile指令指定nginx是否调用sendfile函数来输出文件，对于普通应用设为 on，如果用来进行下载等应用磁盘IO重负载应用，可设置为off，以平衡磁盘与网络I/O处理速度，降低系统的负载。注意：如果图片显示不正常把这个改成off。</span><br/>
    #tcp_nopush     on;<br/><br/>
    #keepalive_timeout  0;<br/>
    keepalive_timeout  65;    <span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px;">#长连接超时时间，单位是秒</span><br/><br/>
    #gzip  on;<br/>
   <br/>
    client_max_body_size 1024m;     <span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px;">#设定请求缓</span><br/></span><div><span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; background-color: rgb(255, 255, 255);">#upstream的负载均衡，weight是权重，可以根据机器配置定义权重。weigth参数表示权值，权值越高被分配到的几率越大。</span></div>
    upstream   ruida.iqcloud.com  {<br/>
        server   192.168.5.201:8080;<br/>
        server   192.168.5.202:8080;<br/>
        #ip_hash;<br/>
    }<br/>
  upstream   ruida.RuidaMedil.com  {<br/>
        server   192.168.5.203:8080;<br/>
        server   192.168.5.204:8080;<br/>
        #ip_hash;<br/>
    }</div><div><div><span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; background-color: rgb(255, 255, 255);">#</span><a href="http://www.honhei.com/" style="font-family: 宋体; font-size: 14px; color: rgb(51, 51, 51); text-decoration: none;" target="_blank">虚拟主机</a><span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; background-color: rgb(255, 255, 255);">的配置</span></div>
    server {</div><div><div><span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; background-color: rgb(255, 255, 255);">#监听端口</span></div>
        listen       80;</div><div><div><span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; background-color: rgb(255, 255, 255);">#域名可以有多个，用空格隔开</span></div>
        #server_name  localhost;<br/>
        server_name  58.22.30.37:80;<br/><br/>
        #charset koi8-r;<br/><br/>
        #access_log  logs/host.access.log  main;<br/><div><span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; background-color: rgb(255, 255, 255);">#对 &quot;/&quot; 启用反向代理</span></div>
        location / {<br/>
            root   html;<br/>
            index  index.php index.html index.htm;<br/>
        }<br/><br/>
        #error_page  404              /404.html;<br/><br/>
        # redirect server error pages to the static page /50x.html<br/>
        #<br/>
        error_page   500 502 503 504  /50x.html;<br/>
        location = /50x.html {<br/>
            root   html;<br/>
        }<br/><br/>
        # proxy the PHP scripts to Apache listening on 127.0.0.1:80<br/>
        #<br/>
        #location ~ \.php$ {<br/>
        #    proxy_pass   http://127.0.0.1;<br/>
        #}<br/><br/>
        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000<br/>
        #<br/>
        location ~ \.php$ {<br/>
            root           html;<br/>
            fastcgi_pass   127.0.0.1:9000;<br/>
            fastcgi_index  index.php;<br/>
        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;<br/>
            include        fastcgi.conf;<br/>
        }<br/><br/>
        location /IQWebOS/ {<br/><br/>
            proxy_pass    http://192.168.5.202:8080/IQWebOS/;<br/>
            proxy_redirect default ;<br/>
        }<br/>
        location /RuidaMedia/ {<br/><br/>
            proxy_pass    http://ruida.RuidaMedil.com/RuidaMedia/;<br/>
            proxy_redirect default ;<br/>
        }<br/><br/>
        location /ruida/ {<br/>
            proxy_pass http://ruida.iqcloud.com/ruida/;<br/>
            proxy_redirect default;<br/>
        }<br/><br/>
        # deny access to .htaccess files, if Apache's document root<br/>
        # concurs with nginx's one<br/>
        #<br/>
        #location ~ /\.ht {<br/>
        #    deny  all;<br/>
        #}<br/>
    }<br/><br/><br/>
    # another virtual host using mix of IP-, name-, and port-based configuration<br/>
    #<br/>
    #server {<br/>
    #    listen       8000;<br/>
    #    listen       somename:8080;<br/>
    #    server_name  somename  alias  another.alias;<br/><br/>
    #    location / {<br/>
    #        root   html;<br/>
    #        index  index.html index.htm;<br/>
    #    }<br/>
    #}<br/><br/><br/>
    # HTTPS server<br/>
    #<br/>
    #server {<br/>
    #    listen       443;<br/>
    #    server_name  localhost;<br/><br/>
    #    ssl                  on;<br/>
    #    ssl_certificate      cert.pem;<br/>
    #    ssl_certificate_key  cert.key;<br/><br/>
    #    ssl_session_timeout  5m;<br/><br/>
    #    ssl_protocols  SSLv2 SSLv3 TLSv1;<br/>
    #    ssl_ciphers  HIGH:!aNULL:!MD5;<br/>
    #    ssl_prefer_server_ciphers   on;<br/><br/>
    #    location / {<br/>
    #        root   html;<br/>
    #        index  index.html index.htm;<br/>
    #    }<br/>
    #}<br/><br/>
}<br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div>nginx重启：/usr/local/nginx/sbin/nginx -s reload</div><div><br/></div></div></span>
</div>
<hr>
<a name="447"/>

<div>
<span><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font color="#010101" face="宋体" size="1"><span style="font-size:9pt">INSERT iq_user_duty_org_sub</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font color="#010101" face="宋体" size="1"><span style="font-size:9pt">select REPLACE(UPPER(UUID()),'-',''),B.id,c.id,SYSDATE(),SYSDATE() from iq_users A inner join</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font color="#010101" face="宋体" size="1"><span style="font-size:9pt">iq_user_duty_org B on a.id =B.user_id</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font color="#010101" face="宋体" size="1"><span style="font-size:9pt">inner join iq_subject C on c.subject_name ='英语'</span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><div><font color="#010101" face="宋体" size="1"><span style="font-size:9pt">where A.user_name ='XMLZT0102'</span></font></div><div><span style="font-size: 9pt;"><span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);"><br/></span></span></span></div><div><span style="font-size: 9pt;"><span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);"><br/></span></span></span></div><div><span style="font-size: 9pt;"><span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);"><br/></span></span></span></div><div><span style="font-size: 9pt;"><span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);"><br/></span></span></span></div><div align="left"><font color="#003399" face="宋体" size="1"><span style="font-size:9pt">select d.subject_name from iq_users A</span></font></div><div align="left"><font color="#003399" face="宋体" size="1"><span style="font-size:9pt">inner join iq_user_duty_org B on A.id = b.user_id</span></font></div><div align="left"><font color="#003399" face="宋体" size="1"><span style="font-size:9pt">inner join iq_user_duty_org_sub C on c.user_duty_org_id =B.id</span></font></div><div align="left"><font color="#003399" face="宋体" size="1"><span style="font-size:9pt">inner join iq_subject D on c.sub_id =D.id</span></font></div><div align="left"><font color="#003399" face="宋体" size="1"><span style="font-size:9pt">where A.user_name ='a0u1t003'</span></font></div></div></span>
</div>
<hr>
<a name="449"/>

<div>
<span><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><a name="1286"></a></span><h1><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">配置多个tomcat</span></h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">/usr/local/tomcat2/conf/server.xml<br/><br/>
&lt;Server port=&quot;8006&quot; shutdown=&quot;SHUTDOWN&quot;&gt;</span></span></div><div>#此处的8005已改为8006</div><div>&lt;Connectr port=&quot;8081&quot; protocol=&quot;HTTP/1.1&quot;</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">               connectionTimeout=&quot;20000&quot;<br/>
               redirectPort=&quot;8443&quot; /&gt;<br/>
#此处的8080已改为8081<br/>
&lt;Connector port=&quot;8010&quot; protocol=&quot;AJP/1.3&quot; redirectPort=&quot;8443&quot; /&gt;<br/>
#此处的8009已改为8010</span></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div>部署配置都无误后，如果还是不能访问，试试关闭防火墙service iptables stop 后访问。</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div></span>
</div>
<hr>
<a name="450"/>

<div>
<span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><font color="#404040" face="宋体" size="2"><span style="font-size:10pt"><b>网址：</b></span></font> <a href="http://www.open-open.com/lib/view/open1411819063437.html"><font color="#0000FF" face="Arial" size="2"><span style="font-size:10pt"><b><u>http://www.open-open.com/lib/view/open1411819063437.html</u></b></span></font></a><div align="left"><font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><br/></span></font></div><div align="left"><font color="#404040" face="宋体" size="2"><span style="font-size:10pt">在</span></font><font color="#404040" face="Arial" size="2"><span style="font-size:10pt">tomcat7.0</span></font><font color="#404040" face="宋体" size="2"><span style="font-size:10pt">测试通过的是导入如下的</span></font> <font color="#404040" face="Arial" size="2"><span style="font-size:10pt">jar</span></font><font color="#404040" face="宋体" size="2"><span style="font-size:10pt">包：</span></font></div><div align="left"><font color="#404040" face="Arial" size="2"><span style="font-size:10pt">commons-pool-1.6.jar</span></font><font color="#404040" face="宋体" size="2"><span style="font-size:10pt">、</span></font><font color="#404040" face="Arial" size="2"><span style="font-size:10pt">tomcat-juli-adapters.jar</span></font> <font color="#404040" face="宋体" size="2"><span style="font-size:10pt">、</span></font><font color="#404040" face="Arial" size="2"><span style="font-size:10pt">tomcat-util.jar</span></font><font color="#404040" face="宋体" size="2"><span style="font-size:10pt">、</span></font> <font color="#404040" face="Arial" size="2"><span style="font-size:10pt">jedis-2.1.0.jar</span></font><font color="#404040" face="宋体" size="2"><span style="font-size:10pt">、</span></font><font color="#404040" face="Arial" size="2"><span style="font-size:10pt">tomcat-redis-session-manager-1.2-tomcat-7-java-7.jar</span></font></div><div align="left"><font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><br/></span></font></div><div align="left"><font color="#404040" face="Arial" size="2"><span style="font-size:10pt">&lt;Valve className=&quot;com.radiadesign.catalina.session.RedisSessionHandlerValve&quot; /&gt;</span></font></div><div align="left"><font color="#404040" face="Arial" size="2"><span style="font-size:10pt">&lt;Manager className=&quot;com.radiadesign.catalina.session.RedisSessionManager&quot; host=&quot;192.168.5.103&quot; port=&quot;6379&quot; database=&quot;0&quot; maxInactiveInterval=&quot;60&quot;/&gt;</span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><br/></span></font></div><div align="left" style="margin-left:0mm; margin-right:0mm; text-indent:7mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font color="#404040" face="宋体" size="2"><span style="font-size:10pt">当用户量大、应用服务器使用集群来布署时，使用</span></font> <font color="#404040" face="Arial" size="2"><span style="font-size:10pt">Tomcat</span></font><font color="#404040" face="宋体" size="2"><span style="font-size:10pt">默认自带的</span></font><font color="#404040" face="Arial" size="2"><span style="font-size:10pt">Session</span></font> <font color="#404040" face="宋体" size="2"><span style="font-size:10pt">就不能满足需求了。当然解决方法有很多，本文提供了一个解决方案，就是使用</span></font> <font color="#404040" face="Arial" size="2"><span style="font-size:10pt">Redis</span></font><font color="#404040" face="宋体" size="2"><span style="font-size:10pt">来保存</span></font><font color="#404040" face="Arial" size="2"><span style="font-size:10pt">Session</span></font> <font color="#404040" face="宋体" size="2"><span style="font-size:10pt">，好处就是使用</span></font> <font color="#404040" face="Arial" size="2"><span style="font-size:10pt">Session</span></font><font color="#404040" face="宋体" size="2"><span style="font-size:10pt">的代码没有任何变化，</span></font><font color="#404040" face="Arial" size="2"><span style="font-size:10pt">Tomcat</span></font><font color="#404040" face="宋体" size="2"><span style="font-size:10pt">默认把</span></font> <font color="#404040" face="Arial" size="2"><span style="font-size:10pt">Session</span></font><font color="#404040" face="宋体" size="2"><span style="font-size:10pt">保存到</span></font><font color="#404040" face="Arial" size="2"><span style="font-size:10pt">Redis</span></font> <font color="#404040" face="宋体" size="2"><span style="font-size:10pt">上面了。</span></font></div><p style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:1.76mm; margin-bottom:1.76mm;background: #fafafa;"><font color="#404040" face="宋体" size="2"><span style="font-size:10pt">使用</span></font> <font color="#404040" face="Arial" size="2"><span style="font-size:10pt">Redis</span></font> <font color="#404040" face="宋体" size="2"><span style="font-size:10pt">服务器来存储</span></font> <font color="#404040" face="Arial" size="2"><span style="font-size:10pt">Session</span></font><font color="#404040" face="宋体" size="2"><span style="font-size:10pt">非常有优势。首先它是一个</span></font> <font color="#404040" face="Arial" size="2"><span style="font-size:10pt">NOSQL</span></font><font color="#404040" face="宋体" size="2"><span style="font-size:10pt">数据，第二它很容易扩展使用。</span></font></p><p style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:1.76mm; margin-bottom:1.76mm;background: #fafafa;"><font color="#404040" face="宋体" size="2"><span style="font-size:10pt">下面这种安装方式非常清晰明白的引导你把</span></font> <font color="#404040" face="Arial" size="2"><span style="font-size:10pt">Redis</span></font><font color="#404040" face="宋体" size="2"><span style="font-size:10pt">缓存作为一个</span></font><font color="#404040" face="Arial" size="2"><span style="font-size:10pt">Session</span></font><font color="#404040" face="宋体" size="2"><span style="font-size:10pt">的存储系统。步骤如下：</span></font></p><p style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:0.88mm; margin-bottom:0.88mm;background: #fafafa;"><font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><b>1.</b></span></font> <font color="#404040" face="宋体" size="2"><span style="font-size:10pt"><b>下载</b></span></font><font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><b>Redis</b></span></font> <font color="#404040" face="宋体" size="2"><span style="font-size:10pt"><b>并且使用下面的命令编译安装：</b></span></font></p><p><a href="http://www.open-open.com/lib/view/open1411819063437.html"><font color="#005FA9" face="Consolas" size="2"><span style="font-size:10pt"><u>?</u></span></font></a></p><table cellpadding="0" cellspacing="0" style="table-layout: fixed; border-collapse: collapse; border: none;" width="479"><colgroup><col width="8"></col><col width="471"></col></colgroup><tbody><tr><td align="right" style="border: solid #010101 0px;" valign="top" width="8"><font color="#AFAFAF" face="Consolas" size="2"><span style="font-size:10pt">1</span></font><div style="border-right: solid 2px #435a5f;"><div align="right" style="background: #1b2426;"><font color="#AFAFAF" face="Consolas" size="2"><span style="font-size:10pt">2</span></font></div></div><div style="border-right: solid 2px #435a5f;"><div align="right" style="background: #1b2426;"><font color="#AFAFAF" face="Consolas" size="2"><span style="font-size:10pt">3</span></font></div></div><div style="border-right: solid 2px #435a5f;"><div align="right" style="background: #1b2426;"><font color="#AFAFAF" face="Consolas" size="2"><span style="font-size:10pt">4</span></font></div></div></td><td align="left" style="border: solid #010101 0px;" valign="top" width="471"><font color="#B9BDB6" face="Consolas" size="2"><span style="font-size:10pt"><b>wget http:</b></span></font><font color="#878A85" face="Consolas" size="2"><span style="font-size:10pt"><b>//download.redis.io/redis-stable.tar.gz</b></span></font><div align="left" style="background: #1b2426;"><font color="#B9BDB6" face="Consolas" size="2"><span style="font-size:10pt"><b>tar xvzf redis-stable.tar.gz</b></span></font></div><div align="left" style="background: #1b2426;"><font color="#B9BDB6" face="Consolas" size="2"><span style="font-size:10pt"><b>cd redis-stable</b></span></font></div><div align="left" style="background: #1b2426;"><font color="#B9BDB6" face="Consolas" size="2"><span style="font-size:10pt"><b>make</b></span></font></div></td></tr></tbody></table><p style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:0.88mm; margin-bottom:0.88mm;background: #fafafa;"><font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><b>2.</b></span></font> <font color="#404040" face="宋体" size="2"><span style="font-size:10pt"><b>使用如下命令启动</b></span></font><font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><b>Redis</b></span></font></p><p><a href="http://www.open-open.com/lib/view/open1411819063437.html"><font color="#005FA9" face="Consolas" size="2"><span style="font-size:10pt"><u>?</u></span></font></a></p><table cellpadding="0" cellspacing="0" style="table-layout: fixed; border-collapse: collapse; border: none;" width="479"><colgroup><col width="8"></col><col width="471"></col></colgroup><tbody><tr><td align="right" style="border: solid #010101 0px;" valign="top" width="8"><font color="#AFAFAF" face="Consolas" size="2"><span style="font-size:10pt">1</span></font><div style="border-right: solid 2px #435a5f;"><div align="right" style="background: #1b2426;"><font color="#AFAFAF" face="Consolas" size="2"><span style="font-size:10pt">2</span></font></div></div></td><td align="left" style="border: solid #010101 0px;" valign="top" width="471"><font color="#B9BDB6" face="Consolas" size="2"><span style="font-size:10pt"><b>cd RedisDirectory/src</b></span></font><div align="left" style="background: #1b2426;"><font color="#B9BDB6" face="Consolas" size="2"><span style="font-size:10pt"><b>./redis-server --port</b></span> <span style="font-size:10pt"> </span></font><font color="#009900" face="Consolas" size="2"><span style="font-size:10pt"><b>6379</b></span></font></div></td></tr></tbody></table><p style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:0.88mm; margin-bottom:0.88mm;background: #fafafa;"><font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><b>3.</b></span></font> <font color="#404040" face="宋体" size="2"><span style="font-size:10pt"><b>下载最新的</b></span></font><font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><b>Tomcat 7</b></span></font></p><p style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:0.88mm; margin-bottom:0.88mm;background: #fafafa;"><font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><b>4.</b></span></font> <font color="#404040" face="宋体" size="2"><span style="font-size:10pt"><b>下载最新的</b></span></font><font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><b>Jedis</b></span></font><font color="#404040" face="宋体" size="2"><span style="font-size:10pt"><b>（一个</b></span></font> <font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><b>Redis</b></span></font> <font color="#404040" face="宋体" size="2"><span style="font-size:10pt"><b>的</b></span></font><font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><b>Java</b></span></font><font color="#404040" face="宋体" size="2"><span style="font-size:10pt"><b>客户端），</b></span></font> <font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><b>Tomcat Redis Session Manager</b></span></font> <font color="#404040" face="宋体" size="2"><span style="font-size:10pt"><b>和</b></span></font> <font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><b>Apache Commons Pool</b></span></font></p><p style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:0.88mm; margin-bottom:0.88mm;background: #fafafa;"><font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><b>5.</b></span></font> <font color="#404040" face="宋体" size="2"><span style="font-size:10pt"><b>将上面所有的</b></span></font><font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><b>Jar</b></span></font><font color="#404040" face="宋体" size="2"><span style="font-size:10pt"><b>包都拷到</b></span></font> <font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><b>Tomcat7</b></span></font><font color="#404040" face="宋体" size="2"><span style="font-size:10pt"><b>安装目录下面的</b></span></font><font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><b>Lib</b></span></font><font color="#404040" face="宋体" size="2"><span style="font-size:10pt"><b>目录下</b></span></font></p><p style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:0.88mm; margin-bottom:0.88mm;background: #fafafa;"><font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><b>6.</b></span></font> <font color="#404040" face="宋体" size="2"><span style="font-size:10pt"><b>在</b></span></font><font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><b>Tomcat</b></span></font> <font color="#404040" face="宋体" size="2"><span style="font-size:10pt"><b>的</b></span></font><font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><b>conf/context.xml</b></span></font> <font color="#404040" face="宋体" size="2"><span style="font-size:10pt"><b>文件里增加如下内容（或者在</b></span></font><font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><b>server.xml</b></span></font><font color="#404040" face="宋体" size="2"><span style="font-size:10pt"><b>的</b></span></font><font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><b>context</b></span></font> <font color="#404040" face="宋体" size="2"><span style="font-size:10pt"><b>块中添加）：</b></span></font></p><p><a href="http://www.open-open.com/lib/view/open1411819063437.html"><font color="#005FA9" face="Consolas" size="2"><span style="font-size:10pt"><u>?</u></span></font></a></p><table cellpadding="0" cellspacing="0" style="table-layout: fixed; border-collapse: collapse; border: none;" width="539"><colgroup><col width="8"></col><col width="531"></col></colgroup><tbody><tr><td align="right" style="border: solid #010101 0px;" valign="top" width="8"><font color="#AFAFAF" face="Consolas" size="2"><span style="font-size:10pt">1</span></font><div style="border-right: solid 2px #435a5f;"><div align="right" style="background: #1b2426;"><font color="#AFAFAF" face="Consolas" size="2"><span style="font-size:10pt">2</span></font></div></div><div style="border-right: solid 2px #435a5f;"><div align="right" style="background: #1b2426;"><font color="#AFAFAF" face="Consolas" size="2"><span style="font-size:10pt">3</span></font></div></div><div style="border-right: solid 2px #435a5f;"><div align="right" style="background: #1b2426;"><font color="#AFAFAF" face="Consolas" size="2"><span style="font-size:10pt">4</span></font></div></div><div style="border-right: solid 2px #435a5f;"><div align="right" style="background: #1b2426;"><font color="#AFAFAF" face="Consolas" size="2"><span style="font-size:10pt">5</span></font></div></div><div style="border-right: solid 2px #435a5f;"><div align="right" style="background: #1b2426;"><font color="#AFAFAF" face="Consolas" size="2"><span style="font-size:10pt">6</span></font></div></div></td><td align="left" style="border: solid #010101 0px;" valign="top" width="531"><font color="#B9BDB6" face="Consolas" size="2"><span style="font-size:10pt"><b>&lt;Valve className=</b></span></font><font color="#5CE638" face="Consolas" size="2"><span style="font-size:10pt"><b>&quot;com.radiadesign.catalina.session.RedisSessionHandlerValve&quot;</b></span></font> <font color="#B9BDB6" face="Consolas" size="2"><span style="font-size:10pt"><b>/&gt;</b></span></font><div align="left" style="background: #1b2426;"><font color="#B9BDB6" face="Consolas" size="2"><span style="font-size:10pt"><b>&lt;Manager className=</b></span></font><font color="#5CE638" face="Consolas" size="2"><span style="font-size:10pt"><b>&quot;com.radiadesign.catalina.session.RedisSessionManager&quot;</b></span></font></div><div align="left" style="background: #1b2426;"><font color="#010101" face="Consolas" size="2"><span style="font-size:10pt"><b>                   </b></span></font> <font color="#B9BDB6" face="Consolas" size="2"><span style="font-size:10pt"><b>host=</b></span></font> <font color="#5CE638" face="Consolas" size="2"><span style="font-size:10pt"><b>&quot;localhost&quot;</b></span></font> <font color="#B9BDB6" face="Consolas" size="2"><span style="font-size:10pt"><b>&lt;!-- 可选，默认是</b></span></font> <font color="#5CE638" face="Consolas" size="2"><span style="font-size:10pt"><b>&quot;localhost&quot;</b></span></font> <font color="#B9BDB6" face="Consolas" size="2"><span style="font-size:10pt"><b>--&gt;</b></span></font></div><div align="left" style="background: #1b2426;"><font color="#010101" face="Consolas" size="2"><span style="font-size:10pt"><b>                   </b></span></font> <font color="#B9BDB6" face="Consolas" size="2"><span style="font-size:10pt"><b>port=</b></span></font> <font color="#5CE638" face="Consolas" size="2"><span style="font-size:10pt"><b>&quot;6379&quot;</b></span></font> <font color="#B9BDB6" face="Consolas" size="2"><span style="font-size:10pt"><b>&lt;!-- 可选，默认是</b></span> <span style="font-size:10pt"> </span></font><font color="#5CE638" face="Consolas" size="2"><span style="font-size:10pt"><b>&quot;6379&quot;</b></span></font> <font color="#B9BDB6" face="Consolas" size="2"><span style="font-size:10pt"><b>--&gt;</b></span></font></div><div align="left" style="background: #1b2426;"><font color="#010101" face="Consolas" size="2"><span style="font-size:10pt"><b>                   </b></span></font> <font color="#B9BDB6" face="Consolas" size="2"><span style="font-size:10pt"><b>database=</b></span></font> <font color="#5CE638" face="Consolas" size="2"><span style="font-size:10pt"><b>&quot;0&quot;</b></span></font> <font color="#B9BDB6" face="Consolas" size="2"><span style="font-size:10pt"><b>&lt;!-- 可选，默认是</b></span> <span style="font-size:10pt"> </span></font><font color="#5CE638" face="Consolas" size="2"><span style="font-size:10pt"><b>&quot;0&quot;</b></span></font> <font color="#B9BDB6" face="Consolas" size="2"><span style="font-size:10pt"><b>--&gt;</b></span></font></div><div align="left" style="background: #1b2426;"><font color="#010101" face="Consolas" size="2"><span style="font-size:10pt"><b>                   </b></span></font> <font color="#B9BDB6" face="Consolas" size="2"><span style="font-size:10pt"><b>maxInactiveInterval=</b></span></font> <font color="#5CE638" face="Consolas" size="2"><span style="font-size:10pt"><b>&quot;60&quot;</b></span></font> <font color="#B9BDB6" face="Consolas" size="2"><span style="font-size:10pt"><b>&lt;!-- 可选，默认是</b></span> <span style="font-size:10pt"> </span></font><font color="#5CE638" face="Consolas" size="2"><span style="font-size:10pt"><b>&quot;60&quot;</b></span></font> <font color="#B9BDB6" face="Consolas" size="2"><span style="font-size:10pt"><b>（单位：秒）--&gt; /&gt;</b></span></font></div></td></tr></tbody></table><p style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:0.88mm; margin-bottom:0.88mm;background: #fafafa;"><font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><b>7.</b></span></font> <font color="#404040" face="宋体" size="2"><span style="font-size:10pt"><b>重启</b></span></font><font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><b>Tomcat7</b></span></font> <font color="#404040" face="宋体" size="2"><span style="font-size:10pt"><b>，你现你可以看到，</b></span></font> <font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><b>Session</b></span></font><font color="#404040" face="宋体" size="2"><span style="font-size:10pt"><b>的内容开始在</b></span></font><font color="#404040" face="Arial" size="2"><span style="font-size:10pt"><b>Redis</b></span></font><font color="#404040" face="宋体" size="2"><span style="font-size:10pt"><b>中创建了。</b></span></font></p><p style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:1.76mm; margin-bottom:1.76mm;background: #fafafa;"><font color="#404040" face="宋体" size="2"><span style="font-size:10pt">现在，</span></font><font color="#404040" face="Arial" size="2"><span style="font-size:10pt">Tomcat7</span></font> <font color="#404040" face="宋体" size="2"><span style="font-size:10pt">的</span></font><font color="#404040" face="Arial" size="2"><span style="font-size:10pt">Session</span></font><font color="#404040" face="宋体" size="2"><span style="font-size:10pt">就保存到</span></font> <font color="#404040" face="Arial" size="2"><span style="font-size:10pt">Redis</span></font><font color="#404040" face="宋体" size="2"><span style="font-size:10pt">中了，而且它也维护着</span></font><font color="#404040" face="Arial" size="2"><span style="font-size:10pt">Session</span></font><font color="#404040" face="宋体" size="2"><span style="font-size:10pt">的不同方面。</span></font></p><p style="margin-left:0mm; margin-right:0mm; text-indent:0mm; margin-top:0.88mm; margin-bottom:0.88mm;background: #fafafa;"><font color="#404040" face="宋体" size="2"><span style="font-size:10pt"><b>各个组件的下载地址：</b></span></font></p><p><a href="http://www.open-open.com/lib/view/open1411819063437.html"><font color="#005FA9" face="Consolas" size="2"><span style="font-size:10pt"><u>?</u></span></font></a></p><table cellpadding="0" cellspacing="0" style="table-layout: fixed; border-collapse: collapse; border: none;" width="543"><colgroup><col width="8"></col><col width="535"></col></colgroup><tbody><tr><td align="right" style="border: solid #010101 0px;" valign="top" width="8"><font color="#AFAFAF" face="Consolas" size="2"><span style="font-size:10pt">1</span></font><div style="border-right: solid 2px #435a5f;"><div align="right" style="background: #1b2426;"><font color="#AFAFAF" face="Consolas" size="2"><span style="font-size:10pt">2</span></font></div></div><div style="border-right: solid 2px #435a5f;"><div align="right" style="background: #1b2426;"><font color="#AFAFAF" face="Consolas" size="2"><span style="font-size:10pt">3</span></font></div></div><div style="border-right: solid 2px #435a5f;"><div align="right" style="background: #1b2426;"><font color="#AFAFAF" face="Consolas" size="2"><span style="font-size:10pt">4</span></font></div></div></td><td align="left" style="border: solid #010101 0px;" valign="top" width="535"><font color="#B9BDB6" face="Consolas" size="2"><span style="font-size:10pt"><b>Redis：http:</b></span></font><font color="#878A85" face="Consolas" size="2"><span style="font-size:10pt"><b>//redis.io/</b></span></font><div align="left" style="background: #1b2426;"><font color="#B9BDB6" face="Consolas" size="2"><span style="font-size:10pt"><b>JRedis: https:</b></span></font> <font color="#878A85" face="Consolas" size="2"><span style="font-size:10pt"><b>//github.com/xetorthio/jedis</b></span></font></div><div align="left" style="background: #1b2426;"><font color="#B9BDB6" face="Consolas" size="2"><span style="font-size:10pt"><b>Tomcat Redis Session Manager ：https:</b></span></font> <font color="#878A85" face="Consolas" size="2"><span style="font-size:10pt"><b>//github.com/jcoleman/tomcat-redis-session-manager/downloads</b></span></font></div><div align="left" style="background: #1b2426;"><font color="#B9BDB6" face="Consolas" size="2"><span style="font-size:10pt"><b>Apache Commons Pool ：http:</b></span></font> <font color="#878A85" face="Consolas" size="2"><span style="font-size:10pt"><b>//commons.apache.org/proper/commons-pool/download_pool.cgi</b></span></font></div></td></tr></tbody></table><div align="left"><font color="#404040" face="宋体" size="2"><span style="font-size:10pt">来自：</span></font> <font color="#404040" face="Arial" size="2"><span style="font-size:10pt">http://my.oschina.net/gccr/blog/321083</span></font></div></span>
</div>
<hr>
<a name="453"/>

<div>
<span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><a name="1272"></a><div><br/></div><h1>9.2：安装PHP可能会遇到的问题无标题笔记</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">PHP安装过程出问题时，看看是否需要安装下面的哲别包...<br/>
yum -y install libevent libevent-devel<br/>
yum -y install libxml2 libxml2-devel<br/>
yum -y install curl-devel<br/>
yum -y install libpng-devel<br/>
yum install libjpeg-devel<br/>
yum install freetype-devel<br/>
yum -y install libtool-ltdl-devel<br/>
yum -y install libmcrypt libmcrypt-devel</span></div></span>
</div>
<hr>
<a name="454"/>

<div>
<span><a name="1246"></a><h1>1.3：MySQL 主从配置上的一些操作要点</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">A: 判断主数据库是否能连接上（主要repl是实际的主从用户名，要根据实际相关相应修改）：<br/>
mysql -urepl -prepl -h 192.168.5.209<br/><br/>
B：查看从数据库状态（出现如下记录才是说明主从配置成功）<br/>
show slave status\G;<br/>
mysql&gt; show slave status\G;<br/>
*************************** 1. row ***************************<br/>
               Slave_IO_State: Waiting for master to send event<br/>
                  Master_Host: 192.168.5.209<br/>
                  Master_User: repl<br/>
                  Master_Port: 3306<br/>
                Connect_Retry: 60<br/>
              Master_Log_File: mysql-bin.000002<br/>
          Read_Master_Log_Pos: 485<br/>
               Relay_Log_File: MySQL2-relay-bin.000003<br/>
                Relay_Log_Pos: 631<br/>
        Relay_Master_Log_File: mysql-bin.000002<br/>
             Slave_IO_Running: Yes<br/>
            Slave_SQL_Running: Yes<br/>
              Replicate_Do_DB:<br/>
          Replicate_Ignore_DB:<br/>
           Replicate_Do_Table:<br/>
       Replicate_Ignore_Table:<br/>
      Replicate_Wild_Do_Table:<br/>
  Replicate_Wild_Ignore_Table:<br/>
                   Last_Errno: 0<br/>
                   Last_Error:<br/>
                 Skip_Counter: 0<br/>
          Exec_Master_Log_Pos: 485<br/>
              Relay_Log_Space: 1083<br/>
              Until_Condition: None<br/>
               Until_Log_File:<br/>
                Until_Log_Pos: 0<br/>
           Master_SSL_Allowed: No<br/>
           Master_SSL_CA_File:<br/>
           Master_SSL_CA_Path:<br/>
              Master_SSL_Cert:<br/>
            Master_SSL_Cipher:<br/>
               Master_SSL_Key:<br/>
        Seconds_Behind_Master: 0<br/>
Master_SSL_Verify_Server_Cert: No<br/>
                Last_IO_Errno: 0<br/>
                Last_IO_Error:<br/>
               Last_SQL_Errno: 0<br/>
               Last_SQL_Error:<br/>
  Replicate_Ignore_Server_Ids:<br/>
             Master_Server_Id: 1<br/>
1 row in set (0.00 sec)<br/><br/>
ERROR:<br/>
No query specified<br/><br/>
C：查看主数据库有哪些用户:<br/>
select user,host from mysql.user;<br/>
mysql&gt; select user,host from mysql.user;<br/>
+-------+---------------+<br/>
| user  | host          |<br/>
+-------+---------------+<br/>
| root  | %             |<br/>
| ruida | %             |<br/>
| root  | 127.0.0.1     |<br/>
| repl  | 192.168.5.210 |<br/>
| root  | ::1           |<br/>
|       | localhost     |<br/>
| root  | localhost     |<br/>
|       | mysql1        |<br/>
| root  | mysql1        |<br/>
+-------+---------------+<br/>
9 rows in set (0.00 sec)<br/>
D: delete from mysql.user where user='repl';<br/></span></div></span>
</div>
<hr>
<a name="455"/>

<div>
<span><a name="1248"></a><h1>1.4：MySQL 常用操作手册</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">资料来源网址：<br/>
http://www.cnblogs.com/zhenmingliu/archive/2012/05/25/2518691.html<br/><br/>
MySQL常规练习 .MySQL安装成功后的进入方式<br/>
1、MySQL安装成功后的进入方式<br/>
/第一种方式进入：<br/>
点击开始---&gt;所有程序---&gt;Mysql--&gt;Mysql Server5.0---&gt;Mysql Command Line Client 点击<br/>
提示Enter password: root  回车<br/>
即可进入Mysql操作界面：<br/>
show databases;//显示所有的数据库<br/>
use test;//选择并使用test数据库<br/>
show tables;//显示test库中所有表<br/>
 <br/>
exit 退出<br/>
 <br/>
第二种进入方式：<br/>
开始--运行输入cmd 回车<br/>
cd/进入 c盘根目录<br/>
cd 切换到：<br/>
C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br/>
在此目录中采用<br/>
mysql - u root -p<br/>
mysql -h 127.0.0.1 -u root -p root<br/>
回车<br/>
提示Enter password: root  回车<br/>
即可进入Mysql操作界面：<br/>
show databases;//显示所有的数据库<br/>
use test;//选择并使用test数据库<br/>
show tables;//显示test库中所有表<br/>
 <br/>
exit 退出<br/>
 <br/>
第三种方式进入：<br/>
开始--运行输入cmd 回车<br/>
cd/进入 c盘根目录<br/>
cd 切换到：<br/>
C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br/>
在此目录中采用<br/>
mysql - u root -p  数据库名称 <br/>
mysql -h 127.0.0.1 -u root -p root 数据库名称<br/>
回车<br/>
即可进入Mysql操作界面： 在此种直接可以使用 book数据库<br/>
show tables;//显示test库中所有表<br/><br/>
mysql密码设置<br/>
2、密码设置：<br/>
当用户没有设置密码时：<br/>
添加密码：<br/>
mysqladmin -uroot -password ab12 <br/>
  注：因为开始时root没有密码，所以-p旧密码一项就可以省略了。<br/>
当用户存在密码时：<br/>
修改密码：<br/>
cd/进入 c盘根目录<br/>
cd 切换到：<br/>
C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br/>
采用命令：<br/>
mysqladmin -uroot -proot password 123<br/>
回车后密码及更新为123；<br/><br/>
MySQL常规练习 .MySQL安装成功后的进入方式<br/>
1、MySQL安装成功后的进入方式<br/>
/第一种方式进入：<br/>
点击开始---&gt;所有程序---&gt;Mysql--&gt;Mysql Server5.0---&gt;Mysql Command Line Client 点击<br/>
提示Enter password: root  回车<br/>
即可进入Mysql操作界面：<br/>
show databases;//显示所有的数据库<br/>
use test;//选择并使用test数据库<br/>
show tables;//显示test库中所有表<br/>
exit 退出<br/>
 <br/>
第二种进入方式：<br/>
开始--运行输入cmd 回车<br/>
cd/进入 c盘根目录<br/>
cd 切换到：<br/>
C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br/>
在此目录中采用<br/>
mysql - u root -p<br/>
mysql -h 127.0.0.1 -u root -p root<br/>
回车<br/>
提示Enter password: root  回车<br/>
即可进入Mysql操作界面：<br/>
show databases;//显示所有的数据库<br/>
use test;//选择并使用test数据库<br/>
show tables;//显示test库中所有表<br/>
exit 退出<br/>
 <br/>
第三种方式进入：<br/>
开始--运行输入cmd 回车<br/>
cd/进入 c盘根目录<br/>
cd 切换到：<br/>
C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br/>
在此目录中采用<br/>
mysql - u root -p  数据库名称 <br/>
mysql -h 127.0.0.1 -u root -p root 数据库名称<br/>
回车<br/>
即可进入Mysql操作界面： 在此种直接可以使用 book数据库<br/>
show tables;//显示test库中所有表<br/><br/>
mysql密码设置<br/>
2、密码设置：<br/>
当用户没有设置密码时：<br/>
添加密码：<br/>
mysqladmin -uroot -password ab12 <br/>
  注：因为开始时root没有密码，所以-p旧密码一项就可以省略了。<br/>
 <br/>
当用户存在密码时：<br/>
修改密码：<br/>
cd/进入 c盘根目录<br/>
cd 切换到：<br/>
C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br/>
采用命令：<br/>
mysqladmin -uroot -proot password 123<br/>
回车后密码及更新为123；<br/><br/>
mysql 增加用户<br/>
3、增加用户：<br/>
（注意：和上面不同，下面的因为是MYSQL环境中的命令，所以后面都带一个分号作为命令结束符） <br/>
  格式：grant select on 数据库.* to 用户名@登录主机 identified by “密码”<br/>
 <br/>
   第一种：<br/>
 增加一个用户test1密码为abc，让他可以在任何主机上登录，并对所有数据库有查询、插入、修改、删除的权限。首先用以root用户连入MYSQL，然后键入以下命令： <br/>
  grant select,insert,update,delete on *.* to test1@&quot;%&quot; Identified by &quot;abc&quot;;<br/>
 <br/>
  但增加的用户是十分危险的，你想如某个人知道test1的密码，那么他就可以在internet上的任何一台电脑上登录你的mysql数据库并对你的数据可以为所欲为了，解决办法见例第二种： <br/>
  第一种：增加一个用户test2密码为abc,让他只可以在localhost上登录，并可以对数据库mydb进行查询、插入、修改、删除的操作（localhost指本地主机，即MYSQL数据库所在的那台主机），这样用户即使用知道test2的密码，他也无法从internet上直接访问数<br/>
mysql&gt; grant select,insert,update,delete on book.* to test2@localhost Identified by &quot;abc&quot;;<br/>
 <br/>
  如果你不想test2有密码，可以再打一个命令将密码消掉。 <br/>
mysql&gt; grant select,insert,update,delete on book.* to test2@localhost Identified by &quot;&quot;;<br/><br/>
mysql 把指定用户的权限开通出来<br/>
grant all on *.* to root@'192.168.5.%' identified by 'ruida~'<br/><br/>
mysql 查看错误日志<br/>
tail -30 ../logs/error.log<br/><br/>
mysql 使得表名不区分大小写<br/>
LINUX下的MYSQL默认是要区分表名大小写的，哎，弄了那么旧，害死我了。<br/>
  让MYSQL不区分表名大小写的方法其实很简单：<br/>
  1.用ROOT登录，修改/etc/my.cnf<br/>
  2.在[mysqld]下加入一行：lower_case_table_names=1<br/>
  3.重新启动数据库即可</span></div></span>
</div>
<hr>
<a name="456"/>

<div>
<span><a name="1284"></a><h1>ftp 防火墙</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">CentOS/RHEL如何设置防火墙允许被动FTP连接<br/>
Sat, 11/21/2009 - 16:46 - tlbluestar<br/>
参考地址： <a href="http://lists.centos.org/pipermail/centos/2005-December/015896.html">http://lists.centos.org/pipermail/centos/2005-December/015896.html</a></span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">关于被动FTP的工作原理，请参阅此文。<br/>
(1)首先修改防火墙iptables的规则，添加如下内容：<br/>
[root@dlghost sysconfig]# vi /etc/sysconfig/iptables<br/>
-A RH-Firewall-1-INPUT -m state --state ESTABLISHED -m tcp -p tcp --sport 1024: --dport 1024: -j ACCEPT<br/>
(2)然后将ip_nat_ftp添加为自动加载模块：<br/>
# cat /etc/sysconfig/iptables-config | grep ip_nat_ftp<br/>
IPTABLES_MODULES=&quot;ip_nat_ftp&quot;<br/>
(3)重新启动iptables防火墙：<br/>
# /etc/init.d/iptables condrestart<br/><br/><br/><br/><br/><br/>
在 /etc/sysconfig/iptables 编辑<br/><br/>
[root@nginx2 ~]# vi /etc/sysconfig/iptables<br/><br/>
# Generated by iptables-save v1.4.7 on Fri Dec 12 20:37:55 2014<br/>
*filter<br/>
:INPUT ACCEPT [0:0]<br/>
:FORWARD ACCEPT [0:0]<br/>
:OUTPUT ACCEPT [0:0]<br/>
-A INPUT -p tcp -m tcp --dport 21 -j ACCEPT<br/>
-A INPUT -p tcp -m tcp --dport 20 -j ACCEPT<br/>
-A INPUT -p icmp -j ACCEPT<br/>
-A INPUT -s 127.0.0.1/32 -d 127.0.0.1/32 -j ACCEPT<br/>
-A INPUT -p tcp -m tcp --dport 80 -j ACCEPT<br/>
-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT<br/>
-A INPUT -p icmp -j ACCEPT<br/>
-A INPUT -i lo -j ACCEPT<br/>
-A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT<br/>
-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT<br/>
-A INPUT -j REJECT --reject-with icmp-host-prohibited<br/>
-A INPUT -j REJECT --reject-with icmp-port-unreachable<br/>
-A FORWARD -j REJECT --reject-with icmp-host-prohibited<br/>
-A FORWARD -j REJECT --reject-with icmp-port-unreachable<br/>
-A OUTPUT -j ACCEPT<br/>
COMMIT<br/>
# Completed on Fri Dec 12 20:37:55 2014</span></div></div></span>
</div>
<hr>
<a name="457"/>

<div>
<span><a name="1278"></a><h1>B：数据库配置信息</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">装完数据库时，第一次添加的用户名跟密码为：<br/>
root<br/>
root<br/><br/>
服务器内部使用（局域网用）<br/>
ruida<br/>
ruida~<br/><br/>
服务器外部使用<br/>
ruida1<br/>
ruida1~</span></div></span>
</div>
<hr>
<a name="460"/>

<div>
<span><a name="1280"></a><h1>C：6台服务器磁盘分区列表</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">A：nginx主：192.168.5.205<br/>
Filesystem            Size  Used Avail Use% Mounted on<br/>
/dev/sda1             233G  4.8G  216G   3% /<br/>
tmpfs                  32G  112K   32G   1% /dev/shm<br/>
/dev/sdb1             1.5T  223M  1.4T   1% /boot<br/>
/dev/sdb2            1013G  200M  961G   1% /home<br/><br/>
B：nginx备：192.168.5.206<br/>
Filesystem            Size  Used Avail Use% Mounted on<br/>
/dev/sda1             233G  170G   52G  77% /<br/>
tmpfs                  32G  240K   32G   1% /dev/shm<br/>
/dev/sdb1             1.5T  165G  1.2T  13% /boot<br/>
/dev/sdb2            1013G  200M  961G   1% /home<br/><br/>
C：tomcat1：192.168.5.201<br/>
Filesystem            Size  Used Avail Use% Mounted on<br/>
/dev/sda1             233G  4.2G  217G   2% /<br/>
tmpfs                  32G     0   32G   0% /dev/shm<br/>
/dev/sdb1             1.5T  223M  1.4T   1% /boot<br/>
/dev/sdb2            1013G  200M  961G   1% /home<br/><br/>
D：tomcat2：192.168.5.202<br/>
Filesystem      Size  Used Avail Use% Mounted on<br/>
/dev/sda3       232G  490M  220G   1% /<br/>
tmpfs            32G     0   32G   0% /dev/shmE<br/>
/dev/sda1      1008M   62M  896M   7% /boot<br/>
/dev/sdb2       1.5T  198M  1.4T   1% /home<br/>
/dev/sdb1       1.9T  3.7G  1.8T   1% /usr<br/><br/>
E：MySQL主：192.168.5.204<br/>
Filesystem            Size  Used Avail Use% Mounted on<br/>
/dev/sda2             962G  4.4G  909G   1% /<br/>
tmpfs                 7.8G     0  7.8G   0% /dev/shm<br/>
/dev/sda1             856G  226M  813G   1% /boot<br/><br/>
F：MySQL从：192.168.5.203<br/>
Filesystem            Size  Used Avail Use% Mounted on<br/>
/dev/sda2             962G  4.4G  909G   1% /<br/>
tmpfs                 7.8G     0  7.8G   0% /dev/shm<br/>
/dev/sda1             856G  226M  813G   1% /boot<br/></span></div></span>
</div>
<hr>
<a name="461"/>

<div>
<span><a name="1254"></a><h1>4.1 ：安装tomcat</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
（1）上传：apache-tomcat-6.0.39.zip<br/>
（2）解压：unzip apache-tomcat-6.0.39.zip<br/>
        如果提示： unzip: command not found<br/>
        则安装：yum install -y unzip zip<br/>
（3）mv apache-tomcat-6.0.39 /usr/local/tomcat<br/>
（4）cd /usr/local/tomcat<br/>
（5）chmod +x bin/*<br/>
（6）./bin/startup.sh<br/>
     Using CATALINA_BASE:   /usr/local/tomcat<br/>
     Using CATALINA_HOME:   /usr/local/tomcat<br/>
     Using CATALINA_TMPDIR: /usr/local/tomcat/temp<br/>
     Using JRE_HOME:        /usr/java/jdk1.6.0_38<br/>
     Using CLASSPATH:       /usr/local/tomcat/bin/bootstrap.jar<br/>
（7）ps -ef|grep tomcat<br/>
（8）netstat -npl|grep java<br/>
     tcp        0      0 ::ffff:127.0.0.1:8005       :::*                        LISTEN      10923/java         <br/>
     tcp        0      0 :::8009                     :::*                        LISTEN      10923/java         <br/>
     tcp        0      0 :::8080                     :::*                        LISTEN      10923/java  </span></div></span>
</div>
<hr>
<a name="463"/>

<div>
<span><a name="1274"></a><h1>10.1 分布式文件系统</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">Glusterfs 分布式文件系统配置笔记192.168.5.166<br/><br/>
六台机子信息：<br/>
Nginx主机远程ip为58.22.30.37，端口为166，本机ip为192.168.5.166<br/>
Nginx备机远程ip为58.22.30.37，端口为168，本机ip为192.168.5.168<br/>
Tomcat1从远程ip为58.22.30.37，端口为211，本机ip为192.168.5.211<br/>
Tomcat2主远程ip为58.22.30.37，端口为169，本机ip为192.168.5.169<br/>
MYSQL1远程ip为58.22.30.37，端口为209，本机ip为192.168.5.209<br/>
MYSQL2远程ip为58.22.30.37，端口为210，本机ip为192.168.5.210<br/><br/>
服务端：<br/>
Tomcat1为：192.168.5.211<br/>
Tomcat2为：192.168.5.169<br/>
MYSQL1 为：192.168.5.209<br/>
MYSQL2 为：192.168.5.210<br/><br/>
客户端：<br/>
nginx1 为：192.168.5.166<br/>
nginx2 为：192.168.5.168<br/><br/>
（1）在四台服务端都执行：<br/>
vi /etc/yum.repos.d/glusterfs-epel.repo<br/><br/>
输入：<br/>
[glusterfs-epel]<br/>
name=GlusterFS is a clustered file-system capable of scaling to several petabytes.<br/>
baseurl=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-$releasever/$basearch/<br/>
enabled=1<br/>
skip_if_unavailable=1<br/>
gpgcheck=1<br/>
gpgkey=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/pub.key<br/>
[glusterfs-noarch-epel]<br/>
name=GlusterFS is a clustered file-system capable of scaling to several petabytes.<br/>
baseurl=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-$releasever/noarch<br/>
enabled=1<br/>
skip_if_unavailable=1<br/>
gpgcheck=1<br/>
gpgkey=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/pub.key<br/>
[glusterfs-source-epel]<br/>
name=GlusterFS is a clustered file-system capable of scaling to several petabytes. - Source<br/>
baseurl=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-$releasever/SRPMS<br/>
enabled=0<br/>
skip_if_unavailable=1<br/>
gpgcheck=1<br/>
gpgkey=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/pub.key<br/><br/>
（2）在四台服务器上都执行：<br/>
yum install glusterfs glusterfs-server<br/><br/>
（3）在四台服务器上都执行，启动服务：<br/>
service glusterd start<br/><br/>
（4）将用于存储的主机加入到“存储池”，这边只要在四台服务器任选一台执行，这边就选择Tomcat1：192.168.5.211，执行如下：<br/>
gluster peer probe 192.168.5.169<br/>
gluster peer probe 192.168.5.209<br/>
gluster peer probe 192.168.5.210<br/><br/>
（5）存储池内的信息（任一台），这边选择Tomcat1：192.168.5.211<br/>
gluster peer status<br/>
结果例如：<br/>
Number of Peers: 3<br/><br/>
Hostname: 192.168.5.169<br/>
Uuid: 3801e9ac-cb0b-4631-a37a-bf331936d3db<br/>
State: Peer in Cluster (Connected)<br/><br/>
Hostname: 192.168.5.209<br/>
Uuid: 6e60328f-f02b-4cd9-a495-48dc7f61ec2a<br/>
State: Peer in Cluster (Connected)<br/><br/>
Hostname: 192.168.5.210<br/>
Uuid: f0a7a5bc-b01e-46dc-a132-d9e59754fc35<br/>
State: Peer in Cluster (Connected)<br/><br/>
（6）df -h 并挂接分区<br/>
mount -t ntfs-3g /dev/sda2 /data/ftp-data<br/>
查挂接结果<br/>
mount<br/>
这里分区已经映射到：/home<br/>
df -h /home<br/>
/dev/sda2              25G  172M   24G   1% /home<br/>
mount -t auto /dev/sda2 /home<br/><br/>
（7）Create volume（创建卷）<br/>
Glusterfs的卷有多种可选模式，我们采用其中的两种Distributed和Replicated，其中Distributed类似于磁盘的RAID 0模式；Replicated类似于磁盘的RAID1模式（glusterfs中可以制定副本的数量，这里我们存储两个副本即可）。我们利用此两种模式在4台server间做成类似于RAID 10的模式，提供高性能和高可用的存储服务。<br/>
在任意一台server执行：<br/>
gluster volume create ftp-volume replica 2 192.168.5.211:/data/ftp-data 192.168.5.169:/data/ftp-data 192.168.5.209:/data/ftp-data 192.168.5.210:/data/ftp-data<br/>
gluster volume create ftp-volume replica 2 192.168.5.211:/home 192.168.5.169:/home 192.168.5.209:/home 192.168.5.210:/home<br/>
gluster volume create ftp-volume replica 2 192.168.5.211:/boot 192.168.5.169:/boot 192.168.5.209:/boot 192.168.5.210:/boot<br/>
gluster volume create ftp-volume replica 2 192.168.5.211:/data/ftp-data 192.168.5.169:/home 192.168.5.209:/home 192.168.5.210:/home force   ?????<br/><br/>
##上述命令中：dir为每台服务器上要加入存储池的目录（此目录最好做一个单独分区挂载至此目录）。按照上述命令server2：/dir作为server1:/dir的副本；server4:/dir作为server3:/dir的副本<br/><br/>
（8）gluster volume start ftp-volume<br/>
（9）gluster volume status  状态是N的时候 <font color="#004080" face="微软雅黑" style="text-align: -webkit-left;"><span style="font-size: 12pt;">mount | grep </span></font><span style="text-align: -webkit-left; color: rgb(1, 1, 1); font-family: 宋体; font-size: 12px;">resources</span><br/>
（10）在nginx主：192.168.5.166<br/>
（11）nginx主、备<br/>
yum install glusterfs glusterfs-client<br/><br/>
（12）选择服务器任意一台这边选择tomcat1：192.168.5.211<br/>
mount -t glusterfs 192.168.5.211:/ftp-volume /glusterfs/</span><div><br/>
 
<div>PC六台</div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">mount | grep </span></font><span style="color: rgb(1, 1, 1); font-family: 宋体; font-size: 12px;">resources</span></div><div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font color="#010101" face="宋体" size="1"><span style="font-size:9pt">mount -t glusterfs 192.168.5.209:/resources /glusterfsConsume/</span></font></div><br/>
（13）在/etc/rc.local添加如下内容，以便实现开机自动挂载<br/>
mount -t glusterfs 192.168.5.201:/ftp-volume /glusterfs/  2&gt;/var/log/gluster-client.err<br/><br/>
（14）df -h<br/>
（15）在客户端建立目录或者文件，服务端会自己同步过来<br/><br/>
mount -t glusterfs 192.168.5.112:/ftp-volume /usr/local/nginx/html/ruida/<br/><br/><br/><br/><br/></div></div></div></span>
</div>
<hr>
<a name="470"/>

<div>
<span><a name="1268"></a><h1>8.2：keepalived实现双机热备</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（1）主机：192.168.5.241   备用机：192.168.5.242<br/>
（2）keepalived实现双击热备在 “7.1：redis安装、keepalived部署及实现热备（从11310帧开始）.lxe”<br/>
（3）192.168.5.242：<br/>
     cd /usr/local/keepalived<br/>
（4）192.168.5.242<br/>
     mv /etc/keepalived/keepalived.conf /etc/keepalived/keepalived.conf.org<br/>
（5）192.168.5.242<br/>
         vi /etc/keepalived/keepalived.conf<br/>
输入内容：<br/>
global_defs {<br/>
   notification_email {<br/>
     acassen@firewall.loc<br/>
     failover@firewall.loc<br/>
     sysadmin@firewall.loc<br/>
   }<br/>
   notification_email_from Alexandre.Cassen@firewall.loc<br/>
#smtp_server 192.168.200.1<br/>
#smtp_connect_timeout 30<br/>
   router_id LVS_DEVEL<br/>
}<br/><br/>
vrrp_script check_nginx {<br/>
                script &quot;/root/check_nginx.sh&quot;<br/>
                interval 2<br/>
                weight 2<br/>
}<br/>
vrrp_instance VI_1 {<br/>
    state BACKUP                                     <span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"> ####主用MASTER，从用BACKUP</span><br/>
    interface eth1                                        ###网卡<br/>
    virtual_router_id 51                       ###路由器标识<br/>
    priority 90                                   ###优先级<br/>
    mcast_src_ip 192.168.5.242              ###本机IP<br/>
    advert_int 1                                            <span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">####VRRP Multicast广播周期秒数</span><br/>
    authentication {<br/>
        auth_type PASS<br/>
        auth_pass 1111<br/>
    }<br/>
    virtual_ipaddress {<br/>
        192.168.5.244/24<br/><br/>
}<br/>
（6）192.168.5.242<br/>
     vi /root/check_nginx.sh<br/>
输入：<br/>
#!/bin/bash<br/>
A=`ps -C nginx --no-header |wc -l`<br/>
if [ $A -eq 0 ];then<br/>
     /usr/local/nginx/sbin/nginx<br/>
     sleep 3<br/>
     if [ `ps -C nginx --no-header |wc -l` -eq 0 ];then<br/>
     /etc/init.d/keepalived stop<br/>
     fi<br/>
fi<br/><br/>
（7）192.168.5.241<br/>
     cd /usr/local/keepalived<br/>
（8）192.168.5.241<br/>
     mv /etc/keepalived/keepalived.conf /etc/keepalived/keepalived.conf.org<br/>
（9）192.168.5.241<br/>
     vi /etc/keepalived/keepalived.conf<br/>
     输入：<br/>
global_defs {<br/>
   notification_email {<br/>
     acassen@firewall.loc<br/>
     failover@firewall.loc<br/>
     sysadmin@firewall.loc<br/>
   }<br/>
   notification_email_from Alexandre.Cassen@firewall.loc<br/>
#smtp_server 192.168.200.1<br/>
#smtp_connect_timeout 30<br/>
   router_id LVS_DEVEL<br/>
}<br/><br/>
vrrp_script check_nginx {<br/>
                script &quot;/root/check_nginx.sh&quot;<br/>
                interval 2<br/>
                weight 2<br/>
}<br/>
vrrp_instance VI_1 {<br/>
    state MASTER<br/>
    interface eth0<br/>
    virtual_router_id 51<br/>
    priority 100<br/>
    mcast_src_ip 192.168.5.241<br/>
    advert_int 1<br/>
    authentication {<br/>
        auth_type PASS<br/>
        auth_pass 1111<br/>
    }<br/>
    virtual_ipaddress {<br/>
        192.168.5.244/24<br/><br/>
}<br/>
track_script {<br/>
       check_nginx<br/>
       }<br/>
}<br/><br/>
（10）192.168.5.241<br/>
     vi /root/check_nginx.sh<br/>
输入：<br/>
#!/bin/bash<br/>
A=`ps -C nginx --no-header |wc -l`<br/>
if [ $A -eq 0 ];then<br/>
/usr/local/nginx/sbin/nginx<br/>
sleep 3<br/>
if [ `ps -C nginx --no-header |wc -l` -eq 0 ];then<br/>
/etc/init.d/keepalived stop<br/>
fi<br/>
fi<br/><br/>
注意：记得要对 check_nginx.sh 加执行权限<br/>
chmod +x check_nginx.sh<br/><br/>
查看脚本执行是否正常：<br/>
#sh -x check_nginx.sh<br/>
++ ps -C nginx --no-header<br/>
++ wc -l<br/>
+ A=0<br/>
+ '[' 0 -eq 0 ']'<br/>
+ /usr/local/nginx/sbin/nginx<br/>
+ sleep 3<br/>
++ ps -C nginx --no-header<br/>
++ wc -l<br/>
+ '[' 2 -eq 0 ']'<br/><br/>
（11）192.168.5.241<br/>
     service keepalived restart<br/>
（12）ip a      出现如下内容才是正确：<br/>
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 16436 qdisc noqueue state UNKNOWN<br/>
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00<br/>
    inet 127.0.0.1/8 scope host lo<br/>
    inet6 ::1/128 scope host<br/>
       valid_lft forever preferred_lft forever<br/>
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UNKNOWN qlen 1000<br/>
    link/ether 00:0c:29:dd:73:df brd ff:ff:ff:ff:ff:ff<br/>
    inet 192.168.5.241/24 brd 192.168.5.255 scope global eth0<br/>
    inet6 fe80::20c:29ff:fedd:73df/64 scope link<br/>
       valid_lft forever preferred_lft forever<br/>
通过window的cmd要能拼得通：192.168.5.244<br/><br/>
（13）注意点：<br/>
keeplived的 网卡记得要根据实际情况修改： interface eth0<br/>
如果IP漂移不了，估计是：virtual_router_id 51  那个“51”要修改为“60”<br/>
查看keeplived日志： tail -f /var/log/messages<br/>
重启网卡：service network restart<br/><br/><br/><br/><br/><br/>
关于iptable也是一样，如果开启的话，每台机器都会找不到对方而强制启动成master，这时候会访问到后启动的那台上，关于iptable相关的设置我也尝试了很久，可以用以下抓包监控：<br/><br/>
tcpdump -v -i eth0 host 224.0.0.18<br/>
tcpdump -vvv -n -i eth0 host 224.0.0.18<br/><br/>
看到这个网段内所有进行监听的机器，主要必须是双向的，有去有回才对。<br/><br/>
iptable以下规则可以搞定：<br/><br/>
# /sbin/iptables -I INPUT -i eth0 -d 224.0.0.0/8 -j ACCEPT<br/>
# /sbin/iptables -A INPUT -p 112 -i eth0 -j ACCEPT<br/>
# /sbin/iptables -A OUTPUT -p 112 -o eth0 -j ACCEPT<br/>
# /sbin/service iptables save<br/>
注意网卡eth0是内网还是外网。然后重启iptables，keepalived。<br/><br/>
再检查日志看master和backup是否正确进入各自的状态了。<br/><br/><br/></span></div></span>
</div>
<hr>
<a name="472"/>

<div>
<span><a name="1282"></a><h1>centos全面卸载mysql</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">CentOS下如何完全卸载MySQL？解决卸载不干净的问题<br/><br/>
系统：CentOS 6.5，MySQL：MySql 5.6<br/><br/>
这里主要解决使用rpm安装的卸载问题，安装方法见：CentOS安装mysql*.rpm提示conflicts with file from package的解决办法<br/><br/>
虽然说这里的是使用rpm安装的卸载问题，我觉得使用yum方式安装的如果遇到相同的问题也一样适用。<br/><br/>
查看已经安装的服务<br/>
rpm –qa|grep -i mysql<br/>
-i 作用是不区分大小写<br/><br/>
可以看到有两个安装包<br/>
MySQL-server-5.6.19-1.linux_glibc2.5.x86_64.rpm<br/>
MySQL-client-5.6.19-1.linux_glibc2.5.x86_64.rpm<br/>
删除这两个服务(去掉后缀)<br/>
rpm –e MySQL-client-5.6.19-1.linux_glibc2.5.x86_64<br/>
rpm -e MySQL-server-5.6.19-1.linux_glibc2.5.x86_64<br/>
查看残留的目录：<br/>
whereis mysql<br/><br/>
然后删除mysql目录：<br/>
rm –rf /usr/lib64/mysql<br/><br/>
删除相关文件：<br/>
rm –rf /usr/my.cnf<br/>
rm -rf /root/.mysql_sercret<br/>
最关键的：<br/>
rm -rf /var/lib/mysql<br/><br/>
如果这个目录如果不删除，再重新安装之后，密码还是之前的密码，不会重新初始化！</span></div></span>
</div>
<hr>
<a name="474"/>

<div>
<span><a name="1276"></a><h1>A：系统配置信息</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">由上到下：<br/>
编号          内存          硬盘          名称          序号                    IP<br/><br/>
1         64G          1T*5          Tomcat2     29307794582           192.168.5.202</span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">2          64G          1T*5          Tomcat1     33661359254          192.168.5.201 </span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">3          64G          1T*5          Nginx2     42610353302            192.168.5.206 </span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">4          16G          1T*2          MySQL2     19648322966          192.168.5.203 </span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">5          16G          1T*2          MySQL1     17471540630          192.168.5.204 </span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">6          64G          1T*5          Nginx1     3488737430              192.168.5.205 <br/><br/>
做Red5时，1T*5分配如下：4T中的300G 系统，余下有1.5T当资源用（150000， 分给boot目录），再剩下的home<br/>
安装系统时选择从300G里再分出一个swap（64*1024=65536）用于交换<br/><br/>
密码：iqcloud.cn.123<br/><br/><br/>
硬盘Red5<br/>
http://zh.community.dell.com/techcenter/systems-management/w/wiki/392<br/>
Dell客服电话：<br/><br/>
1. 亮黄灯问题：<br/>
引起问题的原因：硬盘被爬过，Dell服务器系统日志未清除，导致这个问题<br/><br/>
解决方法：<br/>
（1）找一台机子（非服务器）跟一条网线，将网线连接到服务器后单独一个网口<br/>
（2）将这台机子的IP地址设置成 192.168.0.***  ***不能是120， 子网掩码（255.255.255.0， 一般会自动产生）<br/>
（3）拼 192.168.0.120  120是Dell服务器的IP（他们设置定死的）<br/>
（4）默认用户是：root， 密码：calvin   不区分大小写<br/>
（5）登入进去后，如果有提示要修改密码，可以自己修改一个<br/>
（6）（5）修改完后进去后，在服务器日志那边将日志清除掉就可以<br/><br/>
热备启动，顶替坏掉的硬盘，这时如果还要再加热备的解决方法：<br/>
（1）要同大小同型号的硬盘插进去<br/>
（2）跟设置Red5步骤里面的设置热备盘的方式一样对这块盘设置为热备<br/><br/>
假如4块Red5盘坏掉第三块，想把第三块替换掉的处理方式：<br/>
（1）提供一块跟坏掉的硬盘型号、大小一致的新盘<br/>
（2）拔出坏的硬盘，换上新的硬盘<br/>
（3）如果出现黄灯，按上面方式处理<br/><br/>
如果4块盘做Red5，某天要加上一块盘（第五块），也一起整成Red5<br/>
（1）如果在4块盘做Red5的时候弄成两个分区，那么Red5就要重新做，数据会丢失；<br/>
（2）如果在4块盘做Red5的时候弄成一个分区，是可以支持的。。。<br/><br/>
root<br/>
iqcloud.cn.123<br/>
iqboard.cn.123</span></div></div></span>
</div>
<hr>
<a name="475"/>

<div>
<span><a name="1519"></a><h1>IP地址</h1><div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">cd /etc/sysconfig/network-scripts</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">DEVICE=eth0<br/>
HWADDR=00:1F:E2:0A:B0:13<br/>
TYPE=Ethernet<br/>
IPADDR=192.168.5.211<br/>
NETMASK=255.255.255.0<br/>
GATEWAY=192.168.5.1<br/>
ONBOOT=yes<br/>
NM_CONTROLLED=yes<br/>
BOOTPROTO=static<br/>
DNS1=58.22.96.66</span></div></span>
</div>
<hr>
<a name="476"/>

<div>
<span><a name="1262"></a><h1>6-PC-Service 分布式文件系统</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">Glusterfs 分布式文件系统配置笔记<br/><br/>
端口号： ps -aux | grep glusterfs<br/>
49152<br/><br/>
六台机子信息：<br/>
Nginx：192.168.5.205<br/>
Nginx：192.168.5.206<br/>
Tomcat1：192.168.5.201<br/>
Tomcat2：192.168.5.202<br/><br/>
服务端的目录信息：<br/>
tomcat1： /boot/glusterfs<br/>
tomcat2： /home/glusterfs<br/><br/>
服务端：<br/>
Tomcat1为：192.168.5.201<br/>
Tomcat2为：192.168.5.202<br/><br/>
客户端：<br/>
nginx1 为：192.168.5.205<br/>
nginx2 为：192.168.5.206<br/><br/>
（1）在两台服务端都执行：<br/>
vi /etc/yum.repos.d/glusterfs-epel.repo<br/><br/>
输入：<br/>
[glusterfs-epel]<br/>
name=GlusterFS is a clustered file-system capable of scaling to several petabytes.<br/>
baseurl=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-$releasever/$basearch/<br/>
enabled=1<br/>
skip_if_unavailable=1<br/>
gpgcheck=1<br/>
gpgkey=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/pub.key<br/>
[glusterfs-noarch-epel]<br/>
name=GlusterFS is a clustered file-system capable of scaling to several petabytes.<br/>
baseurl=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-$releasever/noarch<br/>
enabled=1<br/>
skip_if_unavailable=1<br/>
gpgcheck=1<br/>
gpgkey=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/pub.key<br/>
[glusterfs-source-epel]<br/>
name=GlusterFS is a clustered file-system capable of scaling to several petabytes. - Source<br/>
baseurl=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-$releasever/SRPMS<br/>
enabled=0<br/>
skip_if_unavailable=1<br/>
gpgcheck=1<br/>
gpgkey=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/pub.key<br/><br/>
（2）在两台服务器上都执行：<br/>
yum install glusterfs glusterfs-server<br/><br/>
（3）在两台服务器上都执行，启动服务：<br/>
service glusterd start<br/><br/>
（4）将用于存储的主机加入到“存储池”，这边只要在两台服务器任选一台执行，这边就选择Tomcat1：192.168.5.201，执行如下：<br/>
gluster peer probe 192.168.5.202<br/><br/>
（5）存储池内的信息（任一台），这边选择Tomcat1：192.168.5.201<br/>
gluster peer status<br/>
结果例如：<br/>
Number of Peers: 1<br/><br/>
Hostname: 192.168.5.202<br/>
Uuid: b40caadc-3afb-433b-a769-62f52d0a8b92<br/>
State: Peer in Cluster (Connected)<br/><br/>
（6）df -h 并挂接分区 ---------  Del -----<br/>
mount -t ntfs-3g /dev/sda2 /data/ftp-data<br/>
查挂接结果<br/>
mount <br/>
这里分区已经映射到：/home<br/>
df -h /home<br/>
/dev/sda2              25G  172M   24G   1% /home<br/>
mount -t auto /dev/sda2 /home<br/><br/>
（7）Create volume（创建卷）<br/>
Glusterfs的卷有多种可选模式，我们采用其中的两种Distributed和Replicated，其中Distributed类似于磁盘的RAID 0模式；Replicated类似于磁盘的RAID1模式（glusterfs中可以制定副本的数量，这里我们存储两个副本即可）。我们利用此两种模式在两台台server间做成类似于RAID 10的模式，提供高性能和高可用的存储服务。<br/>
在任意一台server执行：<br/>
gluster volume create ftp-volume replica 2 192.168.5.201:/boot/glusterfs 192.168.5.202:/home/glusterfs<br/><br/>
gluster volume create ftp-volume replica 2 192.168.5.211:/data/ftp-data 192.168.5.169:/home 192.168.5.209:/home 192.168.5.210:/home force   ?????<br/><br/>
##上述命令中：dir为每台服务器上要加入存储池的目录（此目录最好做一个单独分区挂载至此目录）。按照上述命令server2：/dir作为server1:/dir的副本；server4:/dir作为server3:/dir的副本<br/><br/>
（8）gluster volume start ftp-volume<br/>
（9）gluster volume status<br/>
（10）在nginx主：192.168.5.166<br/>
（11）nginx主、备<br/>
yum install glusterfs glusterfs-client<br/><br/>
（12）选择服务器任意一台这边选择tomcat1：192.168.5.201<br/>
mount -t glusterfs 192.168.5.201:/ftp-volume /usr/local/nginx/html/ruida<br/><br/>
（13）在/etc/rc.local添加如下内容，以便实现开机自动挂载<br/>
mount -t glusterfs 192.168.5.201:/ftp-volume /glusterfs/  2&gt;/var/log/gluster-client.err</span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><font color="#FF0000" face="宋体" size="1"><span style="font-size:9pt"><b>mount</b></span></font> <font color="#010101" face="宋体" size="1"><span style="font-size:9pt">-t glusterfs 192.168.5.209:/resources /glusterfsConsume/</span></font></span></div><br/>
（14）df -h<br/>
（15）在客户端建立目录或者文件，服务端会自己同步过来<br/><br/><br/><br/><br/></div></div></span>
</div>
<hr>
<a name="477"/>

<div>
<span><div><a name="1248" shape="rect"></a><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">资料来源网址：<br clear="none"/> http://www.cnblogs.com/zhenmingliu/archive/2012/05/25/2518691.html<br clear="none"/><br clear="none"/> MySQL常规练习 .MySQL安装成功后的进入方式<br clear="none"/> 1、MySQL安装成功后的进入方式<br clear="none"/> /第一种方式进入：<br clear="none"/> 点击开始---&gt;所有程序---&gt;Mysql--&gt;Mysql Server5.0---&gt;Mysql Command Line Client 点击<br clear="none"/> 提示Enter password: root  回车<br clear="none"/> 即可进入Mysql操作界面：<br clear="none"/> show databases;//显示所有的数据库<br clear="none"/> use test;//选择并使用test数据库<br clear="none"/> show tables;//显示test库中所有表<br clear="none"/>  <br clear="none"/> exit 退出<br clear="none"/>  <br clear="none"/> 第二种进入方式：<br clear="none"/> 开始--运行输入cmd 回车<br clear="none"/> cd/进入 c盘根目录<br clear="none"/> cd 切换到：<br clear="none"/> C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br clear="none"/> 在此目录中采用<br clear="none"/> mysql - u root -p<br clear="none"/> mysql -h 127.0.0.1 -u root -p root<br clear="none"/> 回车<br clear="none"/> 提示Enter password: root  回车<br clear="none"/> 即可进入Mysql操作界面：<br clear="none"/> show databases;//显示所有的数据库<br clear="none"/> use test;//选择并使用test数据库<br clear="none"/> show tables;//显示test库中所有表<br clear="none"/>  <br clear="none"/> exit 退出<br clear="none"/>  <br clear="none"/> 第三种方式进入：<br clear="none"/> 开始--运行输入cmd 回车<br clear="none"/> cd/进入 c盘根目录<br clear="none"/> cd 切换到：<br clear="none"/> C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br clear="none"/> 在此目录中采用<br clear="none"/> mysql - u root -p  数据库名称 <br clear="none"/> mysql -h 127.0.0.1 -u root -p root 数据库名称<br clear="none"/> 回车<br clear="none"/> 即可进入Mysql操作界面： 在此种直接可以使用 book数据库<br clear="none"/> show tables;//显示test库中所有表<br clear="none"/><br clear="none"/> mysql密码设置<br clear="none"/> 2、密码设置：<br clear="none"/> 当用户没有设置密码时：<br clear="none"/> 添加密码：<br clear="none"/> mysqladmin -uroot -password ab12 <br clear="none"/>   注：因为开始时root没有密码，所以-p旧密码一项就可以省略了。<br clear="none"/> 当用户存在密码时：<br clear="none"/> 修改密码：<br clear="none"/> cd/进入 c盘根目录<br clear="none"/> cd 切换到：<br clear="none"/> C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br clear="none"/> 采用命令：<br clear="none"/> mysqladmin -uroot -proot password 123<br clear="none"/> 回车后密码及更新为123；<br clear="none"/><br clear="none"/> MySQL常规练习 .MySQL安装成功后的进入方式<br clear="none"/> 1、MySQL安装成功后的进入方式<br clear="none"/> /第一种方式进入：<br clear="none"/> 点击开始---&gt;所有程序---&gt;Mysql--&gt;Mysql Server5.0---&gt;Mysql Command Line Client 点击<br clear="none"/> 提示Enter password: root  回车<br clear="none"/> 即可进入Mysql操作界面：<br clear="none"/> show databases;//显示所有的数据库<br clear="none"/> use test;//选择并使用test数据库<br clear="none"/> show tables;//显示test库中所有表<br clear="none"/> exit 退出<br clear="none"/>  <br clear="none"/> 第二种进入方式：<br clear="none"/> 开始--运行输入cmd 回车<br clear="none"/> cd/进入 c盘根目录<br clear="none"/> cd 切换到：<br clear="none"/> C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br clear="none"/> 在此目录中采用<br clear="none"/> mysql - u root -p<br clear="none"/> mysql -h 127.0.0.1 -u root -p root<br clear="none"/> 回车<br clear="none"/> 提示Enter password: root  回车<br clear="none"/> 即可进入Mysql操作界面：<br clear="none"/> show databases;//显示所有的数据库<br clear="none"/> use test;//选择并使用test数据库<br clear="none"/> show tables;//显示test库中所有表<br clear="none"/> exit 退出<br clear="none"/>  <br clear="none"/> 第三种方式进入：<br clear="none"/> 开始--运行输入cmd 回车<br clear="none"/> cd/进入 c盘根目录<br clear="none"/> cd 切换到：<br clear="none"/> C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br clear="none"/> 在此目录中采用<br clear="none"/> mysql - u root -p  数据库名称 <br clear="none"/> mysql -h 127.0.0.1 -u root -p root 数据库名称<br clear="none"/> 回车<br clear="none"/> 即可进入Mysql操作界面： 在此种直接可以使用 book数据库<br clear="none"/> show tables;//显示test库中所有表<br clear="none"/><br clear="none"/> mysql密码设置<br clear="none"/> 2、密码设置：<br clear="none"/> 当用户没有设置密码时：<br clear="none"/> 添加密码：<br clear="none"/> mysqladmin -uroot -password ab12 <br clear="none"/>   注：因为开始时root没有密码，所以-p旧密码一项就可以省略了。<br clear="none"/>  <br clear="none"/> 当用户存在密码时：<br clear="none"/> 修改密码：<br clear="none"/> cd/进入 c盘根目录<br clear="none"/> cd 切换到：<br clear="none"/> C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br clear="none"/> 采用命令：<br clear="none"/> mysqladmin -uroot -proot password 123<br clear="none"/> 回车后密码及更新为123；<br clear="none"/><br clear="none"/> mysql 增加用户<br clear="none"/> 3、增加用户：<br clear="none"/> （注意：和上面不同，下面的因为是MYSQL环境中的命令，所以后面都带一个分号作为命令结束符） <br clear="none"/>   格式：grant select on 数据库.* to 用户名@登录主机 identified by “密码”<br clear="none"/>  <br clear="none"/>    第一种：<br clear="none"/>  增加一个用户test1密码为abc，让他可以在任何主机上登录，并对所有数据库有查询、插入、修改、删除的权限。首先用以root用户连入MYSQL，然后键入以下命令： <br clear="none"/>   grant select,insert,update,delete on *.* to test1@&quot;%&quot; Identified by &quot;abc&quot;;<br clear="none"/>  <br clear="none"/>   但增加的用户是十分危险的，你想如某个人知道test1的密码，那么他就可以在internet上的任何一台电脑上登录你的mysql数据库并对你的数据可以为所欲为了，解决办法见例第二种： <br clear="none"/>   第一种：增加一个用户test2密码为abc,让他只可以在localhost上登录，并可以对数据库mydb进行查询、插入、修改、删除的操作 （localhost指本地主机，即MYSQL数据库所在的那台主机），这样用户即使用知道test2的密码，他也无法从internet上直接访问数<br clear="none"/> mysql&gt; grant select,insert,update,delete on book.* to test2@localhost Identified by &quot;abc&quot;;<br clear="none"/>  <br clear="none"/>   如果你不想test2有密码，可以再打一个命令将密码消掉。 <br clear="none"/> mysql&gt; grant select,insert,update,delete on book.* to test2@localhost Identified by &quot;&quot;;<br clear="none"/><br clear="none"/> mysql 把指定用户的权限开通出来<br clear="none"/> grant all on *.* to root@'192.168.5.%' identified by 'ruida~'<br clear="none"/><br clear="none"/> mysql 查看错误日志<br clear="none"/> tail -30 ../logs/error.log<br clear="none"/><br clear="none"/> mysql 使得表名不区分大小写<br clear="none"/> LINUX下的MYSQL默认是要区分表名大小写的，哎，弄了那么旧，害死我了。<br clear="none"/>   让MYSQL不区分表名大小写的方法其实很简单：<br clear="none"/>   1.用ROOT登录，修改/etc/my.cnf<br clear="none"/>   2.在[mysqld]下加入一行：lower_case_table_names=1<br clear="none"/>   3.重新启动数据库即可 </span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br clear="none"/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br clear="none"/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br clear="none"/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">mysql 使得表名不区分大小写<br clear="none"/>LINUX下的MYSQL默认是要区分表名大小写的，哎，弄了那么旧，害死我了。<br clear="none"/>　　让MYSQL不区分表名大小写的方法其实很简单：<br clear="none"/>　　1.用ROOT登录，修改/etc/my.cnf<br clear="none"/>　　2.在[mysqld]下加入一行：lower_case_table_names=1<br clear="none"/>　　3.重新启动数据库即可<br clear="none"/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br clear="none"/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br clear="none"/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br clear="none"/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">没有my.cnf文件，怎么办？<br clear="none"/>为什么没有这个文件而MySQL却也能正常启动和使用，这个有两说法：<br clear="none"/>1、my.cnf只是MySQL启动时的一个参数文件，可以没有它，这时MySQL会用内置的默认参数启动；<br clear="none"/>2、MySQL在启动时自动使用/usr/share/mysql/my-medium.cnf文件，这种说法仅限于rpm包安装的MySQL。<br clear="none"/>解决方法很简单，只需复制/usr/share/mysql/my-medium.cnf文件到/etc目录，并改名为my.cnf即可：<br clear="none"/>cp /usr/share/mysql/my-medium.cnf /etc/my.cnf<br clear="none"/>在[mysqld]下加入一行：lower_case_table_names=1<br clear="none"/>其中0：区分大小写，1：不区分大小写</span></div><div><br clear="none"/></div><a href="Evernote_files/1.4：MySQL 常用操作手册.html"><img src="Evernote_files/9c2521dffd5f33e3f5b358cd83c49bf5.png" alt="1.4：MySQL 常用操作手册.html"></a><br clear="none"/><div></div></span>
</div>
<hr>
<a name="482"/>

<div>
<span><a name="1270"></a><h1>9.1：安装PHP</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（1）安装libiconv</span><div><pre style="margin-top: 0px; margin-bottom: 10px; padding: 0px; font-family: arial, &apos;courier new&apos;, courier, 宋体, monospace; white-space: pre-wrap; word-wrap: break-word; color: rgb(51, 51, 51); font-size: 14px; line-height: 24px; widows: 1; background-color: rgb(241, 254, 221);"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">yum -y install gcc
</span></pre><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">  tar xvf libiconv-1.12.tar.gz<br/>
  cd libiconv-1.12<br/>
  ./configure<br/>
  make<br/>
  make install<br/><br/>
（2）安装libmcrypt（提供多种加密函数）php的组件</span></div><div><ol start="1" style="font-size: 12px; line-height: 1.4em; margin: 0px 0px 1px; padding: 2px 0px; border: 1px solid rgb(209, 215, 220); list-style-position: initial; list-style-image: initial; color: rgb(43, 145, 175); font-family: Monaco, &apos;DejaVu Sans Mono&apos;, &apos;Bitstream Vera Sans Mono&apos;, Consolas, &apos;Courier New&apos;, monospace; text-align: left; widows: 1; background-color: rgb(255, 255, 255);"><li style="font-size: 1em; margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; border-left-width: 1px; border-left-style: solid; border-left-color: rgb(209, 215, 220); line-height: 18px; background-color: rgb(250, 250, 250);"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="color: black;">yum install glibc-headers  </span></span></li><li style="font-size: 1em; margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; border-left-width: 1px; border-left-style: solid; border-left-color: rgb(209, 215, 220); line-height: 18px; background-color: rgb(250, 250, 250);"><span style="color: black;">  </span></li><li style="font-size: 1em; margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; border-left-width: 1px; border-left-style: solid; border-left-color: rgb(209, 215, 220); line-height: 18px; background-color: rgb(250, 250, 250);"><span style="color: black;">yum install gcc-c++   </span></li></ol>
tar zxvf libmcrypt-2.58.tar.gz<br/>
cd libmcrypt-2.5.8<br/>
./configure<br/>
make<br/>
make install<br/><br/>
如果出错，这这样安装：<br/>
wget http://www.51osos.com/uploads/soft/libmcrypt-2.5.8.tar.gz<br/><br/><br/>
（3）安装php<br/>
yum install openssl*</div><div>yum install -y mysql-devel* </div><div>yum -y install libevent libevent-devel<br/>
yum -y install libxml2 libxml2-devel<br/>
yum -y install curl-devel<br/>
yum -y install libpng-devel<br/>
yum install libjpeg-devel<br/>
yum install freetype-devel<br/>
yum -y install libtool-ltdl-devel<br/>
yum -y install libmcrypt libmcrypt-devel <br/><br/>
tar jxvf php-5.3.28.tar.bz2<br/>
cd php-5.3.28<br/><br/>
64位机子<br/>
ln -s /usr/lib64/mysql/libmysqlclient.so /usr/lib/libmysqlclient.so<br/><br/>
下面这几个有可能不是必须的<br/>
ln -s /usr/lib64/mysql/libmysqlclient.so.16 /usr/lib/libmysqlclient.so.16<br/>
ln -s /usr/lib64/mysql/libmysqlclient_r.so.16 /usr/lib/libmysqlclient_r.so.16<br/>
ln -s /usr/lib64/mysql/mysql_config /usr/lib/mysql_config
<div><p style="font-size: 13px; margin: 10px auto; color: rgb(75, 75, 75); font-family: georgia, verdana, Arial, helvetica, sans-seriff; line-height: 20.7999992370605px; widows: 1; background-color: rgb(255, 255, 255);">ln -s /usr/lib64/mysql/libmysqlclient.a /usr/lib/libmysqlclient.a </p><p style="font-size: 13px; margin: 10px auto; color: rgb(75, 75, 75); font-family: georgia, verdana, Arial, helvetica, sans-seriff; line-height: 20.7999992370605px; widows: 1; background-color: rgb(255, 255, 255);">ln -s /usr/lib64/mysql/libmysqlclient_r..a /usr/lib/libmysqlclient_r.a </p><br/>
查看连接是否正常<br/>
ll /usr/lib/libmysqlclient.so*</div><div><br/></div><div>32位 64位 —— 2014.09.22在北京九龙，九龙公司不部署员说32、64位都适用<br/>
 ./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc --with-mysql --with-mysqli  --with-freetype-dir --with-jpeg-dir --with-png-dir --with-zlib --with-libxml-dir=/usr --enable-xml --disable-rpath --enable-discard-path --enable-safe-mode --enable-ftp --enable-bcmath --enable-shmop --enable-sysvsem --enable-inline-optimization --with-curlwrappers --enable-mbregex --enable-fastcgi --enable-fpm --enable-force-cgi-redirect --enable-mbstring --with-mcrypt --with-gd --enable-gd-native-ttf --with-openssl --with-mhash --enable-pcntl --enable-sockets --with-iconv-dir=/usr/local --with-zlib --enable-zip --with-curl<br/><br/>
 make ZEND_EXTRA_LIBS='-liconv'<br/>
make install<br/><br/><br/><br/>
暂时不用<br/>
./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc --with-mysql --with-mysqli  --with-freetype-dir --with-jpeg-dir --with-png-dir --with-zlib --with-libxml-dir=/usr --enable-xml --disable-rpath --enable-discard-path --enable-safe-mode --enable-bcmath --enable-shmop --enable-sysvsem --enable-inline-optimization --with-curlwrappers --enable-mbregex --enable-fastcgi --enable-fpm --enable-force-cgi-redirect --enable-mbstring --with-mcrypt --with-gd --enable-gd-native-ttf --with-openssl --with-mhash --enable-pcntl --enable-sockets --with-iconv-dir=/usr/local--with-zlib-dir=usr–with-zip<br/>
make<br/>
make clean<br/>
make ZEND_EXTRA_LIBS='-liconv'<br/>
make install<br/><br/>
64位(可能暂时不用这个)：<br/>
CFLAGS=&quot;-O3 -fPIC&quot; ./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc --with-mysql-dir=/usr --with-mysqli  --with-freetype-dir --with-jpeg-dir --with-png-dir --with-zlib --with-libxml-dir=/usr --enable-xml --disable-rpath --enable-discard-path --enable-safe-mode --enable-bcmath --enable-shmop --enable-sysvsem --enable-inline-optimization --with-curlwrappers --enable-mbregex --enable-fastcgi --enable-fpm --enable-force-cgi-redirect --enable-mbstring --with-mcrypt --with-gd --enable-gd-native-ttf --with-openssl --with-mhash --enable-pcntl --enable-sockets --with-iconv-dir=/usr/local --with-zlib-dir=usr<br/>
若编译过程中报mysql相关错误,大多是因为php默认去/usr/lib/下去寻找mysql相关文件，而64为系统rpm方式安装的mysql相关文件在/usr/lib64/下。为相关文件创建软连接即可<br/>
ln -s /usr/lib64/mysql/libmysqlclient.so.16 /usr/lib/libmysqlclient.so.16<br/>
ln -s /usr/lib64/mysql/libmysqlclient_r.so.16 /usr/lib/libmysqlclient_r.so.16<br/>
ln -s /usr/lib64/mysql/mysql_config /usr/lib/mysql_config
<div><p style="margin: 10px auto; color: rgb(75, 75, 75); font-family: georgia, verdana, Arial, helvetica, sans-seriff; font-size: 13px; line-height: 20.7999992370605px; widows: 1; background-color: rgb(255, 255, 255);">ln -s /usr/lib64/mysql/libmysqlclient.a /usr/lib/libmysqlclient.a </p><p style="margin: 10px auto; color: rgb(75, 75, 75); font-family: georgia, verdana, Arial, helvetica, sans-seriff; font-size: 13px; line-height: 20.7999992370605px; widows: 1; background-color: rgb(255, 255, 255);">ln -s /usr/lib64/mysql/libmysqlclient_r..a /usr/lib/libmysqlclient_r.a </p>
编译完成后，执行make<br/>
make ZEND_EXTRA_LIBS='-liconv'<br/>
make install</div><div><br/>
启动PHP<br/>
cp php.ini-production /usr/local/php/etc/php.ini<br/>
cd /usr/local/php/etc<br/>
cp php-fpm.conf.default  php-fpm.conf<br/>
cd ..<br/>
./sbin/php-fpm</div><div><br/>
netstat -npl|grep :9000<br/>
ps -ef|grep php<br/>
cd /usr/local/nginx/conf<br/>
vi nginx.conf<br/>
修改nginx 配置文件，把php请求交给监听在9000端口的php-cgi来处理, 见文档.....<br/><br/>
/usr/local/nginx/sbin/nginx -s reload<br/>
cd ..<br/>
cd html/<br/>
cat index.html<br/>
（4）上传资源。。。<br/>
（5）建立数据库<br/>
mysql -uroot -proot<br/>
create database ruida1;<br/>
create database ruida2;<br/>
（6）导入数据库<br/>
mysql -uroot -proot ruida&lt;ruida.sql<br/>
mysql -uroot -proot ruida2&lt;ruida2.sql<br/>
（7）修改php程序连接的数据库<br/>
     vi data/config.php<br/>
（8）<br/>
select user.host from mysql.user;<br/>
select user,host from mysql.user;<br/>
+------+-----------+<br/>
| user | host      |<br/>
+------+-----------+<br/>
| root | %         |<br/>
| root | 127.0.0.1 |<br/>
| root | ::1       |<br/>
|      | bogon     |<br/>
| root | bogon     |<br/>
|      | localhost |<br/>
| root | localhost |<br/>
+------+-----------+<br/>
7 rows in set (0.00 sec)<br/>
grant all on *.* to root@'192.168.5.%' identified by 'root';<br/>
select user,host from mysql.user;<br/>
+------+-------------+<br/>
| user | host        |<br/>
+------+-------------+<br/>
| root | %           |<br/>
| root | 127.0.0.1   |<br/>
| root | 192.168.5.% |<br/>
| root | ::1         |<br/>
|      | bogon       |<br/>
| root | bogon       |<br/>
|      | localhost   |<br/>
| root | localhost   |<br/>
+------+-------------+<br/>
8 rows in set (0.00 sec)<br/><br/>
（9）<br/>
../sbin/nginx -s reload<br/>
（10）网页开不了，差错<br/>
tail -30 ../logs/error.log<br/>
tail -30 ../logs/access.log<br/>
（10）netstat |grep 3306<br/>
（11）netstat -npl|grep 3306<br/>
（12）PHP如果没开起来( netstat -npl|grep 9000 没任何东西)，则要开启<br/>
./sbin/php-fpm<br/>
（13）安装zip，这一步可以在比较前面实现<br/>
yum install zip<br/>
（14）如果安装php时编译时没有在最后面加上–with-zip，就要重新配置php<br/>
     a.     killall php-fpm<br/>
     b.     ps -ef|grep php<br/>
     c.     cd /usr/local<br/>
     d.     rm -rf php/<br/>
     e.     cd php<br/>
     f.     tar jxvf php-5.3.28.tar.bz2<br/>
     g.     cd php-5.3.28<br/>
     h.     ./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc --with-mysql --with-mysqli  --with-freetype-dir --with-jpeg-dir --with-png-dir --with-zlib --with-libxml-dir=/usr --enable-xml --disable-rpath --enable-discard-path --enable-safe-mode --enable-bcmath --enable-shmop --enable-sysvsem --enable-inline-optimization --with-curlwrappers --enable-mbregex --enable-fastcgi --enable-fpm --enable-force-cgi-redirect --enable-mbstring --with-mcrypt --with-gd --enable-gd-native-ttf --with-openssl --with-mhash --enable-pcntl --enable-sockets --with-iconv-dir=/usr/local--with-zlib-dir=usr–with-zip<br/>
     i.     make ZEND_EXTRA_LIBS='-liconv'<br/>
     j.     make install<br/>
     l.     进入：cd php-5.3.28<br/>
     m.     cp php.ini-production /usr/local/php/etc/php.ini<br/>
     n.     cd /usr/local/php/etc/<br/>
     o.     cp php-fpm.conf.default php-fpm.conf<br/>
         p.     ../sbin/php-fpm<br/>
    <br/>
     至此，PHP又重新配置了<br/>
（15）ll -d /usr/local/nginx/html<br/>
（16）此刻，网页可以访问，但会有提示语<br/>
（17）nginx是以nobody用户运行，而我们直接拷贝的网站目录/usr/local/nginx/html的目录属性为root，需要执行以下命令将其属组更改为<br/>
     chown nobody -R /usr/local/nginx/html/<br/>
（18）因为锐达项目有云盘功能涉及到上传文件，需注意修改php.ini里几处设置（关于php解析超时时间以及上传文件大小限制）：<br/>
     vi /usr/local/php/etc/php.ini<br/>
     修改以下配置指：<br/>
     upload_max_filesize = 1024M<br/>
     post_max_size = 1024M<br/>
     memory_limit = 256M<br/>
     max_execution_time=30<br/>
     file_uploads = On<br/><br/>
     kill all php-fpm<br/>
     ps -ef|grep php<br/>
     /usr/local/php/sbin/php-fpm<br/>
（19）vi /usr/local/nginx/conf/nginx.conf   增加一行： client_max_body_size 1024m 位置如下：<br/>
     #gzip  on;<br/>
    <br/>
        client_max_body_size 1024m;<br/>
   <br/>
        server {<br/></div></div></div><div><br/></div><div><p style="color: rgb(51, 51, 51); font-family: &apos;Comic Sans MS&apos;, &apos;Microsoft YaHei&apos;, Verdana, Arial, Helvetica, sans-serif; font-size: 14px; widows: 1;">然后再次wget http://127.0.0.1/phpinfo.php 进行测试，如果没有内容或无法正常下载，这时问题可能就是出在了：</p><div style="margin: 12px 0px; padding: 0px; text-align: left; box-sizing: border-box; overflow: hidden !important; position: relative !important; direction: ltr !important; width: 880px; font-family: Monaco, MonacoRegular, &apos;Courier New&apos;, monospace; border: 1px !important; text-shadow: none !important; color: rgb(51, 51, 51); widows: 1; font-size: 12px !important; line-height: 15px !important; height: auto;"><div style="margin: 0px; padding: 0px; border: 0px; width: 880px; overflow: hidden; position: relative; z-index: 1; background-position: 0px 50%; background-repeat: initial initial;"><table style="border: none !important; padding: 0px !important; margin: 0px !important; width: auto !important; border-spacing: 0px !important; border-collapse: collapse !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><tbody><tr style="padding: 0px !important; border: none !important; vertical-align: top !important; margin: 0px !important; background-position: 0px 50%; background-repeat: initial initial;"><td style="vertical-align: top !important; border-bottom-width: 0px; padding: 0px 5px 0px 0px !important; margin: 0px !important; border-right-style: solid !important; border-top-width: 0px; border-right-width: 3px !important; border-left-width: 0px; border-right-color: rgb(108, 226, 108) !important; color: rgb(175, 175, 175) !important; background-position: 0px 50%; background-repeat: initial initial;"><div style="margin: 0px; padding: 0px; border: 0px; white-space: nowrap; background-position: 0px 50%; background-repeat: initial initial;"><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">1</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">2</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">3</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">4</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">5</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">6</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">7</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">8</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">9</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">10</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">11</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">12</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">13</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">14</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">15</div></div></td><td style="vertical-align: top !important; border: 0px; padding: 0px !important; margin: 0px !important; width: 847px; background-position: 0px 50%; background-repeat: initial initial;"><div style="margin: 0px; padding: 0px; border: none !important; color: rgb(0, 0, 0); white-space: pre; overflow: visible; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">[</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">root</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">@</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">dbweb102</span> <span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">~</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">]</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span> <span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">cat</span> <span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">/</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">usr</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">/</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">local</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">/</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">nginx</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">/</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">conf</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">/</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_params</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-color: rgb(249, 249, 249) !important; background-position: initial initial !important; background-repeat: initial initial !important;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">QUERY</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>STRING<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">      </span> <span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">query_string</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">REQUEST</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>METHOD<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">    </span> <span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">request_method</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-color: rgb(249, 249, 249) !important; background-position: initial initial !important; background-repeat: initial initial !important;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">CONTENT</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>TYPE<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">      </span> <span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">content_type</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">CONTENT</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>LENGTH<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">    </span> <span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">content_length</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-color: rgb(249, 249, 249) !important; background-position: initial initial !important; background-repeat: initial initial !important;"> </div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(184, 92, 0) !important;">############# 添加下面这一行 ############</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-color: rgb(249, 249, 249) !important; background-position: initial initial !important; background-repeat: initial initial !important;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">SCRIPT</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>FILENAME<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">    </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">document_root</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">fastcgi_script_name</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(184, 92, 0) !important;">############# 添加上面这一行 ############</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-color: rgb(249, 249, 249) !important; background-position: initial initial !important; background-repeat: initial initial !important;"> </div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">SCRIPT</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>NAME<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">        </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">fastcgi_script_name</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-color: rgb(249, 249, 249) !important; background-position: initial initial !important; background-repeat: initial initial !important;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">REQUEST</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>URI<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">        </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">request_uri</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">DOCUMENT</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>URI<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">      </span> <span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">document_uri</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-color: rgb(249, 249, 249) !important; background-position: initial initial !important; background-repeat: initial initial !important;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">DOCUMENT</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>ROOT<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">      </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">document_root</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">SERVER</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>PROTOCOL<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">    </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">server_protocol</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div></div></td></tr></tbody></table></div></div><p style="color: rgb(51, 51, 51); font-family: &apos;Comic Sans MS&apos;, &apos;Microsoft YaHei&apos;, Verdana, Arial, Helvetica, sans-serif; font-size: 14px; widows: 1;"></p><p style="color: rgb(51, 51, 51); font-family: &apos;Comic Sans MS&apos;, &apos;Microsoft YaHei&apos;, Verdana, Arial, Helvetica, sans-serif; font-size: 14px; widows: 1;">不用wget，直接在浏览器中访问http://127.0.0.1/phpinfo.php如果看到不报报错的空白页面，</p></div></div></span>
</div>
<hr>
<a name="483"/>

<div>
<span><a name="1266"></a><h1>8.1：配置keepalived</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（1）上传keepalived<br/>
（2）tar zxvf keepalived-1.2.13.tar.gz<br/>
（3）cd keepalived-1.2.13<br/>
（4）./configure --prefix=/usr/local/keepalived<br/>
（5）make<br/>
（6）make install<br/>
（7）cp -r /usr/local/keepalived/etc/* /etc<br/>
（8）chkconfig --add keepalived<br/>
（9）chkconfig --level 345 keepalived on<br/>
（10）ln -s /usr/local/keepalived/sbin/keepalived /usr/sbin/keepalived<br/>
（11）service keepalived start<br/>
（12）注意：（8）-（11）将keepalived作为系统服务</span></div></span>
</div>
<hr>
<a name="490"/>

<div>
<span bgcolor="#FFFFFF"><div><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>1.1：MySQL 安装要点步骤.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/1.1：MySQL%20安装要点步骤.html">file:///E:/同步/同步/部署/部署/1.1：MySQL%20安装要点步骤.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1242"></a><h1>1.1：MySQL 安装要点步骤</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">一、记录要即将安装的MySQL用户名、密码、IP<br/>
主：<br/>
usr: root<br/>
pw: root123<br/>
192.168.5.241<br/><br/>
从：<br/>
usr: root<br/>
pw: root123<br/>
192.168.5.242<br/><br/>
usr:root<br/>
pw:iqboard<br/>
192.168.5.248<br/><br/>
二、安装MySQL<br/>
（1）解压命令<br/>
解压tar包<br/>
tar xvf MySQL-5.5.38-1.el6.i686.rpm-bundle.tar<br/><br/>
（2）安装MySQL<br/>
安装系列MySQL 的rpm包<br/>
rpm -ivh MySQL-*<br/>
出错执行：yum -y remove mysql-libs-5.1.*    <br/>
如果有提示：libaio 等相关问题，就安装<br/>
libaio-0.3.107-10.el6.i686.rpm     - 32位<br/>
libaio-0.3.107-10.el6.x86_64.rpm - 64位<br/><br/>
rpm -e  mysql-libs-5.1.71-1.el6.x86_64 --nodeps<br/>
启动MySQL<br/>
service mysql start<br/>
MySQL 用户名跟密码：<br/>
mysqladmin -uroot password root<br/>
Navicat 尝试连接MySQL，如果连接不上，按照如下步骤操作：<br/>
CentOS系统安装好MySQL后，默认情况下不支持用户通过非本机连接上数据库服务器，下面是解决方法：<br/>
1、在控制台执行 mysql -u root -p mysql，CentOS系统提示输入数据库root用户的密码，输入完成后即进入mysql控制台，这个命令的第一个mysql是执     行命令，第二个mysql是系统数据名称，不一样的。<br/>
2、在mysql控制台执行<br/>
     GRANT ALL PRIVILEGES ON *.* TO 'ruida'@'%' IDENTIFIED BY 'ruida~' WITH GRANT OPTION;<br/>
     FLUSH PRIVILEGES;<br/>
3、在mysql控制台执行命令中的 'root'@'%' 可以这样理解: root是用户名，%是主机名或IP地址，这里的%代表任意主机或IP地址，你也可替换成任意其它     用户名或指定唯一的IP地址；'ruida~'是给授权用户指定的登录数据库的密码；另外需要说明一点的是我这里的都是授权所有权限，可以指定部     分权限，GRANT具体操作详情见：http://www.mysqlab.net/docs/refman/en-5.1/page/grant.html<br/></span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">4、不放心的话可以在mysql控制台执行 select host, user from user; 检查一下用户表里的内容<br/>
     这样，我们就完成了CentOS系统安装MySQL支持远程连接。<br/></span></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>1.2：MySQL 主从安装要点步骤.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/1.2：MySQL%20主从安装要点步骤.html">file:///E:/同步/同步/部署/部署/1.2：MySQL%20主从安装要点步骤.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1244"></a><h1>1.2：MySQL 主从安装要点步骤</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（1）192.168.5.241 为主， 192.168.5.242为从<br/>
（2）192.168.5.241, 查看进程是否在运行<br/>
     ps -ef|grep mysql<br/>
（3）192.168.5.241, 登入MySQL<br/>
     mysql -uroot -proot<br/>
（4）192.168.5.241，数据库设为只读<br/>
     flush tables with read lock;<br/>
（5）192.168.5.241，导出主MySQL数据库（有两个库ruida.sql、ruida2.sql）<br/>
     mysqldump -uroot -proot ruida &gt;/tmp/ruida.sql<br/>
     mysqldump -uroot -proot ruida2 &gt;/tmp/ruida2.sql<br/>
（6）192.168.5.241，将上一步到处的数据库拷贝到从机上：192.168.5.242<br/>
     scp /tmp/ruida* 192.168.5.242:/tmp<br/>
（7）192.168.5.242，将上一步从主机拷贝过来的sql导入到数据库当中<br/>
     mysql -uroot -proot ruida&lt;/tmp/ruida.sql<br/>
     mysql -uroot -proot ruida2&lt;/tmp/ruida2.sql<br/>
（8）192.168.5.241,<br/>
     show master status;        <span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 12px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">在MYSQL的主从复制中 ，通过命令show  master status，可以查看master数据库当前正在使用的二进制日志及当前执行二进制日志位置</span><br/>
（9）192.168.5.241<br/>
     exit<br/>
（10）192.168.5.241<br/>
     mysql -uroot -proot<br/>
（11）192.168.5.242<br/>
     mysql -uroot -proot<br/>
（12）192.168.5.242<br/>
     show master status;<br/>
     exit<br/>
（13）192.168.5.242, 查看下my-medium.cnf这个文件在哪边，如果事先已经知道存放在哪就不要这一步<br/>
     find / -name *my*.cnf<br/>
（14）192.168.5.242<br/>
     cp /usr/share/doc/MySQL-server-5.5.38/my-medium.cnf /etc/my.cnf<br/>
（15）192.168.5.242<br/>
     vi /etc/my.cnf<br/>
     将server-id修改为2, 如下（这里是从机，主机后面也要修改，主机为：1）:<br/>
     # required unique id between 1 and 2^32 - 1<br/>
     # defaults to 1 if master-host is not set<br/>
     # but will not function as a master if omitted<br/>
     server-id       = 2<br/>
（16）192.168.5.242，重启mysql服务<br/>
     service mysql restart<br/>
（17）192.168.5.241<br/>
     cp /usr/share/doc/MySQL-server-5.5.38/my-medium.cnf /etc/my.cnf<br/>
     service mysql restart<br/>
（18）192.168.5.241<br/>
     mysql -uroot -proot<br/>
（19）192.168.241, 记得命令后面一定要加分号<br/>
     show master status;<br/>
     结果如下：<br/>
     +------------------+----------+--------------+------------------+<br/>
     | File             | Position | Binlog_Do_DB | Binlog_Ignore_DB |<br/>
     +------------------+----------+--------------+------------------+<br/>
     | mysql-bin.000001 |      107 |              |                  |<br/>
     +------------------+----------+--------------+------------------+<br/>
     1 row in set (0.00 sec)<br/>
（20）192.168.5.241， 创建从数据库的账号（用于从机复制）<br/>
     GRANT REPLICATION SLAVE ON *.* TO repl@'192.168.5.242' IDENTIFIED BY 'repl';<br/><br/>
（21）192.168.5.242，<br/>
     mysql -uroot -proot<br/>
（22）192.168.5.242, 设置从数据库参数<br/>
     mysql&gt; change master to master_host='192.168.5.241', master_user='repl', master_password='repl',master_log_file='mysql-bin.000001', master_log_pos=107;<br/>
（23）192.168.5.241,<br/>
        unlock tables;<br/>
（24）192.168.5.242， 对应的停止的指令为：stop slave<br/>
     start slave;<br/>
（25）192.168.5.242<br/>
     show slave status\G;<br/>
（26）192.168.5.241<br/>
     SHOW DATABASES;<br/>
（27）192.168.5.241<br/>
     use ruida<br/>
     show tables;<br/>
（28）192.168.5.241<br/>
     create table ljk (id int(10));<br/>
（29）192.168.5.241<br/>
     insert into ljk values ('1');<br/>
（30）192.168.5.242<br/>
     use ruida<br/>
     show tables;<br/>
（31）192.168.5.242<br/>
     select * from ljk;<br/>
（32）192.168.5.242<br/>
     insert into ljk values ('2');<br/>
（33）192.168.5.242<br/>
     select * from ljk;<br/>
（34）192.168.5.241<br/>
     select * from ljk;<br/>
后面几步就是用来校验：主数据库插入一条记录，从数据库是否同步；从数据库插入一条记录，主数据库不会同步<br/><br/></span></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>1.3：MySQL 主从配置上的一些操作要点.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/1.3：MySQL%20主从配置上的一些操作要点.html">file:///E:/同步/同步/部署/部署/1.3：MySQL%20主从配置上的一些操作要点.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1246"></a><h1>1.3：MySQL 主从配置上的一些操作要点</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">A: 判断主数据库是否能连接上（主要repl是实际的主从用户名，要根据实际相关相应修改）：<br/>
mysql -urepl -prepl -h 192.168.5.209<br/><br/>
B：查看从数据库状态（出现如下记录才是说明主从配置成功）<br/>
show slave status\G;<br/>
mysql&gt; show slave status\G;<br/>
*************************** 1. row ***************************<br/>
               Slave_IO_State: Waiting for master to send event<br/>
                  Master_Host: 192.168.5.209<br/>
                  Master_User: repl<br/>
                  Master_Port: 3306<br/>
                Connect_Retry: 60<br/>
              Master_Log_File: mysql-bin.000002<br/>
          Read_Master_Log_Pos: 485<br/>
               Relay_Log_File: MySQL2-relay-bin.000003<br/>
                Relay_Log_Pos: 631<br/>
        Relay_Master_Log_File: mysql-bin.000002<br/>
             Slave_IO_Running: Yes<br/>
            Slave_SQL_Running: Yes<br/>
              Replicate_Do_DB:<br/>
          Replicate_Ignore_DB:<br/>
           Replicate_Do_Table:<br/>
       Replicate_Ignore_Table:<br/>
      Replicate_Wild_Do_Table:<br/>
  Replicate_Wild_Ignore_Table:<br/>
                   Last_Errno: 0<br/>
                   Last_Error:<br/>
                 Skip_Counter: 0<br/>
          Exec_Master_Log_Pos: 485<br/>
              Relay_Log_Space: 1083<br/>
              Until_Condition: None<br/>
               Until_Log_File:<br/>
                Until_Log_Pos: 0<br/>
           Master_SSL_Allowed: No<br/>
           Master_SSL_CA_File:<br/>
           Master_SSL_CA_Path:<br/>
              Master_SSL_Cert:<br/>
            Master_SSL_Cipher:<br/>
               Master_SSL_Key:<br/>
        Seconds_Behind_Master: 0<br/>
Master_SSL_Verify_Server_Cert: No<br/>
                Last_IO_Errno: 0<br/>
                Last_IO_Error:<br/>
               Last_SQL_Errno: 0<br/>
               Last_SQL_Error:<br/>
  Replicate_Ignore_Server_Ids:<br/>
             Master_Server_Id: 1<br/>
1 row in set (0.00 sec)<br/><br/>
ERROR:<br/>
No query specified<br/><br/>
C：查看主数据库有哪些用户:<br/>
select user,host from mysql.user;<br/>
mysql&gt; select user,host from mysql.user;<br/>
+-------+---------------+<br/>
| user  | host          |<br/>
+-------+---------------+<br/>
| root  | %             |<br/>
| ruida | %             |<br/>
| root  | 127.0.0.1     |<br/>
| repl  | 192.168.5.210 |<br/>
| root  | ::1           |<br/>
|       | localhost     |<br/>
| root  | localhost     |<br/>
|       | mysql1        |<br/>
| root  | mysql1        |<br/>
+-------+---------------+<br/>
9 rows in set (0.00 sec)<br/>
D: delete from mysql.user where user='repl';<br/></span></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>1.4：MySQL 常用操作手册</h1><b>作者：</b> meilingzhw<br/></td></tr></table></div><div><div><a name="1248" shape="rect"></a><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">资料来源网址：<br clear="none"/> http://www.cnblogs.com/zhenmingliu/archive/2012/05/25/2518691.html<br clear="none"/><br clear="none"/> MySQL常规练习 .MySQL安装成功后的进入方式<br clear="none"/> 1、MySQL安装成功后的进入方式<br clear="none"/> /第一种方式进入：<br clear="none"/> 点击开始---&gt;所有程序---&gt;Mysql--&gt;Mysql Server5.0---&gt;Mysql Command Line Client 点击<br clear="none"/> 提示Enter password: root  回车<br clear="none"/> 即可进入Mysql操作界面：<br clear="none"/> show databases;//显示所有的数据库<br clear="none"/> use test;//选择并使用test数据库<br clear="none"/> show tables;//显示test库中所有表<br clear="none"/>  <br clear="none"/> exit 退出<br clear="none"/>  <br clear="none"/> 第二种进入方式：<br clear="none"/> 开始--运行输入cmd 回车<br clear="none"/> cd/进入 c盘根目录<br clear="none"/> cd 切换到：<br clear="none"/> C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br clear="none"/> 在此目录中采用<br clear="none"/> mysql - u root -p<br clear="none"/> mysql -h 127.0.0.1 -u root -p root<br clear="none"/> 回车<br clear="none"/> 提示Enter password: root  回车<br clear="none"/> 即可进入Mysql操作界面：<br clear="none"/> show databases;//显示所有的数据库<br clear="none"/> use test;//选择并使用test数据库<br clear="none"/> show tables;//显示test库中所有表<br clear="none"/>  <br clear="none"/> exit 退出<br clear="none"/>  <br clear="none"/> 第三种方式进入：<br clear="none"/> 开始--运行输入cmd 回车<br clear="none"/> cd/进入 c盘根目录<br clear="none"/> cd 切换到：<br clear="none"/> C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br clear="none"/> 在此目录中采用<br clear="none"/> mysql - u root -p  数据库名称 <br clear="none"/> mysql -h 127.0.0.1 -u root -p root 数据库名称<br clear="none"/> 回车<br clear="none"/> 即可进入Mysql操作界面： 在此种直接可以使用 book数据库<br clear="none"/> show tables;//显示test库中所有表<br clear="none"/><br clear="none"/> mysql密码设置<br clear="none"/> 2、密码设置：<br clear="none"/> 当用户没有设置密码时：<br clear="none"/> 添加密码：<br clear="none"/> mysqladmin -uroot -password ab12 <br clear="none"/>   注：因为开始时root没有密码，所以-p旧密码一项就可以省略了。<br clear="none"/> 当用户存在密码时：<br clear="none"/> 修改密码：<br clear="none"/> cd/进入 c盘根目录<br clear="none"/> cd 切换到：<br clear="none"/> C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br clear="none"/> 采用命令：<br clear="none"/> mysqladmin -uroot -proot password 123<br clear="none"/> 回车后密码及更新为123；<br clear="none"/><br clear="none"/> MySQL常规练习 .MySQL安装成功后的进入方式<br clear="none"/> 1、MySQL安装成功后的进入方式<br clear="none"/> /第一种方式进入：<br clear="none"/> 点击开始---&gt;所有程序---&gt;Mysql--&gt;Mysql Server5.0---&gt;Mysql Command Line Client 点击<br clear="none"/> 提示Enter password: root  回车<br clear="none"/> 即可进入Mysql操作界面：<br clear="none"/> show databases;//显示所有的数据库<br clear="none"/> use test;//选择并使用test数据库<br clear="none"/> show tables;//显示test库中所有表<br clear="none"/> exit 退出<br clear="none"/>  <br clear="none"/> 第二种进入方式：<br clear="none"/> 开始--运行输入cmd 回车<br clear="none"/> cd/进入 c盘根目录<br clear="none"/> cd 切换到：<br clear="none"/> C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br clear="none"/> 在此目录中采用<br clear="none"/> mysql - u root -p<br clear="none"/> mysql -h 127.0.0.1 -u root -p root<br clear="none"/> 回车<br clear="none"/> 提示Enter password: root  回车<br clear="none"/> 即可进入Mysql操作界面：<br clear="none"/> show databases;//显示所有的数据库<br clear="none"/> use test;//选择并使用test数据库<br clear="none"/> show tables;//显示test库中所有表<br clear="none"/> exit 退出<br clear="none"/>  <br clear="none"/> 第三种方式进入：<br clear="none"/> 开始--运行输入cmd 回车<br clear="none"/> cd/进入 c盘根目录<br clear="none"/> cd 切换到：<br clear="none"/> C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br clear="none"/> 在此目录中采用<br clear="none"/> mysql - u root -p  数据库名称 <br clear="none"/> mysql -h 127.0.0.1 -u root -p root 数据库名称<br clear="none"/> 回车<br clear="none"/> 即可进入Mysql操作界面： 在此种直接可以使用 book数据库<br clear="none"/> show tables;//显示test库中所有表<br clear="none"/><br clear="none"/> mysql密码设置<br clear="none"/> 2、密码设置：<br clear="none"/> 当用户没有设置密码时：<br clear="none"/> 添加密码：<br clear="none"/> mysqladmin -uroot -password ab12 <br clear="none"/>   注：因为开始时root没有密码，所以-p旧密码一项就可以省略了。<br clear="none"/>  <br clear="none"/> 当用户存在密码时：<br clear="none"/> 修改密码：<br clear="none"/> cd/进入 c盘根目录<br clear="none"/> cd 切换到：<br clear="none"/> C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br clear="none"/> 采用命令：<br clear="none"/> mysqladmin -uroot -proot password 123<br clear="none"/> 回车后密码及更新为123；<br clear="none"/><br clear="none"/> mysql 增加用户<br clear="none"/> 3、增加用户：<br clear="none"/> （注意：和上面不同，下面的因为是MYSQL环境中的命令，所以后面都带一个分号作为命令结束符） <br clear="none"/>   格式：grant select on 数据库.* to 用户名@登录主机 identified by “密码”<br clear="none"/>  <br clear="none"/>    第一种：<br clear="none"/>  增加一个用户test1密码为abc，让他可以在任何主机上登录，并对所有数据库有查询、插入、修改、删除的权限。首先用以root用户连入MYSQL，然后键入以下命令： <br clear="none"/>   grant select,insert,update,delete on *.* to test1@&quot;%&quot; Identified by &quot;abc&quot;;<br clear="none"/>  <br clear="none"/>   但增加的用户是十分危险的，你想如某个人知道test1的密码，那么他就可以在internet上的任何一台电脑上登录你的mysql数据库并对你的数据可以为所欲为了，解决办法见例第二种： <br clear="none"/>   第一种：增加一个用户test2密码为abc,让他只可以在localhost上登录，并可以对数据库mydb进行查询、插入、修改、删除的操作 （localhost指本地主机，即MYSQL数据库所在的那台主机），这样用户即使用知道test2的密码，他也无法从internet上直接访问数<br clear="none"/> mysql&gt; grant select,insert,update,delete on book.* to test2@localhost Identified by &quot;abc&quot;;<br clear="none"/>  <br clear="none"/>   如果你不想test2有密码，可以再打一个命令将密码消掉。 <br clear="none"/> mysql&gt; grant select,insert,update,delete on book.* to test2@localhost Identified by &quot;&quot;;<br clear="none"/><br clear="none"/> mysql 把指定用户的权限开通出来<br clear="none"/> grant all on *.* to root@'192.168.5.%' identified by 'ruida~'<br clear="none"/><br clear="none"/> mysql 查看错误日志<br clear="none"/> tail -30 ../logs/error.log<br clear="none"/><br clear="none"/> mysql 使得表名不区分大小写<br clear="none"/> LINUX下的MYSQL默认是要区分表名大小写的，哎，弄了那么旧，害死我了。<br clear="none"/>   让MYSQL不区分表名大小写的方法其实很简单：<br clear="none"/>   1.用ROOT登录，修改/etc/my.cnf<br clear="none"/>   2.在[mysqld]下加入一行：lower_case_table_names=1<br clear="none"/>   3.重新启动数据库即可 </span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br clear="none"/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br clear="none"/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br clear="none"/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">mysql 使得表名不区分大小写<br clear="none"/>LINUX下的MYSQL默认是要区分表名大小写的，哎，弄了那么旧，害死我了。<br clear="none"/>　　让MYSQL不区分表名大小写的方法其实很简单：<br clear="none"/>　　1.用ROOT登录，修改/etc/my.cnf<br clear="none"/>　　2.在[mysqld]下加入一行：lower_case_table_names=1<br clear="none"/>　　3.重新启动数据库即可<br clear="none"/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br clear="none"/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br clear="none"/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br clear="none"/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">没有my.cnf文件，怎么办？<br clear="none"/>为什么没有这个文件而MySQL却也能正常启动和使用，这个有两说法：<br clear="none"/>1、my.cnf只是MySQL启动时的一个参数文件，可以没有它，这时MySQL会用内置的默认参数启动；<br clear="none"/>2、MySQL在启动时自动使用/usr/share/mysql/my-medium.cnf文件，这种说法仅限于rpm包安装的MySQL。<br clear="none"/>解决方法很简单，只需复制/usr/share/mysql/my-medium.cnf文件到/etc目录，并改名为my.cnf即可：<br clear="none"/>cp /usr/share/mysql/my-medium.cnf /etc/my.cnf<br clear="none"/>在[mysqld]下加入一行：lower_case_table_names=1<br clear="none"/>其中0：区分大小写，1：不区分大小写</span></div><div><br clear="none"/></div><a href="Evernote_files/1.4：MySQL 常用操作手册.html"><img src="Evernote_files/9c2521dffd5f33e3f5b358cd83c49bf5.png" alt="1.4：MySQL 常用操作手册.html"></a><br clear="none"/><div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>1.4：MySQL 常用操作手册.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/1.4：MySQL%20常用操作手册.html">file:///E:/同步/同步/部署/部署/1.4：MySQL%20常用操作手册.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1248"></a><h1>1.4：MySQL 常用操作手册</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">资料来源网址：<br/>
http://www.cnblogs.com/zhenmingliu/archive/2012/05/25/2518691.html<br/><br/>
MySQL常规练习 .MySQL安装成功后的进入方式<br/>
1、MySQL安装成功后的进入方式<br/>
/第一种方式进入：<br/>
点击开始---&gt;所有程序---&gt;Mysql--&gt;Mysql Server5.0---&gt;Mysql Command Line Client 点击<br/>
提示Enter password: root  回车<br/>
即可进入Mysql操作界面：<br/>
show databases;//显示所有的数据库<br/>
use test;//选择并使用test数据库<br/>
show tables;//显示test库中所有表<br/>
 <br/>
exit 退出<br/>
 <br/>
第二种进入方式：<br/>
开始--运行输入cmd 回车<br/>
cd/进入 c盘根目录<br/>
cd 切换到：<br/>
C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br/>
在此目录中采用<br/>
mysql - u root -p<br/>
mysql -h 127.0.0.1 -u root -p root<br/>
回车<br/>
提示Enter password: root  回车<br/>
即可进入Mysql操作界面：<br/>
show databases;//显示所有的数据库<br/>
use test;//选择并使用test数据库<br/>
show tables;//显示test库中所有表<br/>
 <br/>
exit 退出<br/>
 <br/>
第三种方式进入：<br/>
开始--运行输入cmd 回车<br/>
cd/进入 c盘根目录<br/>
cd 切换到：<br/>
C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br/>
在此目录中采用<br/>
mysql - u root -p  数据库名称 <br/>
mysql -h 127.0.0.1 -u root -p root 数据库名称<br/>
回车<br/>
即可进入Mysql操作界面： 在此种直接可以使用 book数据库<br/>
show tables;//显示test库中所有表<br/><br/>
mysql密码设置<br/>
2、密码设置：<br/>
当用户没有设置密码时：<br/>
添加密码：<br/>
mysqladmin -uroot -password ab12 <br/>
  注：因为开始时root没有密码，所以-p旧密码一项就可以省略了。<br/>
当用户存在密码时：<br/>
修改密码：<br/>
cd/进入 c盘根目录<br/>
cd 切换到：<br/>
C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br/>
采用命令：<br/>
mysqladmin -uroot -proot password 123<br/>
回车后密码及更新为123；<br/><br/>
MySQL常规练习 .MySQL安装成功后的进入方式<br/>
1、MySQL安装成功后的进入方式<br/>
/第一种方式进入：<br/>
点击开始---&gt;所有程序---&gt;Mysql--&gt;Mysql Server5.0---&gt;Mysql Command Line Client 点击<br/>
提示Enter password: root  回车<br/>
即可进入Mysql操作界面：<br/>
show databases;//显示所有的数据库<br/>
use test;//选择并使用test数据库<br/>
show tables;//显示test库中所有表<br/>
exit 退出<br/>
 <br/>
第二种进入方式：<br/>
开始--运行输入cmd 回车<br/>
cd/进入 c盘根目录<br/>
cd 切换到：<br/>
C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br/>
在此目录中采用<br/>
mysql - u root -p<br/>
mysql -h 127.0.0.1 -u root -p root<br/>
回车<br/>
提示Enter password: root  回车<br/>
即可进入Mysql操作界面：<br/>
show databases;//显示所有的数据库<br/>
use test;//选择并使用test数据库<br/>
show tables;//显示test库中所有表<br/>
exit 退出<br/>
 <br/>
第三种方式进入：<br/>
开始--运行输入cmd 回车<br/>
cd/进入 c盘根目录<br/>
cd 切换到：<br/>
C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br/>
在此目录中采用<br/>
mysql - u root -p  数据库名称 <br/>
mysql -h 127.0.0.1 -u root -p root 数据库名称<br/>
回车<br/>
即可进入Mysql操作界面： 在此种直接可以使用 book数据库<br/>
show tables;//显示test库中所有表<br/><br/>
mysql密码设置<br/>
2、密码设置：<br/>
当用户没有设置密码时：<br/>
添加密码：<br/>
mysqladmin -uroot -password ab12 <br/>
  注：因为开始时root没有密码，所以-p旧密码一项就可以省略了。<br/>
 <br/>
当用户存在密码时：<br/>
修改密码：<br/>
cd/进入 c盘根目录<br/>
cd 切换到：<br/>
C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br/>
采用命令：<br/>
mysqladmin -uroot -proot password 123<br/>
回车后密码及更新为123；<br/><br/>
mysql 增加用户<br/>
3、增加用户：<br/>
（注意：和上面不同，下面的因为是MYSQL环境中的命令，所以后面都带一个分号作为命令结束符） <br/>
  格式：grant select on 数据库.* to 用户名@登录主机 identified by “密码”<br/>
 <br/>
   第一种：<br/>
 增加一个用户test1密码为abc，让他可以在任何主机上登录，并对所有数据库有查询、插入、修改、删除的权限。首先用以root用户连入MYSQL，然后键入以下命令： <br/>
  grant select,insert,update,delete on *.* to test1@&quot;%&quot; Identified by &quot;abc&quot;;<br/>
 <br/>
  但增加的用户是十分危险的，你想如某个人知道test1的密码，那么他就可以在internet上的任何一台电脑上登录你的mysql数据库并对你的数据可以为所欲为了，解决办法见例第二种： <br/>
  第一种：增加一个用户test2密码为abc,让他只可以在localhost上登录，并可以对数据库mydb进行查询、插入、修改、删除的操作（localhost指本地主机，即MYSQL数据库所在的那台主机），这样用户即使用知道test2的密码，他也无法从internet上直接访问数<br/>
mysql&gt; grant select,insert,update,delete on book.* to test2@localhost Identified by &quot;abc&quot;;<br/>
 <br/>
  如果你不想test2有密码，可以再打一个命令将密码消掉。 <br/>
mysql&gt; grant select,insert,update,delete on book.* to test2@localhost Identified by &quot;&quot;;<br/><br/>
mysql 把指定用户的权限开通出来<br/>
grant all on *.* to root@'192.168.5.%' identified by 'ruida~'<br/><br/>
mysql 查看错误日志<br/>
tail -30 ../logs/error.log<br/><br/>
mysql 使得表名不区分大小写<br/>
LINUX下的MYSQL默认是要区分表名大小写的，哎，弄了那么旧，害死我了。<br/>
  让MYSQL不区分表名大小写的方法其实很简单：<br/>
  1.用ROOT登录，修改/etc/my.cnf<br/>
  2.在[mysqld]下加入一行：lower_case_table_names=1<br/>
  3.重新启动数据库即可</span></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>2.1：安装Nginx.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/2.1：安装Nginx.html">file:///E:/同步/同步/部署/部署/2.1：安装Nginx.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1250"></a><h1>2.1：安装Nginx</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
安装部署之前，先通过yum方式安装常见的依赖包<br/>
yum install gcc* zlib cmake libxml2 libxml2-devel bzip2 bzip2-devel curl curl-devel libjpeg libjpeg-devel libpng libpng-devel freetype-devel pspell-devel libmcrypt libmcrypt-devel freetypepcre-devel*<br/><br/>
（1）安装pcre（perl兼容的正则表达式）<br/>
yum -y install pcre*<br/><br/>
（2）过程如果出现: wget command not found, 则安装：<br/>
yum -y install wget<br/><br/>
（3）在cmd命令行里，通过pscp从window拷贝nginx到CentOS<br/>
pscp -r -l root -pw root123 F:\CentOSTest\nginx 192.168.5.241:/usr/local/src<br/><br/>
（4）解压<br/>
tar zxvf nginx-1.2.3.tar.gz</span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">mv nginx-* /usr/local/src/ </span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
（5）编译<br/>
./configure --with-http_stub_status_module --prefix=/usr/local/nginx<br/><br/><br/>
（6）安装<br/>
make<br/>
make install<br/><br/></span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">echo $?  返回0成功，返回1失败</span></div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
（7）启动nginx服务：<br/>
/usr/local/nginx/sbin/nginx<br/><br/>
（8）查看nginx进程情况<br/>
ps -ef|grep nginx<br/><br/>
防火墙要关<br/><br/>
（9）在浏览器输入： 192.168.5.247 如果出现欢迎界面，说明nginx安装成功</span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（10）nginx(主)   nginx.conf</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
#user  nobody;<br/>
worker_processes  1;     <span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">#nginx进程数，建议设置为等于CPU总核心数。</span><br/><br/>
#error_log  logs/error.log;             <span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">#全局错误日志定义类型，[ debug | info | notice | warn | error | crit ]</span><br/>
#error_log  logs/error.log  notice;<br/>
#error_log  logs/error.log  info;<br/><br/>
#pid        logs/nginx.pid;<br/><br/><span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">#工作模式与连接数上限</span><br/>
events {<br/>
    worker_connections  1024;     <span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">#单个进程最大连接数（最大连接数=连接数*进程数)</span><br/>
}<br/><br/><span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">#设定http服务器</span><br/>
http {<br/>
    include       mime.types;     <span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">#文件扩展名与文件类型映射表</span><br/>
    default_type  application/octet-stream;     <span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">#默认文件类型</span><br/><br/>
    #log_format  main  '$remote_addr - $remote_user [$time_local] &quot;$request&quot; '<br/>
    #                  '$status $body_bytes_sent &quot;$http_referer&quot; '<br/>
    #                  '&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;';<br/><br/>
    #access_log  logs/access.log  main;<br/><br/>
    sendfile        on;   <span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px;">#开启高效文件传输模式，sendfile指令指定nginx是否调用sendfile函数来输出文件，对于普通应用设为 on，如果用来进行下载等应用磁盘IO重负载应用，可设置为off，以平衡磁盘与网络I/O处理速度，降低系统的负载。注意：如果图片显示不正常把这个改成off。</span><br/>
    #tcp_nopush     on;<br/><br/>
    #keepalive_timeout  0;<br/>
    keepalive_timeout  65;    <span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px;">#长连接超时时间，单位是秒</span><br/><br/>
    #gzip  on;<br/>
   <br/>
    client_max_body_size 1024m;     <span style="background-color: rgb(255, 255, 255); color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px;">#设定请求缓</span><br/></span><div><span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">#upstream的负载均衡，weight是权重，可以根据机器配置定义权重。weigth参数表示权值，权值越高被分配到的几率越大。</span></div>
    upstream   ruida.iqcloud.com  {<br/>
        server   192.168.5.201:8080;<br/>
        server   192.168.5.202:8080;<br/>
        #ip_hash;<br/>
    }<br/>
  upstream   ruida.RuidaMedil.com  {<br/>
        server   192.168.5.203:8080;<br/>
        server   192.168.5.204:8080;<br/>
        #ip_hash;<br/>
    }</div><div><div><span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">#</span><a href="http://www.honhei.com/" style="font-family: 宋体; font-size: 14px; line-height: 28px; color: rgb(51, 51, 51); text-decoration: none;" target="_blank">虚拟主机</a><span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">的配置</span></div>
    server {</div><div><div><span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">#监听端口</span></div>
        listen       80;</div><div><div><span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">#域名可以有多个，用空格隔开</span></div>
        #server_name  localhost;<br/>
        server_name  58.22.30.37:80;<br/><br/>
        #charset koi8-r;<br/><br/>
        #access_log  logs/host.access.log  main;<br/><div><span style="color: rgb(51, 51, 51); font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(255, 255, 255);">#对 &quot;/&quot; 启用反向代理</span></div>
        location / {<br/>
            root   html;<br/>
            index  index.php index.html index.htm;<br/>
        }<br/><br/>
        #error_page  404              /404.html;<br/><br/>
        # redirect server error pages to the static page /50x.html<br/>
        #<br/>
        error_page   500 502 503 504  /50x.html;<br/>
        location = /50x.html {<br/>
            root   html;<br/>
        }<br/><br/>
        # proxy the PHP scripts to Apache listening on 127.0.0.1:80<br/>
        #<br/>
        #location ~ \.php$ {<br/>
        #    proxy_pass   http://127.0.0.1;<br/>
        #}<br/><br/>
        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000<br/>
        #<br/>
        location ~ \.php$ {<br/>
            root           html;<br/>
            fastcgi_pass   127.0.0.1:9000;<br/>
            fastcgi_index  index.php;<br/>
        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;<br/>
            include        fastcgi.conf;<br/>
        }<br/><br/>
        location /IQWebOS/ {<br/><br/>
            proxy_pass    http://192.168.5.202:8080/IQWebOS/;<br/>
            proxy_redirect default ;<br/>
        }<br/>
        location /RuidaMedia/ {<br/><br/>
            proxy_pass    http://ruida.RuidaMedil.com/RuidaMedia/;<br/>
            proxy_redirect default ;<br/>
        }<br/><br/>
        location /ruida/ {<br/>
            proxy_pass http://ruida.iqcloud.com/ruida/;<br/>
            proxy_redirect default;<br/>
        }<br/><br/>
        # deny access to .htaccess files, if Apache's document root<br/>
        # concurs with nginx's one<br/>
        #<br/>
        #location ~ /\.ht {<br/>
        #    deny  all;<br/>
        #}<br/>
    }<br/><br/><br/>
    # another virtual host using mix of IP-, name-, and port-based configuration<br/>
    #<br/>
    #server {<br/>
    #    listen       8000;<br/>
    #    listen       somename:8080;<br/>
    #    server_name  somename  alias  another.alias;<br/><br/>
    #    location / {<br/>
    #        root   html;<br/>
    #        index  index.html index.htm;<br/>
    #    }<br/>
    #}<br/><br/><br/>
    # HTTPS server<br/>
    #<br/>
    #server {<br/>
    #    listen       443;<br/>
    #    server_name  localhost;<br/><br/>
    #    ssl                  on;<br/>
    #    ssl_certificate      cert.pem;<br/>
    #    ssl_certificate_key  cert.key;<br/><br/>
    #    ssl_session_timeout  5m;<br/><br/>
    #    ssl_protocols  SSLv2 SSLv3 TLSv1;<br/>
    #    ssl_ciphers  HIGH:!aNULL:!MD5;<br/>
    #    ssl_prefer_server_ciphers   on;<br/><br/>
    #    location / {<br/>
    #        root   html;<br/>
    #        index  index.html index.htm;<br/>
    #    }<br/>
    #}<br/><br/>
}<br/></div><div><br/></div><div><br/></div></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>3.1：安装 JavaJDK.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/3.1：安装%20JavaJDK.html">file:///E:/同步/同步/部署/部署/3.1：安装%20JavaJDK.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1252"></a><h1>3.1：安装 JavaJDK</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">部署JavaJDK -- 主要 JDK 跟 SDK 是有差别的，这里是JDK<br/><br/>
SDK 是 Software Development Kit 的缩写，中文意思是“软件开发工具包”。<br/>
JDK 是 Java Development Kit 的缩写，中文意思是“JAVA开发工具包”。<br/>
所以，不难看出，SDK是一个总称，JDK是SDK中具体的一种软件开发包。<br/>
补充一点，JDK有三个版本：<br/>
J2SE,standard edition,标准版，是我们通常用的一个版本，从JDK 5.0开始，改名为Java SE。<br/>
J2EE,enterprise edition,企业版，使用这种JDK开发J2EE应用程序，从JDK 5.0开始，改名为Java EE。<br/>
J2ME,micro edtion,主要用于移动设备、嵌入式设备上的java应用程序,从JDK 5.0开始，改名为Java ME<br/><br/>
首先，查看是否已经装有Java<br/>
rpm -qa|grep gcj，如果有<br/>
libgcj-devel-4.4.7-4.el6.i686<br/>
libgcj-4.4.7-4.el6.i686<br/>
java-1.5.0-gcj-1.5.0.0-29.1.el6.i686<br/><br/>
卸载： rpm -e --nodeps java-1.5.0-gcj-1.5.0.0-29.1.el6.i686<br/><br/>
（1） 上传： 4-jdk-6u38-ea-bin-b04-linux-i586-31_oct_2012.bin<br/>
（2）增加可执行权限：chmod +x 4-jdk-6u38-ea-bin-b04-linux-i586-31_oct_2012.bin<br/>
（3）执行安装：./4-jdk-6u38-ea-bin-b04-linux-i586-31_oct_2012.bin<br/>
（4）rpm -qa|grep java<br/>
（5）rpm -e java_cup-0.10k gcc-java --nodeps<br/>
（6）mkdir /usr/java<br/>
（7）mv jdk1.6.0_38 /usr/java/<br/>
（8）添加环境变量： vi /etc/profile<br/><br/>
     JAVA_HOME=/usr/java/jdk1.6.0_34<br/>
     CLASSPATH=$JAVA_HOME/lib/tools.jar:$JAVA_HOME/jre/lib/rt.jar<br/>
     PATH=$JAVA_HOME/bin:$PATH:$HOME/bin:$JAVA_HOME/jre/bin<br/>
     export JAVA_HOME CLASSPATH PATH<br/>
（9）  使环境变量生效<br/>
     source /etc/profile<br/>
（10）查看有没有配置成功：java -version</span></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>4.1 ：安装tomcat.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/4.1%20：安装tomcat.html">file:///E:/同步/同步/部署/部署/4.1%20：安装tomcat.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1254"></a><h1>4.1 ：安装tomcat</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
（1）上传：apache-tomcat-6.0.39.zip<br/>
（2）解压：unzip apache-tomcat-6.0.39.zip<br/>
        如果提示： unzip: command not found<br/>
        则安装：yum install -y unzip zip<br/>
（3）mv apache-tomcat-6.0.39 /usr/local/tomcat<br/>
（4）cd /usr/local/tomcat<br/>
（5）chmod +x bin/*<br/>
（6）./bin/startup.sh<br/>
     Using CATALINA_BASE:   /usr/local/tomcat<br/>
     Using CATALINA_HOME:   /usr/local/tomcat<br/>
     Using CATALINA_TMPDIR: /usr/local/tomcat/temp<br/>
     Using JRE_HOME:        /usr/java/jdk1.6.0_38<br/>
     Using CLASSPATH:       /usr/local/tomcat/bin/bootstrap.jar<br/>
（7）ps -ef|grep tomcat<br/>
（8）netstat -npl|grep java<br/>
     tcp        0      0 ::ffff:127.0.0.1:8005       :::*                        LISTEN      10923/java         <br/>
     tcp        0      0 :::8009                     :::*                        LISTEN      10923/java         <br/>
     tcp        0      0 :::8080                     :::*                        LISTEN      10923/java  </span></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>5.1：配置FTP.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/5.1：配置FTP.html">file:///E:/同步/同步/部署/部署/5.1：配置FTP.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1256"></a><h1>5.1：配置FTP</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（1） yum install vsftpd*<br/>
（2） vi /etc/sysconfig/selinux  对配置文件修改为（SELINUX=permissive）：<br/><br/>
     # This file controls the state of SELinux on the system.<br/>
     # SELINUX= can take one of these three values:<br/>
     #     enforcing - SELinux security policy is enforced.<br/>
     #     permissive - SELinux prints warnings instead of enforcing.<br/>
     #     disabled - No SELinux policy is loaded.<br/>
     SELINUX=permissive<br/>
     # SELINUXTYPE= can take one of these two values:<br/>
     #     targeted - Targeted processes are protected,<br/>
     #     mls - Multi Level Security protection.<br/>
     SELINUXTYPE=targeted<br/><br/>
（3） setenforce 0<br/>
（4）vi /etc/vsftpd/user_list<br/>
bin<br/>
daemon<br/>
adm<br/>
lp<br/>
sync<br/>
shutdown<br/>
halt<br/>
mail<br/>
news<br/>
uucp<br/>
operator<br/>
games<br/>
nobody<br/>
（5）vi /etc/vsftpd/ftpusers<br/>
bin<br/>
daemon<br/>
adm<br/>
lp<br/>
sync<br/>
shutdown<br/>
halt<br/>
mail<br/>
news<br/>
uucp<br/>
operator<br/>
games<br/>
nobody<br/>
（5） service vsftpd start<br/>
（6）用FlashFXP进行FTP连接试试看，如果能正常连接说明配置成功<br/>
192.168.5.241<br/>
root<br/>
root123<br/><br/><br/>
/sbin/service vsftpd stop<br/><br/><br/>
C：增加FTP账号<br/>
ftpUser=ruida<br/>
ftpPassword=ruida&amp;ftp<br/>
  C-1：输入，意思是将要产生的ruida映射到磁盘目录glusterfs<br/>
     useradd ruida -d /usr/local/nginx/html/glusterfs/</span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">成功提示：<br/></span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">useradd: warning: the home directory already exists.<br/>
Not copying any file from skel directory into it.<br/>
  C-2：设置密码（过程会提示要输入两次密码）：<br/>
            passwd ruida<br/><br/>
service vsftpd start<br/>
service vsftpd stop<br/>
service vsftpd status<br/><br/><br/>
cp /etc/skel/.bash_profile /boot/glusterfs/<br/>
cp /etc/skel/.bashrc /boot/glusterfs/<br/>
cp /etc/skel/.bash_logout /boot/glusterfs/<br/><br/>
D：记得修改映射目录的权限，否则文件无法上传<br/>
  chmod 777 glusterfs<br/>
  chmod 777 glusterfs/*<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
查看SELinux状态：<br/>
1、/usr/sbin/sestatus -v      ##如果SELinux status参数为enabled即为开启状态<br/>
SELinux status:                 enabled<br/>
2、getenforce                 ##也可以用这个命令检查<br/>
关闭SELinux：<br/>
1、临时关闭（不用重启机器）：<br/>
setenforce 0                  ##设置SELinux 成为permissive模式<br/>
                              ##setenforce 1 设置SELinux 成为enforcing模式<br/>
2、修改配置文件需要重启机器：</span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
修改/etc/selinux/config 文件<br/>
将SELINUX=enforcing改为SELINUX=disabled<br/>
重启机器即可</span></div></div></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>5.2：vsftp.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/5.2：vsftp.html">file:///E:/同步/同步/部署/部署/5.2：vsftp.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1258"></a><h1>5.2：vsftp</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">A： 安装FTP工具<br/>
（1） yum install vsftpd*<br/>
（2） vi /etc/sysconfig/selinux  对配置文件修改为（SELINUX=i）：<br/><br/>
     # This file controls the state of SELinux on the system.<br/>
     # SELINUX= can take one of these three values:<br/>
     #     enforcing - SELinux security policy is enforced.<br/>
     #     permissive - SELinux prints warnings instead of enforcing.<br/>
     #     disabled - No SELinux policy is loaded.<br/>
     SELINUX=permissive<br/>
     # SELINUXTYPE= can take one of these two values:<br/>
     #     targeted - Targeted processes are protected,<br/>
     #     mls - Multi Level Security protection.<br/>
     SELINUXTYPE=targeted<br/><br/>
（3） setenforce 0<br/>
（4）vi /etc/vsftpd/user_list<br/>
bin<br/>
daemon<br/>
adm<br/>
lp<br/>
sync<br/>
shutdown<br/>
halt<br/>
mail<br/>
news<br/>
uucp<br/>
operator<br/>
games<br/>
nobody<br/>
（5）vi /etc/vsftpd/ftpusers<br/>
bin<br/>
daemon<br/>
adm<br/>
lp<br/>
sync<br/>
shutdown<br/>
halt<br/>
mail<br/>
news<br/>
uucp<br/>
operator<br/>
games<br/>
nobody<br/>
（5） service vsftpd start<br/><br/><br/>
（6）用FlashFXP进行FTP连接试试看，如果能正常连接说明配置成功（前提条件要有这个账号）<br/>
192.168.5.241<br/>
root<br/>
root123<br/><br/>
/sbin/service vsftpd stop<br/><br/>
B： 启动、停止、查寻Ftp服务<br/>
     service vsftpd start<br/>
     service vsftpd stop<br/>
      service vsftpd status<br/><br/>
C：增加FTP账号<br/>
ftpUser=ruida<br/>
ftpPassword=ruida&amp;ftp<br/>
  C-1：输入，意思是将要产生的ruida映射到磁盘目录glusterfs<br/>
     useradd ruida -d /glusterfs/<br/>
  C-2：设置密码（过程会提示要输入两次密码）：<br/>
            passwd ruida<br/><br/><br/>
如果报如下错误（可以不予理会，也可以按下面方式处理试试看）：<br/>
useradd: warning: the home directory already exists.<br/>
Not copying any file from skel directory into it.<br/>
Creating mailbox file: File exists<br/><br/>
则处理方式如下：<br/>
cp /etc/skel/.bash_profile /glusterfs/<br/>
cp /etc/skel/.bashrc /glusterfs/<br/>
cp /etc/skel/.bash_logout /glusterfs/<br/><br/><br/>
D：记得修改映射目录的权限，否则文件无法上传<br/>
  chmod 777 glusterfs<br/>
  chmod 777 glusterfs/*<br/><br/><br/>
卸载：yum remove vsftpd<br/><br/><br/>
（IQclass端的上传下载）<br/><br/><br/>
最后 /etc/vsftpd/vsftpd.conf<br/>
pasv_enable=YES<br/>
pasv_min_port=3000<br/>
pasv_max_port=3004<br/><br/>
chroot_local_user=YES   这个要打开<br/><br/><br/><br/>
如下配置：<br/>
# Example config file /etc/vsftpd/vsftpd.conf<br/>
#<br/>
# The default compiled in settings are fairly paranoid. This sample file<br/>
# loosens things up a bit, to make the ftp daemon more usable.<br/>
# Please see vsftpd.conf.5 for all compiled in defaults.<br/>
#<br/>
# READ THIS: This example file is NOT an exhaustive list of vsftpd options.<br/>
# Please read the vsftpd.conf.5 manual page to get a full idea of vsftpd's<br/>
# capabilities.<br/>
#<br/>
# Allow anonymous FTP? (Beware - allowed by default if you comment this out).<br/>
anonymous_enable=No<br/>
#<br/>
# Uncomment this to allow local users to log in.<br/>
local_enable=YES<br/>
#<br/>
# Uncomment this to enable any form of FTP write command.<br/>
write_enable=YES<br/>
#<br/>
# Default umask for local users is 077. You may wish to change this to 022,<br/>
# if your users expect that (022 is used by most other ftpd's)<br/>
local_umask=022<br/>
#<br/>
# Uncomment this to allow the anonymous FTP user to upload files. This only<br/>
# has an effect if the above global write enable is activated. Also, you will<br/>
# obviously need to create a directory writable by the FTP user.<br/>
#anon_upload_enable=YES<br/>
#<br/>
# Uncomment this if you want the anonymous FTP user to be able to create<br/>
# new directories.<br/>
#anon_mkdir_write_enable=YES<br/>
#<br/>
# Activate directory messages - messages given to remote users when they<br/>
# go into a certain directory.<br/>
dirmessage_enable=YES<br/>
#<br/>
# The target log file can be vsftpd_log_file or xferlog_file.<br/>
# This depends on setting xferlog_std_format parameter<br/>
xferlog_enable=YES<br/>
#<br/>
# Make sure PORT transfer connections originate from port 20 (ftp-data).<br/>
connect_from_port_20=YES<br/>
#<br/>
# If you want, you can arrange for uploaded anonymous files to be owned by<br/>
# a different user. Note! Using &quot;root&quot; for uploaded files is not<br/>
# recommended!<br/>
#chown_uploads=YES<br/>
#chown_username=whoever<br/>
#<br/>
# The name of log file when xferlog_enable=YES and xferlog_std_format=YES<br/>
# WARNING - changing this filename affects /etc/logrotate.d/vsftpd.log<br/>
#xferlog_file=/var/log/xferlog<br/>
#<br/>
# Switches between logging into vsftpd_log_file and xferlog_file files.<br/>
# NO writes to vsftpd_log_file, YES to xferlog_file<br/>
xferlog_std_format=YES<br/>
#<br/>
# You may change the default value for timing out an idle session.<br/>
#idle_session_timeout=600<br/>
#<br/>
# You may change the default value for timing out a data connection.<br/>
#data_connection_timeout=120<br/>
#<br/>
# It is recommended that you define on your system a unique user which the<br/>
# ftp server can use as a totally isolated and unprivileged user.<br/>
#nopriv_user=ftpsecure<br/>
#<br/>
# Enable this and the server will recognise asynchronous ABOR requests. Not<br/>
# recommended for security (the code is non-trivial). Not enabling it,<br/>
# however, may confuse older FTP clients.<br/>
#async_abor_enable=YES<br/>
#<br/>
# By default the server will pretend to allow ASCII mode but in fact ignore<br/>
# the request. Turn on the below options to have the server actually do ASCII<br/>
# mangling on files when in ASCII mode.<br/>
# Beware that on some FTP servers, ASCII support allows a denial of service<br/>
# attack (DoS) via the command &quot;SIZE /big/file&quot; in ASCII mode. vsftpd<br/>
# predicted this attack and has always been safe, reporting the size of the<br/>
# raw file.<br/>
# ASCII mangling is a horrible feature of the protocol.<br/>
#ascii_upload_enable=YES<br/>
#ascii_download_enable=YES<br/>
#<br/>
# You may fully customise the login banner string:<br/>
#ftpd_banner=Welcome to blah FTP service.<br/>
#<br/>
# You may specify a file of disallowed anonymous e-mail addresses. Apparently<br/>
# useful for combatting certain DoS attacks.<br/>
#deny_email_enable=YES<br/>
# (default follows)<br/>
#banned_email_file=/etc/vsftpd/banned_emails<br/>
#<br/>
# You may specify an explicit list of local users to chroot() to their home<br/>
# directory. If chroot_local_user is YES, then this list becomes a list of<br/>
# users to NOT chroot().<br/>
chroot_local_user=YES<br/>
#chroot_list_enable=YES<br/>
# (default follows)<br/>
#chroot_list_file=/etc/vsftpd/chroot_list<br/>
#<br/>
# You may activate the &quot;-R&quot; option to the builtin ls. This is disabled by<br/>
# default to avoid remote users being able to cause excessive I/O on large<br/>
# sites. However, some broken FTP clients such as &quot;ncftp&quot; and &quot;mirror&quot; assume<br/>
# the presence of the &quot;-R&quot; option, so there is a strong case for enabling it.<br/>
#ls_recurse_enable=YES<br/>
#<br/>
# When &quot;listen&quot; directive is enabled, vsftpd runs in standalone mode and<br/>
# listens on IPv4 sockets. This directive cannot be used in conjunction<br/>
# with the listen_ipv6 directive.<br/>
listen=YES<br/>
#<br/>
# This directive enables listening on IPv6 sockets. To listen on IPv4 and IPv6<br/>
# sockets, you must run two copies of vsftpd with two configuration files.<br/>
# Make sure, that one of the listen options is commented !!<br/>
#listen_ipv6=YES<br/><br/>
pasv_enable=YES<br/>
pasv_min_port=3000<br/>
pasv_max_port=3004<br/><br/>
pam_service_name=vsftpd<br/>
userlist_deny=NO<br/>
#userlist_enable=YES<br/>
tcp_wrappers=YES<br/><br/><br/>
查看SELinux状态：<br/>
1、/usr/sbin/sestatus -v      ##如果SELinux status参数为enabled即为开启状态<br/>
SELinux status:                 enabled<br/>
2、getenforce                 ##也可以用这个命令检查<br/>
关闭SELinux：<br/>
1、临时关闭（不用重启机器）：<br/>
setenforce 0                  ##设置SELinux 成为permissive模式<br/>
                              ##setenforce 1 设置SELinux 成为enforcing模式<br/>
2、修改配置文件需要重启机器：<br/>
修改/etc/selinux/config 文件<br/>
将SELINUX=enforcing改为SELINUX=disabled<br/>
重启机器即可<br/><br/><br/></span></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>6.1：配置Zookeeper.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/6.1：配置Zookeeper.html">file:///E:/同步/同步/部署/部署/6.1：配置Zookeeper.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1260"></a><h1>6.1：配置Zookeeper</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（1）上传zookeeper       注意是160多M那个才是<br/>
（2）tar zxvf zookeeper-3.4.5.tar.gz   --- 省掉<br/>
（3）cd zookeeper-3.4.5<br/>
（4）cd ..<br/>
（5）mv zookeeper-3.4.5 /usr/local<br/>
（6）cd /usr/local<br/>
（7）ls<br/>
（8）cd zookeeper-3.4.5/<br/>
（9）ls<br/>
（10）ls conf/<br/>
（11） ls bin/<br/>
（12）chmod 777 ../bin/*<br/>
（13）./usr/local/zookeeper-3.4.5/bin/zkServer.sh<br/>
（14）/usr/local/zookeeper-3.4.5/bin/zkServer.sh start<br/>
（15）ps -ef|grep zoo<br/><br/><br/><br/><br/>
一、安装需求<br/>
安装java 1.6及hadoop 0.20.x<br/><br/>
二、安装zookeeper<br/>
1、下载zookeeper<br/>
wget http://mirror.bit.edu.cn/apache//zookeeper/zookeeper-3.4.3/zookeeper-3.4.3.tar.gz（本次安装3.4.3版本）<br/>
其他版本下载地址（最好使用stable版本）：http://zookeeper.apache.org/releases.html<br/><br/>
2、解压<br/>
tar -xf zookeeper-3.4.3.tar.gz<br/>
将解压后的zookeeper-3.4.3文件放在系统的/home/hadooptest/中。<br/><br/>
3、将zookeeper-3.4.3/conf目录下的zoo_sample.cfg文件拷贝一份，命名为为“zoo.cfg”<br/><br/>
4、修改zoo.cfg配置文件<br/>
修改zoo.cfg内容为：<br/>
# The number of milliseconds of each tick<br/>
tickTime=2000<br/>
# The number of ticks that the initial <br/>
# synchronization phase can take<br/>
initLimit=10<br/>
# The number of ticks that can pass between <br/>
# sending a request and getting an acknowledgement<br/>
syncLimit=5<br/>
# the directory where the snapshot is stored.</span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"># do not use /tmp for storage, /tmp here is just <br/>
# example sakes.<br/>
dataDir=/home/hadooptest/zookeeper-3.4.3/zookeeperdir/zookeeper-data   </span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">dataLogDir=/home/hadooptest/zookeeper-3.4.3/zookeeperdir/logs<br/><br/>
# the port at which the clients will connect<br/>
clientPort=2181<br/>
#<br/>
# Be sure to read the maintenance section of the <br/>
# administrator guide before turning on autopurge.<br/>
#<br/>
# http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance<br/>
#<br/>
# The number of snapshots to retain in dataDir<br/>
#autopurge.snapRetainCount=3<br/>
# Purge task interval in hours<br/>
# Set to &quot;0&quot; to disable auto purge feature<br/>
#autopurge.purgeInterval=1<br/><br/>
# 2888,3888 are election port<br/>
server.1=zookeeper:2888:3888<br/><br/>
dataDir=/home/hadooptest/zookeeper-3.4.3/zookeeperdir/zookeeper-data   (在zookeeperdir创建zookeeper-data)</span></div><div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">dataLogDir=/home/hadooptest/zookeeper-3.4.3/zookeeperdir/logs  (在zookeeperdir创建logs  )</span></div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/>
 其中，2888端口号是zookeeper服务之间通信的端口，而3888是zookeeper与其他应用程序通信的端口。而zookeeper是在hosts中已映射了本机的ip。<br/>
initLimit：这个配置项是用来配置 Zookeeper 接受客户端（这里所说的客户端不是用户连接 Zookeeper服务器的客户端，而是 Zookeeper 服务器集群中连接到 Leader 的 Follower 服务器）初始化连接时最长能忍受多少个心跳时间间隔数。当已经超过 10 个心跳的时间（也就是 tickTime）长度后 Zookeeper 服务器还没有收到客户端的返回信息，那么表明这个客户端连接失败。总的时间长度就是 5*2000=10 秒。<br/>
syncLimit：这个配置项标识 Leader 与 Follower 之间发送消息，请求和应答时间长度，最长不能超过多少个 tickTime 的时间长度，总的时间长度就是 2*2000=4 秒。<br/>
server.A=B：C：D：其中 A 是一个数字，表示这个是第几号服务器；B 是这个服务器的 ip 地址；C 表示的是这个服务器与集群中的 Leader 服务器交换信息的端口；D 表示的是万一集群中的 Leader 服务器挂了，需要一个端口来重新进行选举，选出一个新的 Leader，而这个端口就是用来执行选举时服务器相互通信的端口。如果是伪集群的配置方式，由于 B 都是一样，所以不同的 Zookeeper 实例通信端口号不能一样，所以要给它们分配不同的端口号。<br/><br/>
5、创建dataDir参数指定的目录(这里指的是“ /home/hadooptest/zookeeper-3.4.3/zookeeperdir/zookeeper-data”)，并在目录下创建文件，命名为“myid”。<br/><br/>
6、编辑“myid”文件，并在对应的IP的机器上输入对应的编号。如在zookeeper上，“myid”文件内容就是1。由于本次只在单点上进行安装配置，所以只有一个server.1。若还有其他服务器，比如地址为192.168.1.102，则在zoo.cfg文件中还需加入server.2=192.168.1.102:2888:3888。那么myid文件在192.168.1.102服务器上的内容就是2。<br/>
至此，如果是多服务器配置，就需要将zookeeper-3.4.3目录拷贝到其他服务器，然后按照上述的方法修改myid。<br/><br/>
7、在/etc/profile文件中设置PATH<br/>
修改profile文件：<br/>
sudo vi /etc/profile<br/><br/>
export ZOOKEEPER_HOME=/usr/local/zookeeper-3.4.3<br/>
PATH=$ZOOKEEPER_HOME/bin:$PATH<br/>
export PATH<br/><br/><br/></span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">7.1  source /etc/profile</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">8、安装完毕<br/><br/>
三、启动并测试zookeeper<br/>
1、在所有服务器中执行：zookeeper-3.4.3/bin/zkServer.sh start<br/><br/>
2、输入jps命令查看进程：<br/>
namenode上显示为（本次为单机配置）：<br/>
7724 DataNode<br/>
19769 HMaster<br/>
7485 NameNode<br/>
8064 JobTracker<br/>
19361 QuorumPeerMain<br/>
8323 TaskTracker<br/>
7972 SecondaryNameNode<br/>
21691 Jps<br/>
19988 HRegionServer<br/><br/>
其中，QuorumPeerMain是zookeeper进程，启动正常。（HMaster和HRegionServer为已启动的hbase进程，其他为安装hadoop后启动的进程）<br/><br/>
3、查看状态：zookeeper-3.4.3/bin/zkServer.sh status<br/>
JMX enabled by default<br/>
Using config: /home/hadooptest/zookeeper-3.4.3/bin/../conf/zoo.cfg<br/>
Mode: standalone<br/><br/>
4、启动客户端脚本：zookeeper-3.4.3/bin/zkCli.sh -server zookeeper:2181<br/>
WatchedEvent state:SyncConnected type:None path:null<br/>
[zk: zookeeper:2181(CONNECTED) 0] <br/>
[zk: zookeeper:2181(CONNECTED) 0] help<br/>
ZooKeeper -server host:port cmd args<br/>
        connect host:port<br/>
        get path [watch]<br/>
        ls path [watch]<br/>
        set path data [version]<br/>
        rmr path<br/>
        delquota [-n|-b] path<br/>
        quit <br/>
        printwatches on|off<br/>
        create [-s] [-e] path data acl<br/>
        stat path [watch]<br/>
        close <br/>
        ls2 path [watch]<br/>
        history <br/>
        listquota path<br/>
        setAcl path acl<br/>
        getAcl path<br/>
        sync path<br/>
        redo cmdno<br/>
        addauth scheme auth<br/>
        delete path [version]<br/>
        setquota -n|-b val path<br/>
[zk: zookeeper:2181(CONNECTED) 1] ls /<br/>
[hbase, zookeeper]<br/>
[zk: zookeeper:2181(CONNECTED) 2] <br/><br/>
5、停止zookeeper进程：zookeeper-3.4.3/bin/zkServer.sh stop</span></div></div></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>6-PC-Service 分布式文件系统.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/6-PC-Service%20分布式文件系统.html">file:///E:/同步/同步/部署/部署/6-PC-Service%20分布式文件系统.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1262"></a><h1>6-PC-Service 分布式文件系统</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">Glusterfs 分布式文件系统配置笔记<br/><br/>
端口号： ps -aux | grep glusterfs<br/>
49152<br/><br/>
六台机子信息：<br/>
Nginx：192.168.5.205<br/>
Nginx：192.168.5.206<br/>
Tomcat1：192.168.5.201<br/>
Tomcat2：192.168.5.202<br/><br/>
服务端的目录信息：<br/>
tomcat1： /boot/glusterfs<br/>
tomcat2： /home/glusterfs<br/><br/>
服务端：<br/>
Tomcat1为：192.168.5.201<br/>
Tomcat2为：192.168.5.202<br/><br/>
客户端：<br/>
nginx1 为：192.168.5.205<br/>
nginx2 为：192.168.5.206<br/><br/>
（1）在两台服务端都执行：<br/>
vi /etc/yum.repos.d/glusterfs-epel.repo<br/><br/>
输入：<br/>
[glusterfs-epel]<br/>
name=GlusterFS is a clustered file-system capable of scaling to several petabytes.<br/>
baseurl=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-$releasever/$basearch/<br/>
enabled=1<br/>
skip_if_unavailable=1<br/>
gpgcheck=1<br/>
gpgkey=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/pub.key<br/>
[glusterfs-noarch-epel]<br/>
name=GlusterFS is a clustered file-system capable of scaling to several petabytes.<br/>
baseurl=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-$releasever/noarch<br/>
enabled=1<br/>
skip_if_unavailable=1<br/>
gpgcheck=1<br/>
gpgkey=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/pub.key<br/>
[glusterfs-source-epel]<br/>
name=GlusterFS is a clustered file-system capable of scaling to several petabytes. - Source<br/>
baseurl=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-$releasever/SRPMS<br/>
enabled=0<br/>
skip_if_unavailable=1<br/>
gpgcheck=1<br/>
gpgkey=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/pub.key<br/><br/>
（2）在两台服务器上都执行：<br/>
yum install glusterfs glusterfs-server<br/><br/>
（3）在两台服务器上都执行，启动服务：<br/>
service glusterd start<br/><br/>
（4）将用于存储的主机加入到“存储池”，这边只要在两台服务器任选一台执行，这边就选择Tomcat1：192.168.5.201，执行如下：<br/>
gluster peer probe 192.168.5.202<br/><br/>
（5）存储池内的信息（任一台），这边选择Tomcat1：192.168.5.201<br/>
gluster peer status<br/>
结果例如：<br/>
Number of Peers: 1<br/><br/>
Hostname: 192.168.5.202<br/>
Uuid: b40caadc-3afb-433b-a769-62f52d0a8b92<br/>
State: Peer in Cluster (Connected)<br/><br/>
（6）df -h 并挂接分区 ---------  Del -----<br/>
mount -t ntfs-3g /dev/sda2 /data/ftp-data<br/>
查挂接结果<br/>
mount <br/>
这里分区已经映射到：/home<br/>
df -h /home<br/>
/dev/sda2              25G  172M   24G   1% /home<br/>
mount -t auto /dev/sda2 /home<br/><br/>
（7）Create volume（创建卷）<br/>
Glusterfs的卷有多种可选模式，我们采用其中的两种Distributed和Replicated，其中Distributed类似于磁盘的RAID 0模式；Replicated类似于磁盘的RAID1模式（glusterfs中可以制定副本的数量，这里我们存储两个副本即可）。我们利用此两种模式在两台台server间做成类似于RAID 10的模式，提供高性能和高可用的存储服务。<br/>
在任意一台server执行：<br/>
gluster volume create ftp-volume replica 2 192.168.5.201:/boot/glusterfs 192.168.5.202:/home/glusterfs<br/><br/>
gluster volume create ftp-volume replica 2 192.168.5.211:/data/ftp-data 192.168.5.169:/home 192.168.5.209:/home 192.168.5.210:/home force   ?????<br/><br/>
##上述命令中：dir为每台服务器上要加入存储池的目录（此目录最好做一个单独分区挂载至此目录）。按照上述命令server2：/dir作为server1:/dir的副本；server4:/dir作为server3:/dir的副本<br/><br/>
（8）gluster volume start ftp-volume<br/>
（9）gluster volume status<br/>
（10）在nginx主：192.168.5.166<br/>
（11）nginx主、备<br/>
yum install glusterfs glusterfs-client<br/><br/>
（12）选择服务器任意一台这边选择tomcat1：192.168.5.201<br/>
mount -t glusterfs 192.168.5.201:/ftp-volume /usr/local/nginx/html/ruida<br/><br/>
（13）在/etc/rc.local添加如下内容，以便实现开机自动挂载<br/>
mount -t glusterfs 192.168.5.201:/ftp-volume /glusterfs/  2&gt;/var/log/gluster-client.err</span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><font color="#FF0000" face="宋体" size="1"><span style="font-size:9pt"><b>mount</b></span></font> <font color="#010101" face="宋体" size="1"><span style="font-size:9pt">-t glusterfs 192.168.5.209:/resources /glusterfsConsume/</span></font></span></div><br/>
（14）df -h<br/>
（15）在客户端建立目录或者文件，服务端会自己同步过来<br/><br/><br/><br/><br/></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>7.1：配置Redis.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/7.1：配置Redis.html">file:///E:/同步/同步/部署/部署/7.1：配置Redis.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1264"></a><h1>7.1：配置Redis</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（1）yum install tcl* libstdc++*       yum install gcc <br/>
（2）上传redis-2.8.8.tar.gz<br/>
（3）解压redis:<br/>
        tar zxvf redis-2.8.8.tar.gz<br/>
（4）cd redis-2.8.8<br/>
（5）make  /  <span style="font-family: 微软雅黑, Verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 28px; background-color: rgb(247, 250, 253);">make MALLOC=libc</span><br/>
（6）cd ..    <br/>
（7）cd /usr/local<br/>
（8）cd redis-2.8.8/<br/>
（9）ls src/<br/>
（10）cd src/<br/>
（11）./redis-server  或者： /usr/local/redis-2.8.8/src/redis-server &amp;   ---在后台启动<br/>
（12）Ctrl + z<br/>
（13） ps -ef|grep redis<br/>
（14）开机启动：<br/>
vi /etc/rc.local<br/>
加入：<br/>
/usr/local/redis-2.8.8/src/redis-server &amp;<br/>
（15）cd /usr/local/src</span></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>8.1：配置keepalived.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/8.1：配置keepalived.html">file:///E:/同步/同步/部署/部署/8.1：配置keepalived.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1266"></a><h1>8.1：配置keepalived</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（1）上传keepalived<br/>
（2）tar zxvf keepalived-1.2.13.tar.gz<br/>
（3）cd keepalived-1.2.13<br/>
（4）./configure --prefix=/usr/local/keepalived<br/>
（5）make<br/>
（6）make install<br/>
（7）cp -r /usr/local/keepalived/etc/* /etc<br/>
（8）chkconfig --add keepalived<br/>
（9）chkconfig --level 345 keepalived on<br/>
（10）ln -s /usr/local/keepalived/sbin/keepalived /usr/sbin/keepalived<br/>
（11）service keepalived start<br/>
（12）注意：（8）-（11）将keepalived作为系统服务</span></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>8.2：keepalived实现双机热备.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/8.2：keepalived实现双机热备.html">file:///E:/同步/同步/部署/部署/8.2：keepalived实现双机热备.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1268"></a><h1>8.2：keepalived实现双机热备</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（1）主机：192.168.5.241   备用机：192.168.5.242<br/>
（2）keepalived实现双击热备在 “7.1：redis安装、keepalived部署及实现热备（从11310帧开始）.lxe”<br/>
（3）192.168.5.242：<br/>
     cd /usr/local/keepalived<br/>
（4）192.168.5.242<br/>
     mv /etc/keepalived/keepalived.conf /etc/keepalived/keepalived.conf.org<br/>
（5）192.168.5.242<br/>
         vi /etc/keepalived/keepalived.conf<br/>
输入内容：<br/>
global_defs {<br/>
   notification_email {<br/>
     acassen@firewall.loc<br/>
     failover@firewall.loc<br/>
     sysadmin@firewall.loc<br/>
   }<br/>
   notification_email_from Alexandre.Cassen@firewall.loc<br/>
#smtp_server 192.168.200.1<br/>
#smtp_connect_timeout 30<br/>
   router_id LVS_DEVEL<br/>
}<br/><br/>
vrrp_script check_nginx {<br/>
                script &quot;/root/check_nginx.sh&quot;<br/>
                interval 2<br/>
                weight 2<br/>
}<br/>
vrrp_instance VI_1 {<br/>
    state BACKUP                                     <span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"> ####主用MASTER，从用BACKUP</span><br/>
    interface eth1                                        ###网卡<br/>
    virtual_router_id 51                       ###路由器标识<br/>
    priority 90                                   ###优先级<br/>
    mcast_src_ip 192.168.5.242              ###本机IP<br/>
    advert_int 1                                            <span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">####VRRP Multicast广播周期秒数</span><br/>
    authentication {<br/>
        auth_type PASS<br/>
        auth_pass 1111<br/>
    }<br/>
    virtual_ipaddress {<br/>
        192.168.5.244/24<br/><br/>
}<br/>
（6）192.168.5.242<br/>
     vi /root/check_nginx.sh<br/>
输入：<br/>
#!/bin/bash<br/>
A=`ps -C nginx --no-header |wc -l`<br/>
if [ $A -eq 0 ];then<br/>
     /usr/local/nginx/sbin/nginx<br/>
     sleep 3<br/>
     if [ `ps -C nginx --no-header |wc -l` -eq 0 ];then<br/>
     /etc/init.d/keepalived stop<br/>
     fi<br/>
fi<br/><br/>
（7）192.168.5.241<br/>
     cd /usr/local/keepalived<br/>
（8）192.168.5.241<br/>
     mv /etc/keepalived/keepalived.conf /etc/keepalived/keepalived.conf.org<br/>
（9）192.168.5.241<br/>
     vi /etc/keepalived/keepalived.conf<br/>
     输入：<br/>
global_defs {<br/>
   notification_email {<br/>
     acassen@firewall.loc<br/>
     failover@firewall.loc<br/>
     sysadmin@firewall.loc<br/>
   }<br/>
   notification_email_from Alexandre.Cassen@firewall.loc<br/>
#smtp_server 192.168.200.1<br/>
#smtp_connect_timeout 30<br/>
   router_id LVS_DEVEL<br/>
}<br/><br/>
vrrp_script check_nginx {<br/>
                script &quot;/root/check_nginx.sh&quot;<br/>
                interval 2<br/>
                weight 2<br/>
}<br/>
vrrp_instance VI_1 {<br/>
    state MASTER<br/>
    interface eth0<br/>
    virtual_router_id 51<br/>
    priority 100<br/>
    mcast_src_ip 192.168.5.241<br/>
    advert_int 1<br/>
    authentication {<br/>
        auth_type PASS<br/>
        auth_pass 1111<br/>
    }<br/>
    virtual_ipaddress {<br/>
        192.168.5.244/24<br/><br/>
}<br/>
track_script {<br/>
       check_nginx<br/>
       }<br/>
}<br/><br/>
（10）192.168.5.241<br/>
     vi /root/check_nginx.sh<br/>
输入：<br/>
#!/bin/bash<br/>
A=`ps -C nginx --no-header |wc -l`<br/>
if [ $A -eq 0 ];then<br/>
/usr/local/nginx/sbin/nginx<br/>
sleep 3<br/>
if [ `ps -C nginx --no-header |wc -l` -eq 0 ];then<br/>
/etc/init.d/keepalived stop<br/>
fi<br/>
fi<br/><br/>
注意：记得要对 check_nginx.sh 加执行权限<br/>
chmod +x check_nginx.sh<br/><br/>
查看脚本执行是否正常：<br/>
#sh -x check_nginx.sh<br/>
++ ps -C nginx --no-header<br/>
++ wc -l<br/>
+ A=0<br/>
+ '[' 0 -eq 0 ']'<br/>
+ /usr/local/nginx/sbin/nginx<br/>
+ sleep 3<br/>
++ ps -C nginx --no-header<br/>
++ wc -l<br/>
+ '[' 2 -eq 0 ']'<br/><br/>
（11）192.168.5.241<br/>
     service keepalived restart<br/>
（12）ip a      出现如下内容才是正确：<br/>
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 16436 qdisc noqueue state UNKNOWN<br/>
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00<br/>
    inet 127.0.0.1/8 scope host lo<br/>
    inet6 ::1/128 scope host<br/>
       valid_lft forever preferred_lft forever<br/>
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UNKNOWN qlen 1000<br/>
    link/ether 00:0c:29:dd:73:df brd ff:ff:ff:ff:ff:ff<br/>
    inet 192.168.5.241/24 brd 192.168.5.255 scope global eth0<br/>
    inet6 fe80::20c:29ff:fedd:73df/64 scope link<br/>
       valid_lft forever preferred_lft forever<br/>
通过window的cmd要能拼得通：192.168.5.244<br/><br/>
（13）注意点：<br/>
keeplived的 网卡记得要根据实际情况修改： interface eth0<br/>
如果IP漂移不了，估计是：virtual_router_id 51  那个“51”要修改为“60”<br/>
查看keeplived日志： tail -f /var/log/messages<br/>
重启网卡：service network restart<br/><br/><br/><br/><br/><br/>
关于iptable也是一样，如果开启的话，每台机器都会找不到对方而强制启动成master，这时候会访问到后启动的那台上，关于iptable相关的设置我也尝试了很久，可以用以下抓包监控：<br/><br/>
tcpdump -v -i eth0 host 224.0.0.18<br/>
tcpdump -vvv -n -i eth0 host 224.0.0.18<br/><br/>
看到这个网段内所有进行监听的机器，主要必须是双向的，有去有回才对。<br/><br/>
iptable以下规则可以搞定：<br/><br/>
# /sbin/iptables -I INPUT -i eth0 -d 224.0.0.0/8 -j ACCEPT<br/>
# /sbin/iptables -A INPUT -p 112 -i eth0 -j ACCEPT<br/>
# /sbin/iptables -A OUTPUT -p 112 -o eth0 -j ACCEPT<br/>
# /sbin/service iptables save<br/>
注意网卡eth0是内网还是外网。然后重启iptables，keepalived。<br/><br/>
再检查日志看master和backup是否正确进入各自的状态了。<br/><br/><br/></span></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>9.1：安装PHP.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/9.1：安装PHP.html">file:///E:/同步/同步/部署/部署/9.1：安装PHP.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1270"></a><h1>9.1：安装PHP</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">（1）安装libiconv</span><div><pre style="margin-top: 0px; margin-bottom: 10px; padding: 0px; font-family: arial, &apos;courier new&apos;, courier, 宋体, monospace; white-space: pre-wrap; word-wrap: break-word; color: rgb(51, 51, 51); font-size: 14px; line-height: 24px; widows: 1; background-color: rgb(241, 254, 221);"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">yum -y install gcc
</span></pre><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">  tar xvf libiconv-1.12.tar.gz<br/>
  cd libiconv-1.12<br/>
  ./configure<br/>
  make<br/>
  make install<br/><br/>
（2）安装libmcrypt（提供多种加密函数）php的组件</span></div><div><ol start="1" style="font-size: 12px; line-height: 1.4em; margin: 0px 0px 1px; padding: 2px 0px; border: 1px solid rgb(209, 215, 220); list-style-position: initial; list-style-image: initial; color: rgb(43, 145, 175); font-family: Monaco, &apos;DejaVu Sans Mono&apos;, &apos;Bitstream Vera Sans Mono&apos;, Consolas, &apos;Courier New&apos;, monospace; text-align: left; widows: 1; background-color: rgb(255, 255, 255);"><li style="font-size: 1em; margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; border-left-width: 1px; border-left-style: solid; border-left-color: rgb(209, 215, 220); line-height: 18px; background-color: rgb(250, 250, 250);"><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="color: black;">yum install glibc-headers  </span></span></li><li style="font-size: 1em; margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; border-left-width: 1px; border-left-style: solid; border-left-color: rgb(209, 215, 220); line-height: 18px; background-color: rgb(250, 250, 250);"><span style="color: black;">  </span></li><li style="font-size: 1em; margin: 0px 0px 0px 38px; padding: 0px 0px 0px 10px; border-left-width: 1px; border-left-style: solid; border-left-color: rgb(209, 215, 220); line-height: 18px; background-color: rgb(250, 250, 250);"><span style="color: black;">yum install gcc-c++   </span></li></ol>
tar zxvf libmcrypt-2.58.tar.gz<br/>
cd libmcrypt-2.5.8<br/>
./configure<br/>
make<br/>
make install<br/><br/>
如果出错，这这样安装：<br/>
wget http://www.51osos.com/uploads/soft/libmcrypt-2.5.8.tar.gz<br/><br/><br/>
（3）安装php<br/>
yum install openssl*</div><div>yum install -y mysql-devel* </div><div>yum -y install libevent libevent-devel<br/>
yum -y install libxml2 libxml2-devel<br/>
yum -y install curl-devel<br/>
yum -y install libpng-devel<br/>
yum install libjpeg-devel<br/>
yum install freetype-devel<br/>
yum -y install libtool-ltdl-devel<br/>
yum -y install libmcrypt libmcrypt-devel <br/><br/>
tar jxvf php-5.3.28.tar.bz2<br/>
cd php-5.3.28<br/><br/>
64位机子<br/>
ln -s /usr/lib64/mysql/libmysqlclient.so /usr/lib/libmysqlclient.so<br/><br/>
下面这几个有可能不是必须的<br/>
ln -s /usr/lib64/mysql/libmysqlclient.so.16 /usr/lib/libmysqlclient.so.16<br/>
ln -s /usr/lib64/mysql/libmysqlclient_r.so.16 /usr/lib/libmysqlclient_r.so.16<br/>
ln -s /usr/lib64/mysql/mysql_config /usr/lib/mysql_config
<div><p style="font-size: 13px; margin: 10px auto; color: rgb(75, 75, 75); font-family: georgia, verdana, Arial, helvetica, sans-seriff; line-height: 20.7999992370605px; widows: 1; background-color: rgb(255, 255, 255);">ln -s /usr/lib64/mysql/libmysqlclient.a /usr/lib/libmysqlclient.a </p><p style="font-size: 13px; margin: 10px auto; color: rgb(75, 75, 75); font-family: georgia, verdana, Arial, helvetica, sans-seriff; line-height: 20.7999992370605px; widows: 1; background-color: rgb(255, 255, 255);">ln -s /usr/lib64/mysql/libmysqlclient_r..a /usr/lib/libmysqlclient_r.a </p><br/>
查看连接是否正常<br/>
ll /usr/lib/libmysqlclient.so*</div><div><br/></div><div>32位 64位 —— 2014.09.22在北京九龙，九龙公司不部署员说32、64位都适用<br/>
 ./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc --with-mysql --with-mysqli  --with-freetype-dir --with-jpeg-dir --with-png-dir --with-zlib --with-libxml-dir=/usr --enable-xml --disable-rpath --enable-discard-path --enable-safe-mode --enable-ftp --enable-bcmath --enable-shmop --enable-sysvsem --enable-inline-optimization --with-curlwrappers --enable-mbregex --enable-fastcgi --enable-fpm --enable-force-cgi-redirect --enable-mbstring --with-mcrypt --with-gd --enable-gd-native-ttf --with-openssl --with-mhash --enable-pcntl --enable-sockets --with-iconv-dir=/usr/local --with-zlib --enable-zip --with-curl<br/><br/>
 make ZEND_EXTRA_LIBS='-liconv'<br/>
make install<br/><br/><br/><br/>
暂时不用<br/>
./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc --with-mysql --with-mysqli  --with-freetype-dir --with-jpeg-dir --with-png-dir --with-zlib --with-libxml-dir=/usr --enable-xml --disable-rpath --enable-discard-path --enable-safe-mode --enable-bcmath --enable-shmop --enable-sysvsem --enable-inline-optimization --with-curlwrappers --enable-mbregex --enable-fastcgi --enable-fpm --enable-force-cgi-redirect --enable-mbstring --with-mcrypt --with-gd --enable-gd-native-ttf --with-openssl --with-mhash --enable-pcntl --enable-sockets --with-iconv-dir=/usr/local--with-zlib-dir=usr–with-zip<br/>
make<br/>
make clean<br/>
make ZEND_EXTRA_LIBS='-liconv'<br/>
make install<br/><br/>
64位(可能暂时不用这个)：<br/>
CFLAGS=&quot;-O3 -fPIC&quot; ./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc --with-mysql-dir=/usr --with-mysqli  --with-freetype-dir --with-jpeg-dir --with-png-dir --with-zlib --with-libxml-dir=/usr --enable-xml --disable-rpath --enable-discard-path --enable-safe-mode --enable-bcmath --enable-shmop --enable-sysvsem --enable-inline-optimization --with-curlwrappers --enable-mbregex --enable-fastcgi --enable-fpm --enable-force-cgi-redirect --enable-mbstring --with-mcrypt --with-gd --enable-gd-native-ttf --with-openssl --with-mhash --enable-pcntl --enable-sockets --with-iconv-dir=/usr/local --with-zlib-dir=usr<br/>
若编译过程中报mysql相关错误,大多是因为php默认去/usr/lib/下去寻找mysql相关文件，而64为系统rpm方式安装的mysql相关文件在/usr/lib64/下。为相关文件创建软连接即可<br/>
ln -s /usr/lib64/mysql/libmysqlclient.so.16 /usr/lib/libmysqlclient.so.16<br/>
ln -s /usr/lib64/mysql/libmysqlclient_r.so.16 /usr/lib/libmysqlclient_r.so.16<br/>
ln -s /usr/lib64/mysql/mysql_config /usr/lib/mysql_config
<div><p style="margin: 10px auto; color: rgb(75, 75, 75); font-family: georgia, verdana, Arial, helvetica, sans-seriff; font-size: 13px; line-height: 20.7999992370605px; widows: 1; background-color: rgb(255, 255, 255);">ln -s /usr/lib64/mysql/libmysqlclient.a /usr/lib/libmysqlclient.a </p><p style="margin: 10px auto; color: rgb(75, 75, 75); font-family: georgia, verdana, Arial, helvetica, sans-seriff; font-size: 13px; line-height: 20.7999992370605px; widows: 1; background-color: rgb(255, 255, 255);">ln -s /usr/lib64/mysql/libmysqlclient_r..a /usr/lib/libmysqlclient_r.a </p>
编译完成后，执行make<br/>
make ZEND_EXTRA_LIBS='-liconv'<br/>
make install</div><div><br/>
启动PHP<br/>
cp php.ini-production /usr/local/php/etc/php.ini<br/>
cd /usr/local/php/etc<br/>
cp php-fpm.conf.default  php-fpm.conf<br/>
cd ..<br/>
./sbin/php-fpm</div><div><br/>
netstat -npl|grep :9000<br/>
ps -ef|grep php<br/>
cd /usr/local/nginx/conf<br/>
vi nginx.conf<br/>
修改nginx 配置文件，把php请求交给监听在9000端口的php-cgi来处理, 见文档.....<br/><br/>
/usr/local/nginx/sbin/nginx -s reload<br/>
cd ..<br/>
cd html/<br/>
cat index.html<br/>
（4）上传资源。。。<br/>
（5）建立数据库<br/>
mysql -uroot -proot<br/>
create database ruida1;<br/>
create database ruida2;<br/>
（6）导入数据库<br/>
mysql -uroot -proot ruida&lt;ruida.sql<br/>
mysql -uroot -proot ruida2&lt;ruida2.sql<br/>
（7）修改php程序连接的数据库<br/>
     vi data/config.php<br/>
（8）<br/>
select user.host from mysql.user;<br/>
select user,host from mysql.user;<br/>
+------+-----------+<br/>
| user | host      |<br/>
+------+-----------+<br/>
| root | %         |<br/>
| root | 127.0.0.1 |<br/>
| root | ::1       |<br/>
|      | bogon     |<br/>
| root | bogon     |<br/>
|      | localhost |<br/>
| root | localhost |<br/>
+------+-----------+<br/>
7 rows in set (0.00 sec)<br/>
grant all on *.* to root@'192.168.5.%' identified by 'root';<br/>
select user,host from mysql.user;<br/>
+------+-------------+<br/>
| user | host        |<br/>
+------+-------------+<br/>
| root | %           |<br/>
| root | 127.0.0.1   |<br/>
| root | 192.168.5.% |<br/>
| root | ::1         |<br/>
|      | bogon       |<br/>
| root | bogon       |<br/>
|      | localhost   |<br/>
| root | localhost   |<br/>
+------+-------------+<br/>
8 rows in set (0.00 sec)<br/><br/>
（9）<br/>
../sbin/nginx -s reload<br/>
（10）网页开不了，差错<br/>
tail -30 ../logs/error.log<br/>
tail -30 ../logs/access.log<br/>
（10）netstat |grep 3306<br/>
（11）netstat -npl|grep 3306<br/>
（12）PHP如果没开起来( netstat -npl|grep 9000 没任何东西)，则要开启<br/>
./sbin/php-fpm<br/>
（13）安装zip，这一步可以在比较前面实现<br/>
yum install zip<br/>
（14）如果安装php时编译时没有在最后面加上–with-zip，就要重新配置php<br/>
     a.     killall php-fpm<br/>
     b.     ps -ef|grep php<br/>
     c.     cd /usr/local<br/>
     d.     rm -rf php/<br/>
     e.     cd php<br/>
     f.     tar jxvf php-5.3.28.tar.bz2<br/>
     g.     cd php-5.3.28<br/>
     h.     ./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc --with-mysql --with-mysqli  --with-freetype-dir --with-jpeg-dir --with-png-dir --with-zlib --with-libxml-dir=/usr --enable-xml --disable-rpath --enable-discard-path --enable-safe-mode --enable-bcmath --enable-shmop --enable-sysvsem --enable-inline-optimization --with-curlwrappers --enable-mbregex --enable-fastcgi --enable-fpm --enable-force-cgi-redirect --enable-mbstring --with-mcrypt --with-gd --enable-gd-native-ttf --with-openssl --with-mhash --enable-pcntl --enable-sockets --with-iconv-dir=/usr/local--with-zlib-dir=usr–with-zip<br/>
     i.     make ZEND_EXTRA_LIBS='-liconv'<br/>
     j.     make install<br/>
     l.     进入：cd php-5.3.28<br/>
     m.     cp php.ini-production /usr/local/php/etc/php.ini<br/>
     n.     cd /usr/local/php/etc/<br/>
     o.     cp php-fpm.conf.default php-fpm.conf<br/>
         p.     ../sbin/php-fpm<br/>
    <br/>
     至此，PHP又重新配置了<br/>
（15）ll -d /usr/local/nginx/html<br/>
（16）此刻，网页可以访问，但会有提示语<br/>
（17）nginx是以nobody用户运行，而我们直接拷贝的网站目录/usr/local/nginx/html的目录属性为root，需要执行以下命令将其属组更改为<br/>
     chown nobody -R /usr/local/nginx/html/<br/>
（18）因为锐达项目有云盘功能涉及到上传文件，需注意修改php.ini里几处设置（关于php解析超时时间以及上传文件大小限制）：<br/>
     vi /usr/local/php/etc/php.ini<br/>
     修改以下配置指：<br/>
     upload_max_filesize = 1024M<br/>
     post_max_size = 1024M<br/>
     memory_limit = 256M<br/>
     max_execution_time=30<br/>
     file_uploads = On<br/><br/>
     kill all php-fpm<br/>
     ps -ef|grep php<br/>
     /usr/local/php/sbin/php-fpm<br/>
（19）vi /usr/local/nginx/conf/nginx.conf   增加一行： client_max_body_size 1024m 位置如下：<br/>
     #gzip  on;<br/>
    <br/>
        client_max_body_size 1024m;<br/>
   <br/>
        server {<br/></div></div></div><div><br/></div><div><p style="color: rgb(51, 51, 51); font-family: &apos;Comic Sans MS&apos;, &apos;Microsoft YaHei&apos;, Verdana, Arial, Helvetica, sans-serif; font-size: 14px; widows: 1;">然后再次wget http://127.0.0.1/phpinfo.php 进行测试，如果没有内容或无法正常下载，这时问题可能就是出在了：</p><div style="margin: 12px 0px; padding: 0px; text-align: left; box-sizing: border-box; overflow: hidden !important; position: relative !important; direction: ltr !important; width: 880px; font-family: Monaco, MonacoRegular, &apos;Courier New&apos;, monospace; border: 1px !important; text-shadow: none !important; color: rgb(51, 51, 51); widows: 1; font-size: 12px !important; line-height: 15px !important; height: auto;"><div style="margin: 0px; padding: 0px; border: 0px; width: 880px; overflow: hidden; position: relative; z-index: 1; background-position: 0px 50%; background-repeat: initial initial;"><table style="border: none !important; padding: 0px !important; margin: 0px !important; width: auto !important; border-spacing: 0px !important; border-collapse: collapse !important; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><tbody><tr style="padding: 0px !important; border: none !important; vertical-align: top !important; margin: 0px !important; background-position: 0px 50%; background-repeat: initial initial;"><td style="vertical-align: top !important; border-bottom-width: 0px; padding: 0px 5px 0px 0px !important; margin: 0px !important; border-right-style: solid !important; border-top-width: 0px; border-right-width: 3px !important; border-left-width: 0px; border-right-color: rgb(108, 226, 108) !important; color: rgb(175, 175, 175) !important; background-position: 0px 50%; background-repeat: initial initial;"><div style="margin: 0px; padding: 0px; border: 0px; white-space: nowrap; background-position: 0px 50%; background-repeat: initial initial;"><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">1</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">2</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">3</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">4</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">5</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">6</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">7</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">8</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">9</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">10</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">11</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">12</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">13</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">14</div><div style="margin: 0px; padding: 0px 5px; font-family: inherit; border: 0px; text-align: center; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;">15</div></div></td><td style="vertical-align: top !important; border: 0px; padding: 0px !important; margin: 0px !important; width: 847px; background-position: 0px 50%; background-repeat: initial initial;"><div style="margin: 0px; padding: 0px; border: none !important; color: rgb(0, 0, 0); white-space: pre; overflow: visible; background-image: none !important; background-position: initial initial !important; background-repeat: initial initial !important;"><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">[</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">root</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">@</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">dbweb102</span> <span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">~</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">]</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span> <span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">cat</span> <span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">/</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">usr</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">/</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">local</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">/</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">nginx</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">/</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">conf</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">/</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_params</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-color: rgb(249, 249, 249) !important; background-position: initial initial !important; background-repeat: initial initial !important;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">QUERY</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>STRING<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">      </span> <span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">query_string</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">REQUEST</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>METHOD<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">    </span> <span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">request_method</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-color: rgb(249, 249, 249) !important; background-position: initial initial !important; background-repeat: initial initial !important;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">CONTENT</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>TYPE<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">      </span> <span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">content_type</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">CONTENT</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>LENGTH<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">    </span> <span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">content_length</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-color: rgb(249, 249, 249) !important; background-position: initial initial !important; background-repeat: initial initial !important;"> </div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(184, 92, 0) !important;">############# 添加下面这一行 ############</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-color: rgb(249, 249, 249) !important; background-position: initial initial !important; background-repeat: initial initial !important;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">SCRIPT</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>FILENAME<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">    </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">document_root</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">fastcgi_script_name</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(184, 92, 0) !important;">############# 添加上面这一行 ############</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-color: rgb(249, 249, 249) !important; background-position: initial initial !important; background-repeat: initial initial !important;"> </div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">SCRIPT</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>NAME<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">        </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">fastcgi_script_name</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-color: rgb(249, 249, 249) !important; background-position: initial initial !important; background-repeat: initial initial !important;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">REQUEST</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>URI<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">        </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">request_uri</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">DOCUMENT</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>URI<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">      </span> <span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">document_uri</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-color: rgb(249, 249, 249) !important; background-position: initial initial !important; background-repeat: initial initial !important;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">DOCUMENT</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>ROOT<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">      </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">document_root</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div><div style="margin: 0px; padding: 0px 5px 0px 10px; font-family: inherit; border: 0px; height: inherit; font-size: inherit !important; line-height: inherit !important; background-position: 0px 50%; background-repeat: initial initial;"><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 78, 208) !important;">fastcgi_param  </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">SERVER</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">_</span>PROTOCOL<span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 111, 224) !important;">    </span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">$</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(0, 45, 122) !important;">server_protocol</span><span style="font-family: inherit; height: inherit; font-size: inherit !important; line-height: inherit !important; color: rgb(51, 51, 51) !important;">;</span></div></div></td></tr></tbody></table></div></div><p style="color: rgb(51, 51, 51); font-family: &apos;Comic Sans MS&apos;, &apos;Microsoft YaHei&apos;, Verdana, Arial, Helvetica, sans-serif; font-size: 14px; widows: 1;"></p><p style="color: rgb(51, 51, 51); font-family: &apos;Comic Sans MS&apos;, &apos;Microsoft YaHei&apos;, Verdana, Arial, Helvetica, sans-serif; font-size: 14px; widows: 1;">不用wget，直接在浏览器中访问http://127.0.0.1/phpinfo.php如果看到不报报错的空白页面，</p></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>9.2：安装PHP可能会遇到的问题无标题笔记.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/9.2：安装PHP可能会遇到的问题无标题笔记.html">file:///E:/同步/同步/部署/部署/9.2：安装PHP可能会遇到的问题无标题笔记.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1272"></a><h1>9.2：安装PHP可能会遇到的问题无标题笔记</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">PHP安装过程出问题时，看看是否需要安装下面的哲别包...<br/>
yum -y install libevent libevent-devel<br/>
yum -y install libxml2 libxml2-devel<br/>
yum -y install curl-devel<br/>
yum -y install libpng-devel<br/>
yum install libjpeg-devel<br/>
yum install freetype-devel<br/>
yum -y install libtool-ltdl-devel<br/>
yum -y install libmcrypt libmcrypt-devel</span></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>10.1 分布式文件系统.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/10.1%20分布式文件系统.html">file:///E:/同步/同步/部署/部署/10.1%20分布式文件系统.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1274"></a><h1>10.1 分布式文件系统</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">Glusterfs 分布式文件系统配置笔记192.168.5.166<br/><br/>
六台机子信息：<br/>
Nginx主机远程ip为58.22.30.37，端口为166，本机ip为192.168.5.166<br/>
Nginx备机远程ip为58.22.30.37，端口为168，本机ip为192.168.5.168<br/>
Tomcat1从远程ip为58.22.30.37，端口为211，本机ip为192.168.5.211<br/>
Tomcat2主远程ip为58.22.30.37，端口为169，本机ip为192.168.5.169<br/>
MYSQL1远程ip为58.22.30.37，端口为209，本机ip为192.168.5.209<br/>
MYSQL2远程ip为58.22.30.37，端口为210，本机ip为192.168.5.210<br/><br/>
服务端：<br/>
Tomcat1为：192.168.5.211<br/>
Tomcat2为：192.168.5.169<br/>
MYSQL1 为：192.168.5.209<br/>
MYSQL2 为：192.168.5.210<br/><br/>
客户端：<br/>
nginx1 为：192.168.5.166<br/>
nginx2 为：192.168.5.168<br/><br/>
（1）在四台服务端都执行：<br/>
vi /etc/yum.repos.d/glusterfs-epel.repo<br/><br/>
输入：<br/>
[glusterfs-epel]<br/>
name=GlusterFS is a clustered file-system capable of scaling to several petabytes.<br/>
baseurl=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-$releasever/$basearch/<br/>
enabled=1<br/>
skip_if_unavailable=1<br/>
gpgcheck=1<br/>
gpgkey=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/pub.key<br/>
[glusterfs-noarch-epel]<br/>
name=GlusterFS is a clustered file-system capable of scaling to several petabytes.<br/>
baseurl=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-$releasever/noarch<br/>
enabled=1<br/>
skip_if_unavailable=1<br/>
gpgcheck=1<br/>
gpgkey=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/pub.key<br/>
[glusterfs-source-epel]<br/>
name=GlusterFS is a clustered file-system capable of scaling to several petabytes. - Source<br/>
baseurl=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/epel-$releasever/SRPMS<br/>
enabled=0<br/>
skip_if_unavailable=1<br/>
gpgcheck=1<br/>
gpgkey=http://download.gluster.org/pub/gluster/glusterfs/LATEST/EPEL.repo/pub.key<br/><br/>
（2）在四台服务器上都执行：<br/>
yum install glusterfs glusterfs-server<br/><br/>
（3）在四台服务器上都执行，启动服务：<br/>
service glusterd start<br/><br/>
（4）将用于存储的主机加入到“存储池”，这边只要在四台服务器任选一台执行，这边就选择Tomcat1：192.168.5.211，执行如下：<br/>
gluster peer probe 192.168.5.169<br/>
gluster peer probe 192.168.5.209<br/>
gluster peer probe 192.168.5.210<br/><br/>
（5）存储池内的信息（任一台），这边选择Tomcat1：192.168.5.211<br/>
gluster peer status<br/>
结果例如：<br/>
Number of Peers: 3<br/><br/>
Hostname: 192.168.5.169<br/>
Uuid: 3801e9ac-cb0b-4631-a37a-bf331936d3db<br/>
State: Peer in Cluster (Connected)<br/><br/>
Hostname: 192.168.5.209<br/>
Uuid: 6e60328f-f02b-4cd9-a495-48dc7f61ec2a<br/>
State: Peer in Cluster (Connected)<br/><br/>
Hostname: 192.168.5.210<br/>
Uuid: f0a7a5bc-b01e-46dc-a132-d9e59754fc35<br/>
State: Peer in Cluster (Connected)<br/><br/>
（6）df -h 并挂接分区<br/>
mount -t ntfs-3g /dev/sda2 /data/ftp-data<br/>
查挂接结果<br/>
mount<br/>
这里分区已经映射到：/home<br/>
df -h /home<br/>
/dev/sda2              25G  172M   24G   1% /home<br/>
mount -t auto /dev/sda2 /home<br/><br/>
（7）Create volume（创建卷）<br/>
Glusterfs的卷有多种可选模式，我们采用其中的两种Distributed和Replicated，其中Distributed类似于磁盘的RAID 0模式；Replicated类似于磁盘的RAID1模式（glusterfs中可以制定副本的数量，这里我们存储两个副本即可）。我们利用此两种模式在4台server间做成类似于RAID 10的模式，提供高性能和高可用的存储服务。<br/>
在任意一台server执行：<br/>
gluster volume create ftp-volume replica 2 192.168.5.211:/data/ftp-data 192.168.5.169:/data/ftp-data 192.168.5.209:/data/ftp-data 192.168.5.210:/data/ftp-data<br/>
gluster volume create ftp-volume replica 2 192.168.5.211:/home 192.168.5.169:/home 192.168.5.209:/home 192.168.5.210:/home<br/>
gluster volume create ftp-volume replica 2 192.168.5.211:/boot 192.168.5.169:/boot 192.168.5.209:/boot 192.168.5.210:/boot<br/>
gluster volume create ftp-volume replica 2 192.168.5.211:/data/ftp-data 192.168.5.169:/home 192.168.5.209:/home 192.168.5.210:/home force   ?????<br/><br/>
##上述命令中：dir为每台服务器上要加入存储池的目录（此目录最好做一个单独分区挂载至此目录）。按照上述命令server2：/dir作为server1:/dir的副本；server4:/dir作为server3:/dir的副本<br/><br/>
（8）gluster volume start ftp-volume<br/>
（9）gluster volume status  状态是N的时候 <font color="#004080" face="微软雅黑" style="text-align: -webkit-left;"><span style="font-size: 12pt;">mount | grep </span></font><span style="text-align: -webkit-left; color: rgb(1, 1, 1); font-family: 宋体; font-size: 12px;">resources</span><br/>
（10）在nginx主：192.168.5.166<br/>
（11）nginx主、备<br/>
yum install glusterfs glusterfs-client<br/><br/>
（12）选择服务器任意一台这边选择tomcat1：192.168.5.211<br/>
mount -t glusterfs 192.168.5.211:/ftp-volume /glusterfs/</span><div><br/>
 
<div>PC六台</div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font color="#004080" face="微软雅黑"><span style="font-size:12pt">mount | grep </span></font><span style="color: rgb(1, 1, 1); font-family: 宋体; font-size: 12px;">resources</span></div><div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font color="#010101" face="宋体" size="1"><span style="font-size:9pt">mount -t glusterfs 192.168.5.209:/resources /glusterfsConsume/</span></font></div><br/>
（13）在/etc/rc.local添加如下内容，以便实现开机自动挂载<br/>
mount -t glusterfs 192.168.5.201:/ftp-volume /glusterfs/  2&gt;/var/log/gluster-client.err<br/><br/>
（14）df -h<br/>
（15）在客户端建立目录或者文件，服务端会自己同步过来<br/><br/>
mount -t glusterfs 192.168.5.112:/ftp-volume /usr/local/nginx/html/ruida/<br/><br/><br/><br/><br/></div></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>A：系统配置信息.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/A：系统配置信息.html">file:///E:/同步/同步/部署/部署/A：系统配置信息.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1276"></a><h1>A：系统配置信息</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">由上到下：<br/>
编号          内存          硬盘          名称          序号                    IP<br/><br/>
1         64G          1T*5          Tomcat2     29307794582           192.168.5.202</span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">2          64G          1T*5          Tomcat1     33661359254          192.168.5.201 </span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">3          64G          1T*5          Nginx2     42610353302            192.168.5.206 </span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">4          16G          1T*2          MySQL2     19648322966          192.168.5.203 </span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">5          16G          1T*2          MySQL1     17471540630          192.168.5.204 </span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">6          64G          1T*5          Nginx1     3488737430              192.168.5.205 <br/><br/>
做Red5时，1T*5分配如下：4T中的300G 系统，余下有1.5T当资源用（150000， 分给boot目录），再剩下的home<br/>
安装系统时选择从300G里再分出一个swap（64*1024=65536）用于交换<br/><br/>
密码：iqcloud.cn.123<br/><br/><br/>
硬盘Red5<br/>
http://zh.community.dell.com/techcenter/systems-management/w/wiki/392<br/>
Dell客服电话：<br/><br/>
1. 亮黄灯问题：<br/>
引起问题的原因：硬盘被爬过，Dell服务器系统日志未清除，导致这个问题<br/><br/>
解决方法：<br/>
（1）找一台机子（非服务器）跟一条网线，将网线连接到服务器后单独一个网口<br/>
（2）将这台机子的IP地址设置成 192.168.0.***  ***不能是120， 子网掩码（255.255.255.0， 一般会自动产生）<br/>
（3）拼 192.168.0.120  120是Dell服务器的IP（他们设置定死的）<br/>
（4）默认用户是：root， 密码：calvin   不区分大小写<br/>
（5）登入进去后，如果有提示要修改密码，可以自己修改一个<br/>
（6）（5）修改完后进去后，在服务器日志那边将日志清除掉就可以<br/><br/>
热备启动，顶替坏掉的硬盘，这时如果还要再加热备的解决方法：<br/>
（1）要同大小同型号的硬盘插进去<br/>
（2）跟设置Red5步骤里面的设置热备盘的方式一样对这块盘设置为热备<br/><br/>
假如4块Red5盘坏掉第三块，想把第三块替换掉的处理方式：<br/>
（1）提供一块跟坏掉的硬盘型号、大小一致的新盘<br/>
（2）拔出坏的硬盘，换上新的硬盘<br/>
（3）如果出现黄灯，按上面方式处理<br/><br/>
如果4块盘做Red5，某天要加上一块盘（第五块），也一起整成Red5<br/>
（1）如果在4块盘做Red5的时候弄成两个分区，那么Red5就要重新做，数据会丢失；<br/>
（2）如果在4块盘做Red5的时候弄成一个分区，是可以支持的。。。<br/><br/>
root<br/>
iqcloud.cn.123<br/>
iqboard.cn.123</span></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>B：数据库配置信息.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/B：数据库配置信息.html">file:///E:/同步/同步/部署/部署/B：数据库配置信息.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1278"></a><h1>B：数据库配置信息</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">装完数据库时，第一次添加的用户名跟密码为：<br/>
root<br/>
root<br/><br/>
服务器内部使用（局域网用）<br/>
ruida<br/>
ruida~<br/><br/>
服务器外部使用<br/>
ruida1<br/>
ruida1~</span></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>C：6台服务器磁盘分区列表.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/C：6台服务器磁盘分区列表.html">file:///E:/同步/同步/部署/部署/C：6台服务器磁盘分区列表.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1280"></a><h1>C：6台服务器磁盘分区列表</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">A：nginx主：192.168.5.205<br/>
Filesystem            Size  Used Avail Use% Mounted on<br/>
/dev/sda1             233G  4.8G  216G   3% /<br/>
tmpfs                  32G  112K   32G   1% /dev/shm<br/>
/dev/sdb1             1.5T  223M  1.4T   1% /boot<br/>
/dev/sdb2            1013G  200M  961G   1% /home<br/><br/>
B：nginx备：192.168.5.206<br/>
Filesystem            Size  Used Avail Use% Mounted on<br/>
/dev/sda1             233G  170G   52G  77% /<br/>
tmpfs                  32G  240K   32G   1% /dev/shm<br/>
/dev/sdb1             1.5T  165G  1.2T  13% /boot<br/>
/dev/sdb2            1013G  200M  961G   1% /home<br/><br/>
C：tomcat1：192.168.5.201<br/>
Filesystem            Size  Used Avail Use% Mounted on<br/>
/dev/sda1             233G  4.2G  217G   2% /<br/>
tmpfs                  32G     0   32G   0% /dev/shm<br/>
/dev/sdb1             1.5T  223M  1.4T   1% /boot<br/>
/dev/sdb2            1013G  200M  961G   1% /home<br/><br/>
D：tomcat2：192.168.5.202<br/>
Filesystem      Size  Used Avail Use% Mounted on<br/>
/dev/sda3       232G  490M  220G   1% /<br/>
tmpfs            32G     0   32G   0% /dev/shmE<br/>
/dev/sda1      1008M   62M  896M   7% /boot<br/>
/dev/sdb2       1.5T  198M  1.4T   1% /home<br/>
/dev/sdb1       1.9T  3.7G  1.8T   1% /usr<br/><br/>
E：MySQL主：192.168.5.204<br/>
Filesystem            Size  Used Avail Use% Mounted on<br/>
/dev/sda2             962G  4.4G  909G   1% /<br/>
tmpfs                 7.8G     0  7.8G   0% /dev/shm<br/>
/dev/sda1             856G  226M  813G   1% /boot<br/><br/>
F：MySQL从：192.168.5.203<br/>
Filesystem            Size  Used Avail Use% Mounted on<br/>
/dev/sda2             962G  4.4G  909G   1% /<br/>
tmpfs                 7.8G     0  7.8G   0% /dev/shm<br/>
/dev/sda1             856G  226M  813G   1% /boot<br/></span></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>centos全面卸载mysql.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/centos全面卸载mysql.html">file:///E:/同步/同步/部署/部署/centos全面卸载mysql.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1282"></a><h1>centos全面卸载mysql</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">CentOS下如何完全卸载MySQL？解决卸载不干净的问题<br/><br/>
系统：CentOS 6.5，MySQL：MySql 5.6<br/><br/>
这里主要解决使用rpm安装的卸载问题，安装方法见：CentOS安装mysql*.rpm提示conflicts with file from package的解决办法<br/><br/>
虽然说这里的是使用rpm安装的卸载问题，我觉得使用yum方式安装的如果遇到相同的问题也一样适用。<br/><br/>
查看已经安装的服务<br/>
rpm –qa|grep -i mysql<br/>
-i 作用是不区分大小写<br/><br/>
可以看到有两个安装包<br/>
MySQL-server-5.6.19-1.linux_glibc2.5.x86_64.rpm<br/>
MySQL-client-5.6.19-1.linux_glibc2.5.x86_64.rpm<br/>
删除这两个服务(去掉后缀)<br/>
rpm –e MySQL-client-5.6.19-1.linux_glibc2.5.x86_64<br/>
rpm -e MySQL-server-5.6.19-1.linux_glibc2.5.x86_64<br/>
查看残留的目录：<br/>
whereis mysql<br/><br/>
然后删除mysql目录：<br/>
rm –rf /usr/lib64/mysql<br/><br/>
删除相关文件：<br/>
rm –rf /usr/my.cnf<br/>
rm -rf /root/.mysql_sercret<br/>
最关键的：<br/>
rm -rf /var/lib/mysql<br/><br/>
如果这个目录如果不删除，再重新安装之后，密码还是之前的密码，不会重新初始化！</span></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>ftp 防火墙.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/ftp%20防火墙.html">file:///E:/同步/同步/部署/部署/ftp%20防火墙.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1284"></a><h1>ftp 防火墙</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">CentOS/RHEL如何设置防火墙允许被动FTP连接<br/>
Sat, 11/21/2009 - 16:46 - tlbluestar<br/>
参考地址： <a href="http://lists.centos.org/pipermail/centos/2005-December/015896.html">http://lists.centos.org/pipermail/centos/2005-December/015896.html</a></span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">关于被动FTP的工作原理，请参阅此文。<br/>
(1)首先修改防火墙iptables的规则，添加如下内容：<br/>
[root@dlghost sysconfig]# vi /etc/sysconfig/iptables<br/>
-A RH-Firewall-1-INPUT -m state --state ESTABLISHED -m tcp -p tcp --sport 1024: --dport 1024: -j ACCEPT<br/>
(2)然后将ip_nat_ftp添加为自动加载模块：<br/>
# cat /etc/sysconfig/iptables-config | grep ip_nat_ftp<br/>
IPTABLES_MODULES=&quot;ip_nat_ftp&quot;<br/>
(3)重新启动iptables防火墙：<br/>
# /etc/init.d/iptables condrestart<br/><br/><br/><br/><br/><br/>
在 /etc/sysconfig/iptables 编辑<br/><br/>
[root@nginx2 ~]# vi /etc/sysconfig/iptables<br/><br/>
# Generated by iptables-save v1.4.7 on Fri Dec 12 20:37:55 2014<br/>
*filter<br/>
:INPUT ACCEPT [0:0]<br/>
:FORWARD ACCEPT [0:0]<br/>
:OUTPUT ACCEPT [0:0]<br/>
-A INPUT -p tcp -m tcp --dport 21 -j ACCEPT<br/>
-A INPUT -p tcp -m tcp --dport 20 -j ACCEPT<br/>
-A INPUT -p icmp -j ACCEPT<br/>
-A INPUT -s 127.0.0.1/32 -d 127.0.0.1/32 -j ACCEPT<br/>
-A INPUT -p tcp -m tcp --dport 80 -j ACCEPT<br/>
-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT<br/>
-A INPUT -p icmp -j ACCEPT<br/>
-A INPUT -i lo -j ACCEPT<br/>
-A INPUT -p tcp -m state --state NEW -m tcp --dport 22 -j ACCEPT<br/>
-A INPUT -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT<br/>
-A INPUT -j REJECT --reject-with icmp-host-prohibited<br/>
-A INPUT -j REJECT --reject-with icmp-port-unreachable<br/>
-A FORWARD -j REJECT --reject-with icmp-host-prohibited<br/>
-A FORWARD -j REJECT --reject-with icmp-port-unreachable<br/>
-A OUTPUT -j ACCEPT<br/>
COMMIT<br/>
# Completed on Fri Dec 12 20:37:55 2014</span></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>IP地址.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/IP地址.html">file:///E:/同步/同步/部署/部署/IP地址.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1519"></a><h1>IP地址</h1><div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">cd /etc/sysconfig/network-scripts</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">DEVICE=eth0<br/>
HWADDR=00:1F:E2:0A:B0:13<br/>
TYPE=Ethernet<br/>
IPADDR=192.168.5.211<br/>
NETMASK=255.255.255.0<br/>
GATEWAY=192.168.5.1<br/>
ONBOOT=yes<br/>
NM_CONTROLLED=yes<br/>
BOOTPROTO=static<br/>
DNS1=58.22.96.66</span></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>nginx 流媒体部署.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/nginx%20流媒体部署.html">file:///E:/同步/同步/部署/部署/nginx%20流媒体部署.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1836"></a><h1>nginx 流媒体部署</h1><div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><strong style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">一、准备工作</strong><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">Nginx: http://nginx.org</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">模块:nginx_mod_h264_streaming(支持h264编码的视频)</span></span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">http://h264.code-shop.com/download/nginx_mod_h264_streaming-2.2.7.tar.gz</span></div><div><span style="background-color: rgb(255, 255, 255); color: rgb(75, 75, 75); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; line-height: 20px;">将src/ngx_http_streaming_module.c文件中以下代码删除或者是注释掉就可以了：</span></div><p style="box-sizing: border-box; margin: 10px auto; color: rgb(75, 75, 75); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; line-height: 20px; background-color: rgb(255, 255, 255);">/* TODO: Win32 */</p><p style="box-sizing: border-box; margin: 10px auto; color: rgb(75, 75, 75); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; line-height: 20px; background-color: rgb(255, 255, 255);">if (r-&gt;zero_in_uri)</p><p style="box-sizing: border-box; margin: 10px auto; color: rgb(75, 75, 75); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; line-height: 20px; background-color: rgb(255, 255, 255);">{</p><p style="box-sizing: border-box; margin: 10px auto; color: rgb(75, 75, 75); font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 13px; line-height: 20px; background-color: rgb(255, 255, 255);">return NGX_DECLINED;</p><div>}</div><div><br/></div><div>nginx -rtmp-module模块</div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">https://github.com/arut/nginx-rtmp-module</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/></div><div><br/></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">模块:http_flv_module 支持flv</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">模块:http_mp4_module 支持mp4</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">下载地址:</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">http://h264.code-shop.com/download/nginx_mod_h264_streaming-2.2.7.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">1、安装依赖包:</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">#yum -y install gcc glibc glibc-devel make nasm pkgconfig lib-devel openssl-devel expat-devel gettext-devel libtool mhash.x86_64 perl-Digest-SHA1.x86_64</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">2、安装相关工具包</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">1). git</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># mkdir soft-source</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd soft-source</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://codemonkey.org.uk/projects/git-snapshots/git/git-latest.tar.xz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># xz -d git-latest.tar.xz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar xzvf git-latest.tar </span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd git-2014-06-27</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># autoconf</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make &amp;&amp; make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># git --version</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">git version 2.0.0.GIT</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">2). zlib</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://zlib.net/zlib-1.2.8.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar -zxvf zlib-1.2.8.tar.gz cd zlib-1.2.8</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">3). pcre</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://exim.mirror.fr/pcre/pcre-8.12.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar zxvf pcre-8.12.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd pcre-8.12</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make &amp;&amp; make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">4). yadmi</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">yadmi的作用是为flv文件添加关键帧，才能实现拖动播放</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://sourceforge.net/projects/yamdi/files/yamdi/1.4/yamdi-1.4.tar.gz/download  </span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar xzvf yamdi-1.4.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd yamdi-1.4</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make &amp;&amp; make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"> </span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">使用方法：</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># yamdi -i input.flv -o out.flv</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">给input.flv文件 添加关键帧，输出为out.flv文件</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">5). OpenSSL</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://www.openssl.org/source/openssl-1.0.1c.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar -zxvf openssl-1.0.1c.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./config</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">3、安装ffmpeg及其依赖包：</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">1). Yasm</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://www.tortall.net/projects/yasm/releases/yasm-1.2.0.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar xzvf yasm-1.2.0.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd yasm-1.2.0</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">2). x264</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># git clone git://git.videolan.org/x264</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd x264</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure --enable-shared </span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">3). LAME</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://downloads.sourceforge.net/project/lame/lame/3.99/lame-3.99.5.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar xzvf lame-3.99.5.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd lame-3.99.5</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">#./configure --enable-nasm</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">4). libogg</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://downloads.xiph.org/releases/ogg/libogg-1.3.0.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar xzvf libogg-1.3.0.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd libogg-1.3.0</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">5). libvorbis</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://downloads.xiph.org/releases/vorbis/libvorbis-1.3.3.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar xzvf libvorbis-1.3.3.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd libvorbis-1.3.3</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">6). libvpx</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># git clone http://git.chromium.org/webm/libvpx.git</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd libvpx</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure  --enable-shared</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">7). FAAD2</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://downloads.sourceforge.net/project/faac/faad2-src/faad2-2.7/faad2-2.7.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar zxvf faad2-2.7.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd faad2-2.7</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">8). FAAC</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://downloads.sourceforge.net/project/faac/faac-src/faac-1.28/faac-1.28.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar zxvf faac-1.28.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd faac-1.28</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">9). Xvid</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://downloads.xvid.org/downloads/xvidcore-1.3.2.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar zxvf xvidcore-1.3.2.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd xvidcore/build/generic</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">10). ffmpeg</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># git clone git://source.ffmpeg.org/ffmpeg</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ffmpeg</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ./configure  --prefix=/opt/ffmpeg/ --enable-version3  </span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">--enable-libvpx --enable-libfaac --enable-libmp3lame  </span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">--enable-libvorbis --enable-libx264 --enable-libxvid </span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">--enable-shared --enable-gpl --enable-postproc --enable-nonfree  </span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">--enable-avfilter --enable-pthreads</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># make &amp;&amp; make install</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># cd ..</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">修改/etc/ld.so.conf如下:</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">include ld.so.conf.d/*.conf</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">/lib</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">/lib64</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">/usr/lib</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">/usr/lib64</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">/usr/local/lib</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">/usr/local/lib64</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">/opt/ffmpeg/lib</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># ldconfig</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"><br/></span></div><div><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: &apos;Courier New&apos; !important; font-size: 12px; line-height: 18px;"><span style="margin: 0px; padding: 0px; line-height: 1.5 !important;">TS流分割器segmenter的安装与使用

</span><span style="margin: 0px; padding: 0px; line-height: 1.5 !important;">git clone https:</span><span style="margin: 0px; padding: 0px; line-height: 1.5 !important; color: rgb(0, 128, 0);">//</span><span style="margin: 0px; padding: 0px; line-height: 1.5 !important; color: rgb(0, 128, 0);">github.com/johnf/m3u8-segmenter<br style="margin: 0px; padding: 0px;"/>cd m3u8-segmenter<br style="margin: 0px; padding: 0px;"/></span><span style="margin: 0px; padding: 0px; line-height: 1.5 !important;"> gcc -Wall -g segmenter.c -o segmenter -lavformat -lavcodec -lavutil -liconv -std=c99 -I/usr/local/include -L/usr/local/lib  -L/usr/local/Mediosofa/ffmpeg/libavcodec  -lavcodec -L/usr/local/libiconv -lswresample -lm -lpthread -lz<br/></span><span style="margin: 0px; padding: 0px; line-height: 1.5 !important;">cp segmenter </span>/usr/bin/<span style="margin: 0px; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 1.5; background-color: rgb(255, 255, 255);"> </span></pre><pre style="margin-top: 0px; margin-bottom: 0px; padding: 0px; white-space: pre-wrap; word-wrap: break-word; font-family: &apos;Courier New&apos; !important; font-size: 12px; line-height: 18px;"><span style="margin: 0px; padding: 0px; font-family: verdana, Arial, Helvetica, sans-serif; font-size: 14px; line-height: 1.5; background-color: rgb(255, 255, 255);"><br/></span></pre></div><div><strong style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">二、安装Nginx相关模块</strong><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">1. 模块安装</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># wget http://h264.code-shop.com/download/nginx_mod_h264_streaming-2.2.7.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># tar zxvf nginx_mod_h264_streaming-2.2.7.tar.gz</span><br style="word-wrap: break-word; color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"># git clone git://github.com/arut/nginx-rtmp-module.git</span></div><div><span style="color: rgb(102, 102, 102); font-family: 宋体, Arial; font-size: 16px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"><br/></span></div>
nginx编译
<div> ./configure --prefix=/usr/local/nginx  --add-module=../nginx_mod_h264_streaming-2.2.7 --with-http_flv_module --with-http_gzip_static_module --with-http_stub_status_module --with-http_mp4_module  --with-http_ssl_module --add-module=../nginx-rtmp-module-master --with-cc-opt=-I/opt/ffmpeg/include --with-ld-opt='-L/opt/ffmpeg/lib -Wl,-rpath=/opt/ffmpeg/lib' --with-pcre=../pcre-8.12 --with-zlib=../zlib-1.2.8 --with-openssl=../openssl-1.0.1c</div><div>make</div><div>make install</div><div><br/></div><div><br/></div><div>server里面增加</div><div>http协议</div><div><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px; line-height: 19px;"><span style="box-sizing: border-box; line-height: 1.5 !important;">location </span>~<span style="box-sizing: border-box; line-height: 1.5 !important;"> \.flv$ {
                    flv;
                    #limit_conn one </span><span style="box-sizing: border-box; line-height: 1.5 !important; color: rgb(128, 0, 128);">20</span><span style="box-sizing: border-box; line-height: 1.5 !important;">;#限制客户端并发连接数
                    limit_rate 200k;#限制每客户端最大带宽
            }
            location </span>~<span style="box-sizing: border-box; line-height: 1.5 !important;"> \.mp4$ {
                    flv;
                    #limit_conn one </span><span style="box-sizing: border-box; line-height: 1.5 !important; color: rgb(128, 0, 128);">20</span><span style="box-sizing: border-box; line-height: 1.5 !important;">;
                    limit_rate 200k;
            }</span></pre><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px; line-height: 19px;"><span style="box-sizing: border-box; line-height: 1.5 !important;"><br/></span></pre><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px; line-height: 19px;"><span style="box-sizing: border-box; line-height: 1.5 !important;">rtmp协议：</span></pre><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px; line-height: 19px;"><span style="box-sizing: border-box; line-height: 1.5 !important;">#rtmp点播配置<br/><br/>rtmp {<br/><br/>   server {<br/><br/>        listen 1935;<br/><br/>        chunk_size 4000;<br/><br/>        application  vod {<br/><br/>                play /usr/local/nginx/vod/flvs;  #点播媒体文件存放目录<br/>         }<br/>     application  vod_http {<br/><br/>                play http://192.168.5.201:8080/nginx_http;  #点播媒体文件存放目录<br/>         }<br/>     }<br/>     }     </span></pre><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px; line-height: 19px;"><span style="box-sizing: border-box; line-height: 1.5 !important;"><br/></span></pre><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px; line-height: 19px;"><span style="box-sizing: border-box; line-height: 1.5 !important;">http测试</span>&lt;html&gt;
</pre>
  &lt;head&gt;<br/>
    &lt;script src=&quot;jwplayer.js&quot;&gt;&lt;/script&gt;<br/>
  &lt;/head&gt;<br/>
&lt;body&gt;<br/>
  &lt;div id='my-video'&gt;&lt;/div&gt;<br/>
  &lt;script type='text/javascript'&gt;<br/>
    jwplayer('my-video').setup({<br/>
      file:'test1.flv',<br/>
      width:'50%',<br/>
      aspectratio:'3:2',<br/>
      fallback:'false',<br/>
      primary:'flash'<br/>
    });<br/>
  &lt;/script&gt;<br/>
&lt;/body&gt;<br/>
&lt;/html&gt;</div><div><br/></div><div><br/><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px; line-height: 19px;"><span style="box-sizing: border-box; line-height: 1.5 !important;">rtmp测试： </span></pre><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px; line-height: 19px;"><span style="box-sizing: border-box; line-height: 1.5 !important;"> </span>&lt;html&gt;
</pre>
  &lt;head&gt;<br/>
    &lt;script src=&quot;jwplayer.js&quot;&gt;&lt;/script&gt;<br/>
  &lt;/head&gt;<br/>
&lt;body&gt;<br/>
  &lt;div id='my-video'&gt;&lt;/div&gt;<br/>
  &lt;script type='text/javascript'&gt;<br/>
    jwplayer('my-video').setup({<br/>
      file:'test1.flv',<br/>
      streamer:'rtmp://www.iqcedu.com:1935/vod_http',<br/>
      width:'50%',<br/>
      aspectratio:'3:2',<br/>
      fallback:'false',<br/>
      primary:'flash'<br/>
    });<br/>
  &lt;/script&gt;<br/>
&lt;/body&gt;<br/>
&lt;/html&gt;<br/>
~                                                                                                                                                                                              <br/><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px; line-height: 19px;"><span style="box-sizing: border-box; line-height: 1.5 !important;">~                  </span></pre><pre style="margin-top: 0px; margin-bottom: 0px; white-space: pre-wrap; word-wrap: break-word; box-sizing: border-box; font-family: &apos;Courier New&apos; !important; font-size: 12px; line-height: 19px;"><span style="box-sizing: border-box; line-height: 1.5 !important;"><br/></span></pre></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>安装ffmpeg.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/安装ffmpeg.html">file:///E:/同步/同步/部署/部署/安装ffmpeg.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1936"></a><h1>安装ffmpeg</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">安装ffmpeg及其依赖包：</span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">yum install  git<br/>
1). Yasm<br/>
# wget http://www.tortall.net/projects/yasm/releases/yasm-1.2.0.tar.gz<br/>
# tar xzvf yasm-1.2.0.tar.gz<br/>
# cd yasm-1.2.0<br/>
# ./configure<br/>
# make<br/>
# make install<br/>
# cd ..<br/><br/>
2). x264<br/>
# git clone git://git.videolan.org/x264<br/>
# cd x264<br/>
# ./configure --enable-shared<br/>
# make<br/>
# make install<br/>
# cd ..<br/><br/>
3). LAME<br/>
# wget http://downloads.sourceforge.net/project/lame/lame/3.99/lame-3.99.5.tar.gz<br/>
# tar xzvf lame-3.99.5.tar.gz<br/>
# cd lame-3.99.5<br/>
#./configure --enable-nasm<br/>
# make<br/>
# make install<br/>
# cd ..<br/><br/>
4). libogg<br/>
# wget http://downloads.xiph.org/releases/ogg/libogg-1.3.0.tar.gz<br/>
# tar xzvf libogg-1.3.0.tar.gz<br/>
# cd libogg-1.3.0<br/>
# ./configure<br/>
# make<br/>
# make install<br/>
# cd ..<br/><br/>
5). libvorbis<br/>
# wget http://downloads.xiph.org/releases/vorbis/libvorbis-1.3.3.tar.gz<br/>
# tar xzvf libvorbis-1.3.3.tar.gz<br/>
# cd libvorbis-1.3.3<br/>
# ./configure<br/>
# make<br/>
# make install<br/>
# cd ..<br/><br/>
6). libvpx<br/>
# git clone <a href="http://git.chromium.org/webm/libvpx.git">http://git.chromium.org/webm/libvpx.git</a></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><a href="http://storage.googleapis.com/downloads.webmproject.org/releases/webm/libvpx-1.4.0.tar.bz2" style="color: rgb(85, 85, 255); font-weight: bold; font-family: verdana, tahoma, helvetica, arial, sans-serif; font-size: 16px; line-height: 19.1875px; text-align: left;">http://storage.googleapis.com/downloads.webmproject.org/releases/webm/libvpx-1.4.0.tar.bz2</a><br/>
# cd libvpx<br/>
# ./configure  --enable-shared<br/>
# make<br/>
# make install<br/>
# cd ..</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">bzip2 -d  gcc-4.1.0.tar.bz2 </span><br style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">---上面解压完之后执行下面的命令。</span><br style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><br style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">tar -xvf gcc-4.1.0.tar 或 tar -xvf *.tar</span><br style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);"/><span style="color: rgb(51, 51, 51); font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; background-color: rgb(255, 255, 255);">解完之后会出现多一个文件夹 gcc-4.1.0</span><br/><br/>
7). FAAD2<br/>
# wget http://downloads.sourceforge.net/project/faac/faad2-src/faad2-2.7/faad2-2.7.tar.gz<br/>
# tar zxvf faad2-2.7.tar.gz<br/>
# cd faad2-2.7<br/>
# ./configure<br/>
# make<br/>
# make install<br/>
# cd ..<br/><br/>
8). FAAC<br/>
# wget http://downloads.sourceforge.net/project/faac/faac-src/faac-1.28/faac-1.28.tar.gz<br/>
# tar zxvf faac-1.28.tar.gz<br/>
# cd faac-1.28<br/>
# ./configure<br/>
# make<br/>
# make install<br/>
# cd ..<br/>
2.1 报错内容： <br/><br/>
In file included from config_opts.cpp:1:<br/>
/include/mpeg4ip.h:126: error: new declaration 'char* strcasestr(const char*, const char*)'<br/>
/usr/include/string.h:369: error: ambiguates old declaration 'const char* strcasestr(const char*, const char*)'<br/>
解决办法：<br/><br/>
vi common/mp4v2/mpeg4ip.h<br/><br/>
注释掉函数声明，如下所示：</span><div><img src="Evernote_files/Image [3].png" type="image/png" style="cursor: default;cursor: default;cursor: default;"/><br/>
//char* strcasestr(const char*, const char*)<br/><br/><br/>
9). Xvid<br/>
# wget http://downloads.xvid.org/downloads/xvidcore-1.3.2.tar.gz<br/>
# tar zxvf xvidcore-1.3.2.tar.gz<br/>
# cd xvidcore/build/generic<br/>
# ./configure<br/>
# make<br/>
# make install<br/>
# cd ..<br/><br/>
10). ffmpeg<br/>
# git clone git://source.ffmpeg.org/ffmpeg<br/>
# cd ffmpeg<br/>
# ./configure  --prefix=/opt/ffmpeg/ --enable-version3  --enable-libvpx --enable-libfaac --enable-libmp3lame  --enable-libvorbis --enable-libx264 --enable-libxvid --enable-shared --enable-gpl --enable-postproc --enable-nonfree  --enable-avfilter --enable-pthreads<br/>
# make &amp;&amp; make install<br/>
# cd ..<br/><br/>
修改/etc/ld.so.conf如下:<br/>
include ld.so.conf.d/*.conf<br/>
/lib<br/>
/lib64<br/>
/usr/lib<br/>
/usr/lib64<br/>
/usr/local/lib<br/>
/usr/local/lib64<br/>
/opt/ffmpeg/lib<br/>
# ldconfig</div></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>笔记.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/笔记.html">file:///E:/同步/同步/部署/部署/笔记.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="2124"></a><h1>笔记</h1><div><span>20120701      zxc_123</span></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>地址信息.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/地址信息.html">file:///E:/同步/同步/部署/部署/地址信息.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1290"></a><h1>地址信息</h1><div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">root   <span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: 宋体; text-indent: 0mm;"> iqcloud.cn.123</span></span></div>
tomcat主 58.22.30.37 221        192.168.5.201<br/>
tomcat备 58.22.30.37 222        192.168.5.202<br/>
nginx主  58.22.30.37 225        192.168.5.205<br/>
nginx备  58.22.30.37 226        192.168.5.206<br/>
mysql主  58.22.30.37 224        192.168.5.204<br/>
mysql从  58.22.30.37 223        192.168.5.203<br/>
外网路由器：http://58.22.30.37:8888/   账号：admin 密码:returnstarlock
<div><br/></div><div><br/></div><div><br/></div><div><br/></div><div>pc主机IP    root iqboard<br/><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><img src="Evernote_files/Image [4].png" type="image/png" alt="graphic" border="0" height="152" style="cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;cursor: default;" width="434"/></div></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><br/></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><br/></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;">云网盘 ，云资源账号密码：<span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: 宋体; text-indent: 0mm;">VC4QfaDa 123123</span></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font color="#010101" face="宋体" size="1"><span style="font-size:9pt">unqzJ53F  123456 </span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font color="#010101" face="宋体" size="1"><span style="font-size:9pt"><br/></span></font></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font color="#010101" face="宋体" size="2">电信：</font><span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: 宋体; text-indent: 0mm;">182.157.1.28   联通：</span><span style="font-size: 9pt; color: rgb(1, 1, 1); font-family: 宋体; text-indent: 0mm;">36.250.229.28</span></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><span style="font-size: 8pt; color: rgb(0, 64, 128); text-indent: 0mm;">托管技术经理，陈小华：15980608307</span></div></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>配置多个tomcat.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/配置多个tomcat.html">file:///E:/同步/同步/部署/部署/配置多个tomcat.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1286"></a><h1>配置多个tomcat</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">/usr/local/tomcat2/conf/server.xml<br/><br/>
&lt;Server port=&quot;8006&quot; shutdown=&quot;SHUTDOWN&quot;&gt;<br/>
#此处的8005已改为8006<br/>
&lt;Connector port=&quot;8081&quot; protocol=&quot;HTTP/1.1&quot;<br/>
               connectionTimeout=&quot;20000&quot;<br/>
               redirectPort=&quot;8443&quot; /&gt;<br/>
#此处的8080已改为8081<br/>
&lt;Connector port=&quot;8010&quot; protocol=&quot;AJP/1.3&quot; redirectPort=&quot;8443&quot; /&gt;<br/>
#此处的8009已改为8010</span></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>文件在线预览.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/文件在线预览.html">file:///E:/同步/同步/部署/部署/文件在线预览.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1388"></a><h1>文件在线预览</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">yum list 列出所有可安装的软件包 可以通过 yum grouplist 来查看可能批量安装哪些列表<br/>
先装X windows<br/>
#yum groupinstall 'X Window System' -y<br/><br/>
安装GNOME桌面环境<br/>
#yum groupinstall GNOME Desktop Environment<br/><br/>
安装KDE桌面环境<br/>
#yum groupinstall KDE  Desktop Environment<br/><br/><br/>
首先，安装OpenOffice<br/>
（1）<br/>
cd /usr/local<br/><br/>
（2）<br/>
mkdir Openoffice<br/><br/>
（3）<br/>
cp Apache_OpenOffice_incubating_3.4.1_Linux_x86-64_install-rpm_zh-CN.tar.gz ./Openoffice/OpenOffice.tar.gz<br/><br/>
（4）<br/>
cd OpenOffice<br/><br/>
（5）<br/>
tar</span><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"> xf OpenOffice.tar.gz<br/><br/>
（6）<br/>
cd zh-CN<br/><br/>
（7）<br/>
cd RPMS/<br/><br/>
（8）<br/>
rpm -ivh *.rpm<br/><br/>
（9）<br/>
cd desktop-integration/<br/><br/>
（10）安装<br/>
rpm -ivh openoffice.org3.4-redhat-menus-3.4-9593.noarch.rpm<br/><br/>
注意可能需要重新安下openoffice.org-ure-3.4.1-9593.x86_64.rpm 这个rpm 在RPMS目录下<br/><br/>
（11）启动服务<br/>
cd /opt/openoffice.org3/program<br/>
soffice -headless -accept=&quot;socket,host=127.0.0.1,port=8001;urp;&quot;-nofirststartwizard &amp;<br/><br/><br/>
其次，安装swftool<br/>
（1）<br/>
cd /usr/local<br/>
mkdir swftools<br/><br/>
（2）<br/>
cp swftools-0.9.1.tar.gz ./swftools/swftools.tar.gz<br/><br/>
（3）<br/>
cd swftools<br/><br/>
（4）<br/>
tar xf swftools.tar.gz<br/><br/>
（5）<br/>
cd swftools-0.9.1/<br/><br/>
（6）<br/>
yum install gcc* automake zlib-devel libjpeg-devel giflib-devel freetype-devel<br/>
yum -y install giflib-devel libjpeg-devel freetype-devel t1lib-devel zlib<br/>
./configure<br/>
make<br/>
make install</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><br/></span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">。<br/><br/></span></div></div></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>云部署_index.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/云部署_index.html">file:///E:/同步/同步/部署/部署/云部署_index.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><h1>目录</h1><ul><li><a>1.1：MySQL 安装要点步骤</a></li><li><a>1.2：MySQL 主从安装要点步骤</a></li><li><a>1.3：MySQL 主从配置上的一些操作要点</a></li><li><a>1.4：MySQL 常用操作手册</a></li><li><a>2.1：安装Nginx</a></li><li><a>3.1：安装 JavaJDK</a></li><li><a>4.1 ：安装tomcat</a></li><li><a>5.1：配置FTP</a></li><li><a>5.2：vsftp</a></li><li><a>6.1：配置Zookeeper</a></li><li><a>6-PC-Service 分布式文件系统</a></li><li><a>7.1：配置Redis</a></li><li><a>8.1：配置keepalived</a></li><li><a>8.2：keepalived实现双机热备</a></li><li><a>9.1：安装PHP</a></li><li><a>9.2：安装PHP可能会遇到的问题无标题笔记</a></li><li><a>10.1 分布式文件系统</a></li><li><a>A：系统配置信息</a></li><li><a>B：数据库配置信息</a></li><li><a>C：6台服务器磁盘分区列表</a></li><li><a>centos全面卸载mysql</a></li><li><a>ftp 防火墙</a></li><li><a>配置多个tomcat</a></li><li><a>地址信息</a></li><li><a>文件在线预览</a></li><li><a>IP地址</a></li><li><a>账号密码</a></li><li><a>nginx 流媒体部署</a></li><li><a>安装ffmpeg</a></li><li><a>笔记</a></li></ul></div><br/><div><table bgcolor="#D4DDE5" border="0" width="100%"><tr><td><h1>账号密码.html</h1><b>来源网址：</b> <a href="file:///E:/同步/同步/部署/部署/账号密码.html">file:///E:/同步/同步/部署/部署/账号密码.html</a><br/><b>作者：</b> meilingzhw@163.com<br/></td></tr></table></div><div><a name="1671"></a><h1>账号密码</h1></div><br/></div></span>
</div>
<hr>
<a name="497"/>

<div>
<span><a href="http://www.cnblogs.com/mxh691/p/3441016.html">成功配置TOMCAT的LOG4J日志系统，格式：HTML＋每天以YYYY-MM-DD.LOG命名的日志文件 - 小马的酒吧 - 博客园</a></span>
</div>
<hr>
<a name="498"/>

<div>
<span><a href="Evernote_files/codetemplates.xml"><img src="Evernote_files/3e4762b0fe79fdae24afc6ad80c30116.png" alt="codetemplates.xml"></a>
</span>
</div>
<hr>
<a name="500"/>

<div>
<span><a href="Evernote_files/nginx.rar"><img src="Evernote_files/4ed7e242fa06331422a28e4009dc2288.png" alt="nginx.rar"></a>
</span>
</div>
<hr>
<a name="502"/>

<div>
<span><a href="Evernote_files/谷歌访问助手chrome版.rar"><img src="Evernote_files/d1bb80162020f0154d05452a1d7ba21b.png" alt="谷歌访问助手chrome版.rar"></a></span>
</div>
<hr>
<a name="504"/>

<div>
<span><div>前端代码：</div><div>btnSave.onclick = function(){</div><div>    var j = 0;</div><div>    console.log(idList);</div><div>    var imgDatas = new Array();</div><div>    for(var i = 0 ; i &lt; idList.length ; i++ ){</div><div>        var contentList = document.getElementById(idList[i]);</div><div>        html2canvas(contentList, {</div><div>            onrendered: function(canvas) {</div><div>                //添加属性</div><div>        //                canvas.setAttribute('id','thecanvas');</div><div>                canvas.id = &quot;mycanvas&quot;+j;</div><div>                j ++ ;</div><div>                //读取属性值</div><div>                // var value= canvas.getAttribute('id');</div><div><br/></div><div>                 // 生成base64图片数据</div><div>                   var dataUrl = canvas.toDataURL('image/png');  //指定格式，也可不带参数</div><div>                imgDatas.push(dataUrl);   </div><div><br/></div><div>                if(j == idList.length){</div><div>                    var param = new Object();</div><div>                    var param1 = new Object();</div><div><br/></div><div>                    param1.imgDatas = imgDatas;</div><div>                    param.jsonBody = param1;</div><div><br/></div><div>                    classPerformanceDetails.exportPdf(successCallBack, null, param);</div><div>                    function successCallBack(data){</div><div>                        var rtnCode = data.jsonBody.rtnCode;</div><div>                        var resultObject = data.jsonBody.resultObject;</div><div>                        if(rtnCode == 0){</div><div>                            window.location.href= &quot;/IQDataReport/dateReportController/download?parameter=&quot;+resultObject;</div><div>                        }</div><div>                    }</div><div>                }</div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div>    //          document.getElementById('images').appendChild(canvas);</div><div>            }</div><div>        });</div><div><br/></div><div>    }</div><div><br/></div><div>}</div><div><br/></div><div><br/></div><div><br/></div><div>后台：</div><div>导入 itext jar包（官方下载地址：https://sourceforge.net/projects/itext/）</div><div>import java.awt.image.BufferedImage;</div><div><br/></div><div>import java.io.ByteArrayInputStream;</div><div>import java.io.File;</div><div>import java.io.FileOutputStream;</div><div>import java.io.IOException;</div><div>import java.util.List;</div><div>import javax.imageio.ImageIO;</div><div>import javax.servlet.http.HttpServletRequest;</div><div>import javax.servlet.http.HttpServletResponse;</div><div>import org.springframework.stereotype.Service;</div><div>import org.springframework.web.multipart.MultipartHttpServletRequest;</div><div>import com.iqcloud.common.consts.Constants;</div><div>import com.iqcloud.common.dto.ReturnMsgDto;</div><div>import com.iqcloud.common.util.CommonFun;</div><div>import com.iqcloud.common.util.FileControl;</div><div>import com.lowagie.text.Document;</div><div>import com.lowagie.text.Image;</div><div>import com.lowagie.text.PageSize;</div><div>import com.lowagie.text.Paragraph;</div><div>import com.lowagie.text.pdf.PdfWriter;</div><div>import sun.misc.BASE64Decoder;</div><div><br/></div><div><br/></div><div>后台代码:(将前端传来的图片的base64画成一张张图片然后将图片合在一起转换生成pdf文件)</div><div>public ReturnMsgDto exportPdf(HttpServletResponse response, MultipartHttpServletRequest request,</div><div>            List&lt;String&gt; imgDatas) {</div><div>        ReturnMsgDto returnMsgDto = new ReturnMsgDto();</div><div>        if (imgDatas == null || imgDatas.size() == 0) {</div><div>            returnMsgDto.setRtnCode(Constants.ERROR_CODE2);</div><div>            return returnMsgDto;</div><div>        }</div><div>        Document document = new Document();</div><div>        String filePath = pdfPath + CommonFun.getOneUUID() + &quot;.pdf&quot;;</div><div>        String imagePath = null;</div><div>        try {</div><div>            //<font face="Consolas">setStrictImageSequence()设置图片是否按顺序默认是false</font></div><div>            PdfWriter.getInstance(document, new FileOutputStream(filePath))<font face="Consolas">.setStrictImageSequence(true)</font>;</div><div>            document.setPageSize(PageSize.A4);</div><div>            document.open();</div><div>        } catch (Exception e) {</div><div>            document.close();</div><div>            returnMsgDto.setMessage(&quot;导出失败&quot;);</div><div>            returnMsgDto.setRtnCode(Constants.ERROR_CODE);</div><div>            e.printStackTrace();</div><div>            return returnMsgDto;</div><div>        }</div><div>        int page = 1;</div><div>        File outputfile;</div><div>        BufferedImage img = null;</div><div>        for (String imgData : imgDatas) {</div><div>            try {</div><div>                imagePath = pdfPath + CommonFun.getOneUUID() + &quot;.png&quot;;</div><div>                // if (imgData != null) {</div><div>                String base64 = imgData.split(&quot;,&quot;)[1];</div><div>                BASE64Decoder decode = new BASE64Decoder();</div><div>                byte[] imageByte = decode.decodeBuffer(base64);</div><div>                ByteArrayInputStream bis = new ByteArrayInputStream(imageByte);</div><div>                img = ImageIO.read(bis);</div><div>                bis.close();</div><div>                outputfile = new File(imagePath);</div><div>                ImageIO.write(img, &quot;png&quot;, outputfile);</div><div>                // } else {</div><div>                // Map getMap = request.getFileMap();</div><div>                // MultipartFile mfile = (MultipartFile) getMap.get(&quot;imgData&quot;);</div><div>                // //</div><div>                // 获取数据</div><div>                // InputStream file = mfile.getInputStream();</div><div>                // byte[] fileByte = FileCopyUtils.copyToByteArray(file);</div><div>                // outputfile = new File(imagePath);</div><div>                // FileImageOutputStream imageOutput = new</div><div>                // FileImageOutputStream(outputfile);// 打开输入流</div><div>                // imageOutput.write(fileByte, 0, fileByte.length);// 生成本地图片文件</div><div>                // imageOutput.close();</div><div>                // }</div><div>                // document.add(new Paragraph(&quot;JUST TEST ...&quot;));</div><div>                Image image = Image.getInstance(imagePath); // itext-pdf-image</div><div>                float heigth = image.getHeight();</div><div>                float width = image.getWidth();</div><div>                int percent = getPercent2(heigth, width); // 按比例缩小图片</div><div>                image.setAlignment(Image.MIDDLE);</div><div>                image.scalePercent(percent + 3);</div><div>                document.add(new Paragraph());</div><div>                document.add(image);</div><div>                System.out.println(&quot;第&quot; + page + &quot;张导出成功&quot;);</div><div>                page++;</div><div>            } catch (Exception de) {</div><div>                de.printStackTrace();</div><div>            } finally {</div><div>                File imageFile = new File(imagePath);</div><div>                if ((imageFile.exists()) &amp;&amp; (!imageFile.isDirectory())) {</div><div>                    imageFile.delete();</div><div>                }</div><div>            }</div><div>        }</div><div>        document.close();</div><div>        returnMsgDto.setMessage(&quot;导出成功&quot;);</div><div>        returnMsgDto.setRtnCode(Constants.SUCCESS_CODE);</div><div>        returnMsgDto.setResultObject(filePath);</div><div>        return returnMsgDto;</div><div>    }</div><div><br/></div><div>    private static int getPercent2(float h, float w) {</div><div>        int p = 0;</div><div>        float p2 = 0.0f;</div><div>        p2 = 530 / w * 100;</div><div>        p = Math.round(p2);</div><div>        return p;</div><div>    }</div><div><br/></div><div><br/></div><div><br/></div><div>参考网址:http://www.jb51.net/article/85455.htm</div></span>
</div>
<hr>
<a name="505"/>

<div>
<span><ul><li><div style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">1.先到github上下载mycat<br/><br/></div><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><img src="Evernote_files/Image [5].png" type="image/png" style="border: none; max-width: 100%; height: auto;"/><br/></p><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><img src="Evernote_files/Image [6].png" type="image/png" style="border: none; max-width: 100%; height: auto;"/><br/></p><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">2.下载完成后,解压.应该是这样一个样子</p><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><img src="Evernote_files/Image [7].png" type="image/png" style="border: none; max-width: 100%; height: auto;"/><br/></p><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">3.在配置好环境变量</p><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><img src="Evernote_files/Image [8].png" type="image/png" style="border: none; max-width: 100%; height: auto;"/><br/></p><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><img src="Evernote_files/Image [9].png" type="image/png" style="border: none; max-width: 100%; height: auto;"/><br/></p><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">4.接下来要修改mycat/conf下面的几个配置文件</p><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">wrapper.conf  红字修改为自己的jdk的路径</p><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><img src="Evernote_files/Image [10].png" type="image/png" style="border: none; max-width: 100%; height: auto;"/><br/></p><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><br/></p><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">server.xml 下面是mycat登录的用户名和密码还有schema   root  123456默认是这个 可以不用修改.</p><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><img src="Evernote_files/Image [11].png" type="image/png" style="border: none; max-width: 100%; height: auto;"/></p><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">schema.xml  下面是分库的表和<a href="http://lib.csdn.net/base/mysql" style="color: rgb(223, 52, 52); text-decoration: none; font-weight: bold;" target="_blank" title="MySQL知识库">数据库</a>的名字   这些对应着<a href="http://lib.csdn.net/base/mysql" style="color: rgb(223, 52, 52); text-decoration: none; font-weight: bold;" target="_blank" title="MySQL知识库">MySQL</a>  实际存在的表和数据库  mycat相当于一个虚拟的<a href="http://lib.csdn.net/base/mysql" style="color: rgb(223, 52, 52); text-decoration: none; font-weight: bold;" target="_blank" title="MySQL知识库">mysql</a>.把这些分布在db1.db2,db3的表合起来了.<img src="Evernote_files/Image [12].png" type="image/png" style="border: none; max-width: 100%; height: auto;"/><br/></p><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">还是scheme中的配置 .这是mysql数据库的地址  按自己的写就好了.我这里是本地的数据库.用户名和密码写mysql的.</p><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><img src="Evernote_files/Image [13].png" type="image/png" style="border: none; max-width: 100%; height: auto;"/><br/></p><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">5.最后启动mycat看看.</p><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">bin/startup_nowrap.bat  如果报错= =请参考mycat官网的权威指南.里面有错误的处理.</p><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">出现successfully就成功了.</p><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">6.最后在数据库db1.db2中建立employee表 并分别存入数据</p><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><img src="Evernote_files/Image [14].png" type="image/png" style="border: none; max-width: 100%; height: auto;"/>   <img src="Evernote_files/Image [15].png" type="image/png" style="border: none; max-width: 100%; height: auto;"/></p><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">7.最后登录mycat  在navicat等mysql连接工具连接 后.</p><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><img src="Evernote_files/Image [16].png" type="image/png" style="border: none; max-width: 100%; height: auto;"/><br/></p><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">端口是8066.用户名和密码是server.xml中的用户名密码.</p><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">登陆成功后.看employee表.出现</p><p style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><img src="Evernote_files/Image [17].png" type="image/png" style="border: none; max-width: 100%; height: auto;"/><br/></p><div style="color: rgb(54, 46, 43); font-family: Arial; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">可以看到联合起来的表说明成功了.<br/><br/></div></li></ul></span>
</div>
<hr>
<a name="519"/>

<div>
<span>
http://blog.csdn.net/sc9018181134/article/details/53063798
</span>
</div>
<hr>
<a name="520"/>

<div>
<span><a name="1248"></a><h1>1.4：MySQL 常用操作手册</h1><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">资料来源网址：<br/>
http://www.cnblogs.com/zhenmingliu/archive/2012/05/25/2518691.html<br/><br/>
MySQL常规练习 .MySQL安装成功后的进入方式<br/>
1、MySQL安装成功后的进入方式<br/>
/第一种方式进入：<br/>
点击开始---&gt;所有程序---&gt;Mysql--&gt;Mysql Server5.0---&gt;Mysql Command Line Client 点击<br/>
提示Enter password: root  回车<br/>
即可进入Mysql操作界面：<br/>
show databases;//显示所有的数据库<br/>
use test;//选择并使用test数据库<br/>
show tables;//显示test库中所有表<br/>
 <br/>
exit 退出<br/>
 <br/>
第二种进入方式：<br/>
开始--运行输入cmd 回车<br/>
cd/进入 c盘根目录<br/>
cd 切换到：<br/>
C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br/>
在此目录中采用<br/>
mysql - u root -p<br/>
mysql -h 127.0.0.1 -u root -p root<br/>
回车<br/>
提示Enter password: root  回车<br/>
即可进入Mysql操作界面：<br/>
show databases;//显示所有的数据库<br/>
use test;//选择并使用test数据库<br/>
show tables;//显示test库中所有表<br/>
 <br/>
exit 退出<br/>
 <br/>
第三种方式进入：<br/>
开始--运行输入cmd 回车<br/>
cd/进入 c盘根目录<br/>
cd 切换到：<br/>
C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br/>
在此目录中采用<br/>
mysql - u root -p  数据库名称 <br/>
mysql -h 127.0.0.1 -u root -p root 数据库名称<br/>
回车<br/>
即可进入Mysql操作界面： 在此种直接可以使用 book数据库<br/>
show tables;//显示test库中所有表<br/><br/>
mysql密码设置<br/>
2、密码设置：<br/>
当用户没有设置密码时：<br/>
添加密码：<br/>
mysqladmin -uroot -password ab12 <br/>
  注：因为开始时root没有密码，所以-p旧密码一项就可以省略了。<br/>
当用户存在密码时：<br/>
修改密码：<br/>
cd/进入 c盘根目录<br/>
cd 切换到：<br/>
C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br/>
采用命令：<br/>
mysqladmin -uroot -proot password 123<br/>
回车后密码及更新为123；<br/><br/>
MySQL常规练习 .MySQL安装成功后的进入方式<br/>
1、MySQL安装成功后的进入方式<br/>
/第一种方式进入：<br/>
点击开始---&gt;所有程序---&gt;Mysql--&gt;Mysql Server5.0---&gt;Mysql Command Line Client 点击<br/>
提示Enter password: root  回车<br/>
即可进入Mysql操作界面：<br/>
show databases;//显示所有的数据库<br/>
use test;//选择并使用test数据库<br/>
show tables;//显示test库中所有表<br/>
exit 退出<br/>
 <br/>
第二种进入方式：<br/>
开始--运行输入cmd 回车<br/>
cd/进入 c盘根目录<br/>
cd 切换到：<br/>
C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br/>
在此目录中采用<br/>
mysql - u root -p<br/>
mysql -h 127.0.0.1 -u root -p root<br/>
回车<br/>
提示Enter password: root  回车<br/>
即可进入Mysql操作界面：<br/>
show databases;//显示所有的数据库<br/>
use test;//选择并使用test数据库<br/>
show tables;//显示test库中所有表<br/>
exit 退出<br/>
 <br/>
第三种方式进入：<br/>
开始--运行输入cmd 回车<br/>
cd/进入 c盘根目录<br/>
cd 切换到：<br/>
C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br/>
在此目录中采用<br/>
mysql - u root -p  数据库名称 <br/>
mysql -h 127.0.0.1 -u root -p root 数据库名称<br/>
回车<br/>
即可进入Mysql操作界面： 在此种直接可以使用 book数据库<br/>
show tables;//显示test库中所有表<br/><br/>
mysql密码设置<br/>
2、密码设置：<br/>
当用户没有设置密码时：<br/>
添加密码：<br/>
mysqladmin -uroot -password ab12 <br/>
  注：因为开始时root没有密码，所以-p旧密码一项就可以省略了。<br/>
 <br/>
当用户存在密码时：<br/>
修改密码：<br/>
cd/进入 c盘根目录<br/>
cd 切换到：<br/>
C:/Program Files/MySQL/MySQL Server 5.0/bin&gt;<br/>
采用命令：<br/>
mysqladmin -uroot -proot password 123<br/>
回车后密码及更新为123；<br/><br/>
mysql 增加用户<br/>
3、增加用户：<br/>
（注意：和上面不同，下面的因为是MYSQL环境中的命令，所以后面都带一个分号作为命令结束符） <br/>
  格式：grant select on 数据库.* to 用户名@登录主机 identified by “密码”<br/>
 <br/>
   第一种：<br/>
 增加一个用户test1密码为abc，让他可以在任何主机上登录，并对所有数据库有查询、插入、修改、删除的权限。首先用以root用户连入MYSQL，然后键入以下命令： <br/>
  grant select,insert,update,delete on *.* to test1@&quot;%&quot; Identified by &quot;abc&quot;;<br/>
 <br/>
  但增加的用户是十分危险的，你想如某个人知道test1的密码，那么他就可以在internet上的任何一台电脑上登录你的mysql数据库并对你的数据可以为所欲为了，解决办法见例第二种： <br/>
  第一种：增加一个用户test2密码为abc,让他只可以在localhost上登录，并可以对数据库mydb进行查询、插入、修改、删除的操作（localhost指本地主机，即MYSQL数据库所在的那台主机），这样用户即使用知道test2的密码，他也无法从internet上直接访问数<br/>
mysql&gt; grant select,insert,update,delete on book.* to test2@localhost Identified by &quot;abc&quot;;<br/>
 <br/>
  如果你不想test2有密码，可以再打一个命令将密码消掉。 <br/>
mysql&gt; grant select,insert,update,delete on book.* to test2@localhost Identified by &quot;&quot;;<br/><br/>
mysql 把指定用户的权限开通出来<br/>
grant all on *.* to root@'192.168.5.%' identified by 'ruida~'<br/><br/>
mysql 查看错误日志<br/>
tail -30 ../logs/error.log<br/><br/>
mysql 使得表名不区分大小写<br/>
LINUX下的MYSQL默认是要区分表名大小写的，哎，弄了那么旧，害死我了。<br/>
  让MYSQL不区分表名大小写的方法其实很简单：<br/>
  1.用ROOT登录，修改/etc/my.cnf<br/>
  2.在[mysqld]下加入一行：lower_case_table_names=1</span></div><div>  3.重新启动数据库即可</div><div>mysl 设置数据插入量</div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">1.用ROOT登录，修改/etc/my.cnf</span></div><div><span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;">2.在[mysqld]下加入一行</span>  ：max_allowed_packet = 20M</div><div>查看数据插入量</div><div>SHOW VARIABLES LIKE '%max_allowed_packet%';</div></span>
</div>
<hr>
<a name="521"/>

<div>
<span><div>设置数据插入量(重新启动mysql也不会失效)</div><div>max_allowed_packet = 20M;</div><div>数据库执行（重新启动MySQL就失效）：</div><div>set global max_allowed_packet = 6*1024*1024*10</div>
查看数据插入量
<div>SHOW VARIABLES LIKE '%max_allowed_packet%';</div><div><br/></div><div><br/></div></span>
</div>
<hr>
<a name="522"/>

<div>
<span><a href="Evernote_files/faac-1.28.tar.gz"><img src="Evernote_files/a0b96aa4cf8c7b57e76002e40412aaff.png" alt="faac-1.28.tar.gz"></a>
<a href="Evernote_files/faad2-2.7.tar.gz"><img src="Evernote_files/24fda24b8f884eea881b161bf5f09a40.png" alt="faad2-2.7.tar.gz"></a>
<a href="Evernote_files/lame-3.99.5.tar.gz"><img src="Evernote_files/9668580d48441ce8c2432daa2c7b8a54.png" alt="lame-3.99.5.tar.gz"></a>
<a href="Evernote_files/libogg-1.3.0.tar.gz"><img src="Evernote_files/9c5dab69f45cb688a2b3f5e66dd5e6a5.png" alt="libogg-1.3.0.tar.gz"></a>
<a href="Evernote_files/libvorbis-1.3.3.tar.gz"><img src="Evernote_files/6617810b2be3d782c400c57c83abd56f.png" alt="libvorbis-1.3.3.tar.gz"></a>
<a href="Evernote_files/libvpx-1.4.0.tar.bz2"><img src="Evernote_files/81f632ece4d63f9a25d1d0e62c327d86.png" alt="libvpx-1.4.0.tar.bz2"></a>
<a href="Evernote_files/qt-faststart"><img src="Evernote_files/66419c19766b055ec4dd2477f5a2f168.png" alt="qt-faststart"></a>
<a href="Evernote_files/x264.tar.gz"><img src="Evernote_files/d499ef032c02cc729cc9f4b11c8cf2c8.png" alt="x264.tar.gz"></a>
<a href="Evernote_files/xvidcore-1.3.2.tar.gz"><img src="Evernote_files/ff156fdc8b2c78a2a99a1578e0659cce.png" alt="xvidcore-1.3.2.tar.gz"></a>
<a href="Evernote_files/yasm-1.2.0.tar.gz"><img src="Evernote_files/1acc160fc11faec2ead05cde8b411f84.png" alt="yasm-1.2.0.tar.gz"></a>
</span>
</div>
<hr>
<a name="534"/>

<div>
<span>安装Openoffice可能遇到的问题<br/>可能遇到的问题有：<br/>a：问题1<br/>[program~]$ soffice -headless-accept=&quot;socket,host=127.0.0.1,port=8100;urp;&quot; -nofirststartwizard&amp;<br/>[1] 3094<br/>[program~]$ /opt/openoffice.org3/program/soffice.bin: error while loading sharedlibraries: libuno_sal.so.3: cannot open shared object file: No such file ordirectory<br/> <br/>[1]+  Exit 127                soffice -headless-accept=&quot;socket,host=127.0.0.1,port=8100;urp;&quot; -nofirststartwizard<br/>解决方法<br/>重新装openoffice.org-ure-3.4.1-9593.x86_64.rpm<br/><br/>注：在开发过程中，有时会发现即使用8100启动后，也不能转化，那就换成8001端口或者其他端口启动试试！<br/><br/>b：问题2：应该X图形界面没装：<br/>no suitable windowing system found, exiting.<br/>先装X windows<br/>#yum groupinstall 'X Window System' -y<br/> <br/>安装GNOME桌面环境<br/>#yum groupinstall GNOME Desktop Environment<br/> <br/>安装KDE桌面环境<br/>#yum groupinstall KDE  Desktop Environment<br/><br/><br/><br/>Openoffice下载地址<br/>http://jaist.dl.sourceforge.net/project/openofficeorg.mirror/localized/zh-CN/3.4.1/Apache_OpenOffice_incubating_3.4.1_Linux_x86-64_install-rpm_zh-CN.tar.gz<br/><br/><br/>可能遇到的问题2  <br/>Openoffice启动是要java支持的，所有系统要先安装java<br/><br/><br/><br/><br/>遇到的问题<br/>这个可能是 缺少gcc或者g++<br/>[root~]# yum install gcc-c++<br/> <br/>还可能有依赖包<br/>yum-y install giflib-devel libjpeg-devel freetype-devel t1lib-devel zlib<br/> <br/>还可能遇到的问题<br/>modules/.././types.h:39:2: 错误：#error &quot;no way to define 64 bit integer&quot;<br/>modules/.././types.h:42:2: 错误：#error &quot;don't know how to define 32 bit integer&quot;<br/>modules/.././types.h:45:2: 错误：#error &quot;don't know how to define 16 bit integer&quot;<br/>modules/.././types.h:48:2: 错误：#error &quot;don't know how to define 8 bit integer&quot;<br/>解决方法：<br/>[root~]# ldconfig /usr/local/lib<br/><br/>然后再执行<br/>[root~]# ldconfig /usr/local/lib<br/>[root~]# ./configure<br/><br/><br/><br/><br/>解决字体问题<br/> <br/>swftools 对中文乱码问题<br/>需要把windows的字体复制到linux上。<br/>字体位置：C:\Windows\Fonts<br/>把字体文件打包传到服务器上。<br/>============网上参考别人的东西 开始==============<br/># mkdir /usr/share/fonts/win<br/># chmod 644/usr/share/fonts/win/*将以上字体文件复制到/usr/share/fonts/win目录下执行<br/># mkfontscale<br/>#mkfontdir      # mkfont命令是生成win目录下所包含的字体的索引信息<br/>#fc-cache                    #fc-cache命令更新字体缓存<br/># fc-cache -f –v<br/>然后运行reboot 重启系统。字体美化就OK了!<br/>============网上参考别人的东西 结束==============<br/> 以下是我的执行步骤<br/>1：把 C:\Windows\Fonts 下的所有文件包。<br/>2：把打包的fonts.zip 传到 /usr/share/fonts/ <br/>3：解压fonts.zip <br/>4：进入这个目录执行 mkfontscale   mkfontdir       c-cache      fc-cache -f –v<br/>5：重新启动系统。<br/> <br/>可能遇到的问题<br/>没有mkfontscale 命令<br/>解决方法<br/>[]$sudo yum install mkfontscale<br/><br/>启动 openoffice：<br/>cd /opt/openoffice.org3/program<br/>soffice -headless -accept=&quot;socket,host=127.0.0.1,port=8001;urp;&quot;-nofirststartwizard &amp;<br/><br/><br/><br/><br/><br/></span>
</div>
<hr>
<a name="535"/>

<div>
<span><div>  迁移到utf8时gbk中文文件名的转换工具convmv</div><div>分类： LINUX</div><div>迁移到utf8时gbk中文文件名的转换工具convmv</div><div>2009-09-25 10:37</div><div>装好Ubuntu后，系统使用的是utf8编码，原来在FC4下使用GBK编码中文文件名的文档，现在都变成了乱码。</div><div>在linuxsir搜索到convmv可以解决问题。</div><div>可以在http://j3e.de/linux/convmv/下载</div><div><br/></div><div>convmv -f cp936 -t utf8 -r --nosmart --notest &lt;目录&gt;</div><div><br/></div><div>就可以了。</div><div>当然文件内容的转换用iconv就可以了。</div><div>刚刚找到了一个更完全的文档。</div><div><br/></div><div>引用</div><div><br/></div><div>文章地址：http://lidaobing.blogchina.com/140975.html</div><div>我准备把我的Linux平台的编码从zh_CN.GB2312改为zh_CN.UTF-8，希望能够一切顺利。</div><div>我的系统是Debian/Linux, sid, 2.6。</div><div><br/></div><div>1. 基本配置bash的设置没有改，.xsession是.xinitrc的软链接。</div><div>.xinitrc内容如下：</div><div><br/></div><div># .xinitrcsource</div><div>$HOME/.bash_profile</div><div>LANG=zh_CN.UTF-8</div><div>LC_MESSAGES=en_US</div><div>LC_TIME=en_US</div><div>export LANG LC_MESSAGES LC_TIME</div><div>export GDK_USE_XFT=1</div><div>export GTK_IM_MODULE='scim'</div><div>export XMODIFIERS=&quot;@im=SCIM&quot;</div><div>scim -d</div><div>xscreensaver -no-splash &amp;</div><div>esd &amp;</div><div>icewmbg &amp;</div><div>icewmtray &amp;</div><div>exec icewm</div><div><br/></div><div>2. 文件名可以用convmv来转换</div><div><br/></div><div>convmv -f gb2312 -t utf8 -r --notest *</div><div>-r表示包含所有子目录</div><div>不加--notest就表示只看看有什么需要转换的，不做实际转换</div><div><br/></div><div>3. 文件内容可以用iconv，不过我更喜欢用emacs.用emacs打开文件</div><div>C-x f utf-8 C-x C-s</div><div>搞定。</div><div><br/></div><div>4. xterm</div><div>理论上uxterm, rxvt-unicode-ml, mlterm, gnome-terminal都应该支持的，但似乎uxterm, rxvt总有莫名奇妙的问题，所以我用mlterm(gnome-terminal的粘贴风格我不喜欢)</div><div><br/></div><div>5. Emacs只需加如下两句</div><div>(setq current-language-environment &quot;Chinese-GB&quot;)(prefer-coding-system 'utf-8)</div><div>这时你用</div><div>C-h v coding-category-list</div><div><br/></div><div>可以看到coding-category-list等于</div><div>(coding-category-utf-8</div><div>coding-category-iso-8-2 coding-category-big5 coding-category-iso-7-else</div><div>coding-category-iso-8-1 coding-category-utf-16-be</div><div>coding-category-utf-16-le coding-category-iso-7-tight</div><div>coding-category-iso-7 coding-category-iso-8-else</div><div>coding-category-emacs-mule coding-category-raw-text</div><div>coding-category-sjis coding-category-ccl coding-category-binary)</div><div><br/></div><div>其中coding-category-iso-8-2就是chinese-iso-8bit，也就是gb2312</div><div><br/></div><div>7. LaTeX</div><div>cjk-latex支持UTF8，但需要cyberb(debian没有提供)，只好拿ttf-arphic-gbsn00lp伪装一个。</div><div><br/></div><div>首先安装tetex-bin, cjk-latex, ttf-arphic-gbsn00lp，然后运行脚本unisong</div><div><br/></div><div>unisong含两个文件，Makefile和c70song.fd</div><div><br/></div><div>Makefile:</div><div><br/></div><div>all:</div><div>buildbuild:</div><div>ln -s /usr/share/fonts/truetype/arphic/gbsn00lp.ttf unisong.ttf</div><div>ttf2tfm unisong.ttf -w unisong@Unicode@ &gt; unisong.log</div><div>rm -f unisong.map</div><div>for i in *.tfm; do \</div><div>base=`basename $$i .tfm`;\</div><div>echo &quot;$${base} &lt;$${base}.enc &gt; unisong.map;\</div><div>done</div><div>install:</div><div>install -d /usr/share/texmf/fonts/tfm/arphic/unisong/</div><div>cp *.tfm /usr/share/texmf/fonts/tfm/arphic/unisong/</div><div>install -d /usr/share/texmf/dvips/arphic/</div><div>cp *.enc /usr/share/texmf/dvips/arphic/</div><div>cp unisong.map /etc/texmf/dvips/</div><div>cp unisong.map /usr/share/texmf/dvips/omega/</div><div>cp unisong.ttf /usr/share/texmf/fonts/truetype/arphic/</div><div>grep '^unisong@Unicode@ unisong.ttf' /etc/ttf2pk/ttfonts.map || \</div><div>echo &quot;unisong@Unicode@ unisong.tff&quot; &gt;&gt; /etc/ttf2pk/ttfonts.map</div><div>cp -f c70song.fd /usr/share/texmf/tex/latex/CJK/UTF8/</div><div>grep &quot;^map +unisong.map&quot; /etc/texmf/pdftex/pdftex.cfg || \</div><div>echo &quot;map +unisong.map&quot; &gt;&gt; /etc/texmf/pdftex/pdftex.cfg</div><div>mktexlsrclean:</div><div>rm -f unisong*.tfm</div><div>rm -f unisong*.enc</div><div>rm -f unisong.map</div><div>rm -f unisong.ttf</div><div>rm -f unisong.log</div><div>.PHONY: build</div><div><br/></div><div>c70song.fd(cjk-latex自带的c70song.fd，再将cyberb改成unisong就可以了):</div><div><br/></div><div>% This is the file c70song.fd of the CJK package</div><div>% for using Asian logographs (Chinese/Japanese/Korean) with LaTeX2e</div><div>%</div><div>% created by Werner Lemberg</div><div>%</div><div>% Version 4.5.1 (17-Jun-2002)</div><div>\def\fileversion{4.5.1}</div><div>\def\filedate{2002/06/17}</div><div>\ProvidesFile{c70song.fd}[\filedate\space\fileversion]</div><div>% character set: Unicode U+0080 - U+FFFD</div><div>% font encoding: Unicode</div><div>\DeclareFontFamily{C70}{song}{\hyphenchar \font\m@ne}</div><div>\DeclareFontShape{C70}{song}{m}{n}{&lt;-&gt; CJK * unisong}{}</div><div>\DeclareFontShape{C70}{song}{bx}{n}{&lt;-&gt; CJKb * unisong}{\CJKbold}</div><div>\endinput</div><div><br/></div><div>OK, make; su; make install就可以了</div><div><br/></div><div>然后把你的latex文章转成UTF8编码，把\begin{CJK*}{GB}{song}改成\begin{CJK*}{UTF8}{song}就可以了。</div><div><br/></div><div>8. MP3 ID3 tag</div><div>xmms 里边一堆的乱码，看来是ID3的编码的问题，没办法，又写了一个脚本。注意，这个脚本依赖于pyid3lib, 你可以到 http://pyid3lib.sourceforge.net/ 下载，如果你用debian的话，可以直接用 apt-get install python-id3lib 安装</div><div><br/></div><div>#!/usr/bin/python</div><div># mp3iconv.py</div><div>import os</div><div>import pyid3lib</div><div>def texticonv(text, fcode, tcode):</div><div>try:</div><div>text.decode(tcode)</div><div>except UnicodeDecodeError:</div><div>try:</div><div>newtext = text.decode(fcode)</div><div>except UnicodeDecodeError:</div><div>return False, None</div><div>newtext = newtext.encode(tcode)</div><div>return True, newtext</div><div>os.rename(fname, newfname)</div><div>return False, Nonedef mp3iconv(fname, fcode='gb2312', tcode='utf8'):</div><div>tag = pyid3lib.tag(fname)</div><div>needupdate = False</div><div>for key in ['artist', 'title', 'album']:</div><div>try:</div><div>text = getattr(tag, key)</div><div>except AttributeError:</div><div>continue</div><div>r, newtext = texticonv(text, fcode, tcode)</div><div>if r:</div><div>setattr(tag, key, newtext)</div><div>needupdate = True</div><div>if needupdate:</div><div>tag.update()</div><div>def main():</div><div>import sys</div><div>assert len(sys.argv) &gt; 1</div><div>for x in sys.argv[1:]:</div><div>mp3iconv(x)</div><div>if __name__ == '__main__':</div><div>main()</div><div><br/></div><div>9. FTP</div><div>很多FTP的文件名是GB2312编码的。解决方法有：</div><div>1. 用mozilla系列浏览器来访问FTP，可以自行设置编码。</div><div><br/></div><div>2. 用lftp，在$HOME/.lftp/rc或/etc/lftp.conf文件中加入(感谢：yabozj AT zju.edu.cn)</div><div><br/></div><div>set ftp:charset &quot;gbk&quot;</div><div>set file:charset &quot;UTF-8&quot;</div></span>
</div>
<hr>
<a name="537"/>

<div>
<span><a href="Evernote_files/chrome版本安装方法.url"><img src="Evernote_files/cae88a0b6a67831a4602d7aa436f3920.png" alt="chrome版本安装方法.url"></a> <a href="Evernote_files/谷歌访问助手2.1.9.crx"><img src="Evernote_files/a4c43dbdc9ac99dac65c4d5e2cfa5f8a.png" alt="谷歌访问助手2.1.9.crx"></a></span>
</div>
<hr>
<a name="540"/>

<div>
<span><a href="Evernote_files/ExportWordTest.java"><img src="Evernote_files/48ffb3500eb4a36e1a84cd3a5574c43e.png" alt="ExportWordTest.java"></a></span>
</div>
<hr>
<a name="542"/>

<div>
<span><a href="Evernote_files/（8）jsonp Demo.rar"><img src="Evernote_files/b2450c47cdc25e7d9fb4096af16570fe.png" alt="（8）jsonp Demo.rar"></a></span>
</div>
<hr>
<a name="545"/>

<div>
<span><div><a href="Evernote_files/OfficeToPdf.java"><img src="Evernote_files/671aae7ed6d6727483c3ad66b293273a.png" alt="OfficeToPdf.java"></a> </div></span>
</div>
<hr>
<a name="547"/>

<div>
<span><a href="Evernote_files/FileConventer.java"><img src="Evernote_files/583a3582c7f2e6532a842140bb3b08c9.png" alt="FileConventer.java"></a></span>
</div>
<hr>
<a name="551"/>

<div>
<span><a href="Evernote_files/（8）jsonp Demo.rar"><img src="Evernote_files/98d91bc9d18b57e9e941ced775c13c04.png" alt="（8）jsonp Demo.rar"></a></span>
</div>
<hr>
<a name="554"/>

<div>
<span><div>Linux 参见指令：</div><div style="margin: 10px 0px; padding: 0px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; min-height: 55px; background-color: rgb(255, 255, 255);"><div><span style="font-size: 16px;"><span style="font-family: 'Microsoft YaHei', arial, 'courier new', courier, 宋体, monospace;"><span style="color: rgb(51, 51, 51);"># uname -a # 查看内核/</span><a href="https://www.baidu.com/s?wd=%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F&amp;tn=44039180_cpr&amp;fenlei=mv6quAkxTZn0IZRqIHckPjm4nH00T1Y3nj0Ln1mLujmzPj61nh7-0ZwV5Hcvrjm3rH6sPfKWUMw85HfYnjn4nH6sgvPsT6KdThsqpZwYTjCEQLGCpyw9Uz4Bmy-bIi4WUvYETgN-TLwGUv3EnHRkPj0YP1DYrHf1PHmzP1DYn0" rel="nofollow" style="color: rgb(63, 136, 191); text-decoration: none;" target="_blank">操作系统</a><span style="color: rgb(51, 51, 51);">/CPU信息</span></span></span></div><span style="color: rgb(51, 51, 51);"><span style="font-size: 16px;"><span style="font-family: 'Microsoft YaHei', arial, 'courier new', courier, 宋体, monospace;"># head -n 1 /etc/issue # 查看<a href="https://www.baidu.com/s?wd=%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F&amp;tn=44039180_cpr&amp;fenlei=mv6quAkxTZn0IZRqIHckPjm4nH00T1Y3nj0Ln1mLujmzPj61nh7-0ZwV5Hcvrjm3rH6sPfKWUMw85HfYnjn4nH6sgvPsT6KdThsqpZwYTjCEQLGCpyw9Uz4Bmy-bIi4WUvYETgN-TLwGUv3EnHRkPj0YP1DYrHf1PHmzP1DYn0" rel="nofollow" style="color: rgb(63, 136, 191); text-decoration: none;" target="_blank">操作系统</a>版本</span></span></span><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 16px;"><span style="font-family: 'Microsoft YaHei', arial, 'courier new', courier, 宋体, monospace;"># cat /proc/cpuinfo # 查看CPU信息</span></span></span></div><div><span style="color: rgb(51, 51, 51); font-family: 'Microsoft YaHei', arial, 'courier new', courier, 宋体, monospace; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); display: inline !important; float: none;"># cat /proc/</span> meminfo<span style="color: rgb(51, 51, 51); font-family: 'Microsoft YaHei', arial, 'courier new', courier, 宋体, monospace; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); display: inline !important; float: none;"># 查看内存信息</span></div><div><p style="margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft YaHei'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">查看硬盘信息：</p><p style="margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft YaHei'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">df 命令是一个显示文件系统使用情况状态的命令。</p><div style="margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft YaHei'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div>df -h</div></div></div><div><p style="margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft YaHei'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">查看cpu和内存使用率。</p><div style="margin: 0px; padding: 0px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 16px;"><span style="font-family: 'Microsoft YaHei';"> top</span></span></span></div><div><p style="margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft YaHei'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">ps命令可以显示各个进程的内存使用情况、以及更详细的物理内存使用情况和<a href="https://www.baidu.com/s?wd=%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98&amp;tn=44039180_cpr&amp;fenlei=mv6quAkxTZn0IZRqIHckPjm4nH00T1Y1ryf4PAwWPHfLPAPhrHfL0ZwV5Hcvrjm3rH6sPfKWUMw85HfYnjn4nH6sgvPsT6KdThsqpZwYTjCEQLGCpyw9Uz4Bmy-bIi4WUvYETgN-TLwGUv3EnHnYrjn4PHmzPWfLPjRvnW6d" rel="nofollow" style="color: rgb(63, 136, 191); text-decoration: none;" target="_blank">虚拟内存</a>使用情况。你可以使用 “–sort”选项对进程进行排序，例如按RSS进行排序：</p><div style="margin: 0px; padding: 0px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 16px;"><span style="font-family: 'Microsoft YaHei';">$ ps aux --sort -rss</span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 16px;"><span style="font-family: 'Microsoft YaHei';"><br/></span></span></span></div><div><p style="margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Microsoft YaHei'; font-size: 16px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">free命令是一个快速查看内存使用情况的方法，它是对 /proc/meminfo 收集到的信息的一个概述。</p><div style="margin: 0px; padding: 0px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 16px;"><span style="font-family: 'Microsoft YaHei';"><span style="color: rgb(63, 136, 191);"><br/></span></span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 16px;"><span style="font-family: 'Microsoft YaHei';"><a href="https://gss0.baidu.com/94o3dSag_xI4khGko9WTAnF6hhy/zhidao/pic/item/e824b899a9014c08e6408ddc0c7b02087bf4f454.jpg" rel="nofollow" style="color: rgb(63, 136, 191); text-decoration: none; display: inline-block; position: relative;" target="_blank" title="点击查看大图"><img src="Evernote_files/Image [18].png" type="image/png" style="border: 0px; max-height: 340px; height: auto;"/></a></span></span></span></div><div>测试本机某个端口号有没有被占用</div><div style="border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); margin: 15px auto; padding: 10px 15px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-image: url(file:///images/codecolorer_bg.gif); background-color: rgb(251, 251, 251); background-position: 50% 0%; background-repeat: initial initial;"><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 12px;"><span style="font-family: 'courier new';"><span style="border: 0px; margin: 0px; padding: 0px; color: rgb(136, 0, 0);"># telnet 127.0.0.1 9501</span></span></span></span></div><div><span style="font-size: 12px;"><span style="font-family: 'courier new';"><span style="color: rgb(136, 0, 0);">没被占用的情况如下:</span></span></span></div><div><span style="color: rgb(51, 51, 51);"><span style="font-size: 12px;"><span style="font-family: 'courier new';"><span style="color: rgb(136, 0, 0);"><br/></span></span></span></span></div><div><img src="Evernote_files/Image [19].png" type="image/png"/></div><div><br/></div></div></div></div></div></div></div></div></div></span>
</div>
<hr>
<a name="557"/>

<div>
<span><a href="Evernote_files/Solr 3.5开发应用教程-Linux公社（www.linuxidc.com）整理.pdf"><img src="Evernote_files/970157c51edf3efb771424dc6bd784c8.png" alt="Solr 3.5开发应用教程-Linux公社（www.linuxidc.com）整理.pdf"></a>
</span>
</div>
<hr>
<a name="559"/>

<div>
<span><div>tomcat又分为： apr、bio、jk等模式运行，默认是bio模式的，这种模式下并发性不高，apr并发最高，从tomcat的启动日志可以看得出以哪种模式启动，见如下图的蓝色文字：</div><div>bio模式：</div><div><br/></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 147pt;"><div><img src="Evernote_files/Image [20].png" type="image/png" alt="graphic" border="0" height="197" style="height: auto;" width="680"/></div><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;min-height: 12pt;"><div><font color="#010101" face="宋体" size="1"><span style="font-size:9pt">apr模式：</span></font></div><div><span style="font-size: 9pt;"><span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);"> </span></span></span><img src="Evernote_files/Image [21].png" type="image/png" alt="graphic" border="0" height="197" style="height: auto;" width="680"/></div></div><div><br/></div></div></span>
</div>
<hr>
<a name="561"/>

<div>
<span><a href="Evernote_files/MyBatis_Generator_1.3.1.zip.zip"><img src="Evernote_files/13e79e319ff5bfc87c33680ae9830e1a.png" alt="MyBatis_Generator_1.3.1.zip.zip"></a></span>
</div>
<hr>
<a name="563"/>

<div>
<span><div>JSOn装换成HashMap&lt;String,Object&gt;:</div><div>hashMaps  =JSONObject.parseObject(JSONObject.toJSONString(msgDto.getMsgBody()),new TypeReference&lt;List&lt;HashMap&lt;String,Object&gt;&gt;&gt;(){});</div><div><br/></div><div><br/></div><div>JSOn装换成List&lt;Map&lt;String,Object&gt; &gt;:</div><div align="left"><font color="#6A3E3E" face="Consolas" size="4"><span style="font-size:14pt">students</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">= JSONObject.</span><span style="font-size:14pt"><i>parseObject</i></span><span style="font-size:14pt">(JSONObject.</span><span style="font-size:14pt"><i>toJSONString</i></span><span style="font-size:14pt">(</span></font><font color="#6A3E3E" face="Consolas" size="4"><span style="font-size:14pt">returnMsgDto</span></font> <font face="Consolas" size="4"><span style="font-size:14pt">.getResultObject()),</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">                                  </span></font> <font color="#7F0055" face="Consolas" size="4"><span style="font-size:14pt"><b>new</b></span></font> <font face="Consolas" size="4"><span style="font-size:14pt">TypeReference&lt;List&lt;Map&lt;String, Object&gt;&gt;&gt;() {</span></font></div><div align="left"><font face="Consolas" size="4"><span style="font-size:14pt">                                  });</span></font></div></span>
</div>
<hr>
<a name="564"/>

<div>
<span><ol><li><div><a href="#586" style="color:#69aa35">消息中间件对比分析.pdf</a></div></li><li><div><a href="#589" style="color:#69aa35">zookeeper分布式锁.pdf</a></div></li><li><div><a href="#591" style="color:#69aa35">vsftpd使用笔记.pdf</a></div></li><li><div><a href="#593" style="color:#69aa35">1-MongoDb集群搭建_Master-Slave.pdf</a></div></li><li><div><a href="#595" style="color:#69aa35">SVN分支操作图.pdf</a></div></li></ol></span>
</div>
<hr>
<a name="565"/>

<div>
<span><div>在IDE中的配置：</div><div>-Xms128m -Xmx1024m -XX:PermSize=128m -XX:MaxPermSize=128m</div></span>
</div>
<hr>
<a name="566"/>

<div>
<span><img src="Evernote_files/1419757766_71580.jpg" type="image/jpeg" style="height: auto;"/></span>
</div>
<hr>
<a name="568"/>

<div>
<span><div><b>tomcat内存溢出设置：</b></div><div><b><br/></b></div><div><br/></div><br/><div><p style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; margin-bottom: 16px; color: rgb(61, 70, 77); font-family: &quot;Pingfang SC&quot;, STHeiti, &quot;Lantinghei SC&quot;, &quot;Open Sans&quot;, Arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, SimSun, sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; text-align: left; padding: 0px; widows: 1; text-transform: none; background-color: rgb(255, 255, 255); text-indent: 0px; margin: 0px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: &quot;Microsoft YaHei&quot;, Verdana, sans-serif, 宋体; white-space: normal; letter-spacing: normal; color: rgb(51, 51, 51); word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; padding: 0px; margin: 0px;">********************************************************************************************************************</span><br style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"/>
如果是在IDE中开发项目，以MyEclipse为例，</span><span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; text-align: left; widows: 1; text-transform: none; background-color: rgb(255, 255, 255); text-indent: 0px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: &quot;Microsoft YaHei&quot;, Verdana, sans-serif, 宋体; white-space: normal; float: none; letter-spacing: normal; color: rgb(51, 51, 51); word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important;"><span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"> </span></span><br style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"/><span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; text-align: left; padding: 0px; widows: 1; text-transform: none; background-color: rgb(255, 255, 255); text-indent: 0px; margin: 0px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; font-family: Arial; white-space: normal; letter-spacing: normal; color: rgb(51, 51, 51); word-spacing: 0px; -webkit-text-stroke-width: 0px;">Window-&gt;Preferences-&gt;MyEclipse-&gt;Servers-&gt;Tomcat x.x-&gt;JDK-&gt;Optional Java VM arguments:</span></p></div><div><br/></div><div><div style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; margin-bottom: 16px; color: rgb(61, 70, 77); font-family: &apos;Pingfang SC&apos;, STHeiti, &apos;Lantinghei SC&apos;, &apos;Open Sans&apos;, Arial, &apos;Hiragino Sans GB&apos;, &apos;Microsoft YaHei&apos;, &apos;WenQuanYi Micro Hei&apos;, SimSun, sans-serif; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 16px;"><div><br/></div></div><table cellpadding="0" cellspacing="0" style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; border-collapse: collapse; border-spacing: 1px; font-size: 14px; color: rgb(68, 68, 68); display: block; overflow-x: auto; max-width: 100%; border: 0px; font-family: &quot;Pingfang SC&quot;, STHeiti, &quot;Lantinghei SC&quot;, &quot;Open Sans&quot;, Arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, SimSun, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;width:706px;"><tr style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"><td style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; padding: 4px 8px; border: 1px solid rgb(204, 204, 204);width:4.957507082152975%;"><div style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;">1</div><div style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;">2</div><div style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;">3</div><div style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;">4</div></td><td style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; padding: 4px 8px; border: 1px solid rgb(204, 204, 204);width:98.82761871096972%;"><div style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"><code style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; border-radius: 3px; padding: 2px; font-size: 13px;">-Xms256m</code></div><div style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"><code style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; border-radius: 3px; padding: 2px; font-size: 13px;">-Xmx256m</code></div><div style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"><code style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; border-radius: 3px; padding: 2px; font-size: 13px;">-XX:PermSize=512M</code></div><div style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"><code style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; border-radius: 3px; padding: 2px; font-size: 13px;">-XX:MaxPermSize=512m</code></div></td></tr></table><p style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; margin: 8px 0px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: 0px; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; padding: 0px; widows: 1; background-color: rgb(255, 255, 255); font-stretch: normal; font-size: 12px; font-family: &quot;Microsoft YaHei&quot;, Verdana, sans-serif, 宋体; word-wrap: break-word; color: rgb(51, 51, 51); word-break: break-all;">根据情况可以更改指定的内存大小。</p><p style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; margin: 8px 0px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: 0px; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; padding: 0px; widows: 1; background-color: rgb(255, 255, 255); font-stretch: normal; font-size: 12px; font-family: &quot;Microsoft YaHei&quot;, Verdana, sans-serif, 宋体; word-wrap: break-word; color: rgb(51, 51, 51); word-break: break-all;">****************************************************************************************************<br style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"/>
-Xms256m：表示JVM Heap(堆内存)最小尺寸256MB，初始分配<br style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"/>
-Xmx256m：表示JVM Heap(堆内存)最大允许的尺寸512MB，按需分配。<br style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"/>
说明：如果-Xmx不指定或者指定偏小，应用可能会导致java.lang.OutOfMemory错误，此错误来自JVM不是Throwable的，无法用try...catch捕捉。<br style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"/><br style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"/><br style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"/>
-XX:PermSize=512MB 最小尺寸，初始分配<br style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"/>
-XX:MaxPermSize=512MB 最大允许分配尺寸，按需分配，过小会导致：java.lang.OutOfMemoryError: PermGen space<br style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"/>
说明：PermSize和MaxPermSize指明虚拟机为java永久生成对象（Permanate generation）的大小，如，class对象、方法对象这些可反射（reflective）对象分配内存限制，这些内存不包括在Heap（堆内存）区之中。<br style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"/><br style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"/><br style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"/>
MaxPermSize缺省值和-server -client选项相关。<br style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"/>
-server选项下默认MaxPermSize为64m<br style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"/>
-client选项下默认MaxPermSize为32m<br style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"/>
****************************************************************************************************<br style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"/><br style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"/>
如果不是在IDE中开发项目，则需要更改tomcat的配置文件:</p><p style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; margin: 8px 0px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: 0px; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; padding: 0px; widows: 1; background-color: rgb(255, 255, 255); font-stretch: normal; font-size: 12px; font-family: &quot;Microsoft YaHei&quot;, Verdana, sans-serif, 宋体; word-wrap: break-word; color: rgb(51, 51, 51); word-break: break-all;"><strong style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"><span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; padding: 0px; margin: 0px; color: rgb(0, 51, 153);">Windows环境下</span></strong>:%tomcat_home%/bin/catalina.bat文件：<br style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"/>
在最开始的位置加上：</p></div><div><span style="color: rgb(61, 70, 77);"><span style="font-family: &apos;Pingfang SC&apos;, STHeiti, &apos;Lantinghei SC&apos;, &apos;Open Sans&apos;, Arial, &apos;Hiragino Sans GB&apos;, &apos;Microsoft YaHei&apos;, &apos;WenQuanYi Micro Hei&apos;, SimSun, sans-serif;"><span style="font-size: 16px;"><br/></span></span></span></div><table cellpadding="0" cellspacing="0" style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; border-collapse: collapse; border-spacing: 1px; display: block; overflow-x: auto; border: 0px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); width: 706px;"><tr style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"><td style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; padding: 4px 8px; border: 1px solid rgb(204, 204, 204);width:4.957507082152975%;"><div style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"><span style="color: rgb(68, 68, 68);"><span style="font-size: 14px;"><span style="font-family: &apos;Pingfang SC&apos;, STHeiti, &apos;Lantinghei SC&apos;, &apos;Open Sans&apos;, Arial, &apos;Hiragino Sans GB&apos;, &apos;Microsoft YaHei&apos;, &apos;WenQuanYi Micro Hei&apos;, SimSun, sans-serif;">1</span></span></span></div></td><td style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; padding: 4px 8px; border: 1px solid rgb(204, 204, 204);width:96.00000000000001%;"><div style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"><div>set JAVA_OPTS=%JAVA_OPTS% -server -Xms512m -Xmx512m   -XX:MaxNewSize=256m -XX:PermSize=512M -XX:MaxPermSize=512m</div></div></td></tr></table><div><br/></div><div><p style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; margin-bottom: 16px; color: rgb(61, 70, 77); font-family: &quot;Pingfang SC&quot;, STHeiti, &quot;Lantinghei SC&quot;, &quot;Open Sans&quot;, Arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, SimSun, sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; text-align: left; widows: 1; text-transform: none; background-color: rgb(255, 255, 255); text-indent: 0px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: &quot;Microsoft YaHei&quot;, Verdana, sans-serif, 宋体; white-space: normal; float: none; letter-spacing: normal; color: rgb(51, 51, 51); word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important;">这样就搞定了。</span></p><p style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; margin: 8px 0px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: 0px; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; padding: 0px; widows: 1; background-color: rgb(255, 255, 255); font-stretch: normal; font-size: 12px; font-family: &quot;Microsoft YaHei&quot;, Verdana, sans-serif, 宋体; word-wrap: break-word; color: rgb(51, 51, 51); word-break: break-all;">注意：如果只更改catalina.bat文件，而是通过IDE启动tomcat，则IDE会忽略掉catalina.bat文件中设置的参数，所以最好就是在2处都进行更改。</p><p style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; margin-bottom: 16px; color: rgb(61, 70, 77); font-family: &quot;Pingfang SC&quot;, STHeiti, &quot;Lantinghei SC&quot;, &quot;Open Sans&quot;, Arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, SimSun, sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; text-align: left; widows: 1; text-transform: none; background-color: rgb(255, 255, 255); text-indent: 0px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: &quot;Microsoft YaHei&quot;, Verdana, sans-serif, 宋体; white-space: normal; float: none; letter-spacing: normal; color: rgb(51, 51, 51); word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important;">********************************************************************************************************************<span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"> </span></span><br style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"/><strong style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"><span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; padding: 0px; margin: 0px; color: rgb(0, 51, 153);">Linux环境下</span></strong><span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; text-align: left; widows: 1; text-transform: none; background-color: rgb(255, 255, 255); text-indent: 0px; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 12px; font-family: &quot;Microsoft YaHei&quot;, Verdana, sans-serif, 宋体; white-space: normal; float: none; letter-spacing: normal; color: rgb(51, 51, 51); word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important;">:修改catalina.sh文件，在</span></p></div><div><br/></div><div><div style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; margin-bottom: 16px; color: rgb(61, 70, 77); font-family: &apos;Pingfang SC&apos;, STHeiti, &apos;Lantinghei SC&apos;, &apos;Open Sans&apos;, Arial, &apos;Hiragino Sans GB&apos;, &apos;Microsoft YaHei&apos;, &apos;WenQuanYi Micro Hei&apos;, SimSun, sans-serif; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); font-size: 16px;"><div><br/></div></div><table cellpadding="0" cellspacing="0" style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; border-collapse: collapse; border-spacing: 1px; font-size: 14px; color: rgb(68, 68, 68); display: block; overflow-x: auto; max-width: 100%; border: 0px; font-family: &quot;Pingfang SC&quot;, STHeiti, &quot;Lantinghei SC&quot;, &quot;Open Sans&quot;, Arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, SimSun, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;width:706px;"><tr style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"><td style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; padding: 4px 8px; border: 1px solid rgb(204, 204, 204);width:4.957507082152975%;"><div style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;">1</div></td><td style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; padding: 4px 8px; border: 1px solid rgb(204, 204, 204);width:101.09227871939738%;"><div style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"><code style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; border-radius: 3px; padding: 2px; font-size: 13px;">cygwin=false</code></div></td></tr></table><p style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; margin: 8px 0px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: 0px; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; padding: 0px; widows: 1; background-color: rgb(255, 255, 255); font-stretch: normal; font-size: 12px; font-family: &quot;Microsoft YaHei&quot;, Verdana, sans-serif, 宋体; word-wrap: break-word; color: rgb(51, 51, 51); word-break: break-all;">之前添加</p></div><div><span style="color: rgb(61, 70, 77);"><span style="font-family: &apos;Pingfang SC&apos;, STHeiti, &apos;Lantinghei SC&apos;, &apos;Open Sans&apos;, Arial, &apos;Hiragino Sans GB&apos;, &apos;Microsoft YaHei&apos;, &apos;WenQuanYi Micro Hei&apos;, SimSun, sans-serif;"><span style="font-size: 16px;"><br/></span></span></span></div><table cellpadding="0" cellspacing="0" style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; border-collapse: collapse; border-spacing: 1px; font-size: 14px; color: rgb(68, 68, 68); display: block; overflow-x: auto; border: 0px; font-family: &quot;Pingfang SC&quot;, STHeiti, &quot;Lantinghei SC&quot;, &quot;Open Sans&quot;, Arial, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;WenQuanYi Micro Hei&quot;, SimSun, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;width:706px;"><tr style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"><td style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; padding: 4px 8px; border: 1px solid rgb(204, 204, 204);width:4.957507082152975%;"><div style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;">1</div></td><td style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; padding: 4px 8px; border: 1px solid rgb(204, 204, 204);width:96.0761285755655%;"><div style="box-sizing: inherit; -webkit-tap-highlight-color: transparent;"><div><code style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; border-radius: 3px; padding: 2px; font-size: 13px;">JAVA_OPTS=&quot;-server -Xmx256m -Xms256m -XX:PermSize=512M -XX:MaxPermSize=512m&quot;</code></div></div></td></tr></table></span>
</div>
<hr>
<a name="569"/>

<div>
<span><div>创建函数出现问题解决：</div><div>[Err] 1418 - This function has none of DETERMINISTIC,</div><div>NO SQL, or READS SQL DATA in its declaration and binary</div><div>logging is enabled (you *might* want to use the less safe log_bin_trust_function_creators variable)</div><div><br/></div><div>解决办法：</div><div>这是我们开启了bin-log, 我们就必须指定我们的函数是否是</div><div>1 DETERMINISTIC 不确定的</div><div>2 NO SQL 没有SQl语句，当然也不会修改数据</div><div>3 READS SQL DATA 只是读取数据，当然也不会修改数据</div><div>4 MODIFIES SQL DATA 要修改数据</div><div>5 CONTAINS SQL 包含了SQL语句</div><div><br/></div><div>其中在function里面，只有 DETERMINISTIC, NO SQL 和 READS SQL DATA 被支持。如果我们开启了 bin-log, 我们就必须为我们的function指定一个参数。</div><div><br/></div><div>在MySQL中创建函数时出现这种错误的解决方法：</div><div>set global log_bin_trust_function_creators=TRUE;</div><div><br/></div><div><br/></div><div><br/></div></span>
</div>
<hr>
<a name="570"/>

<div>
<span><div>查看数据包大小:</div><div>SHOW VARIABLES LIKE '%max_allowed_packet%';</div><div>设置大小:</div><div>max_allowed_packet = 20M</div><div><br/></div></span>
</div>
<hr>
<a name="571"/>

<div>
<span><div align="left" style="margin-left:4mm; margin-right:0mm; text-indent:0mm; margin-top:0.00mm; margin-bottom:0.00mm;"><div><br/></div><div><font color="#010101" face="宋体" size="1"><span style="font-size:9pt"> FLUSH PRIVILEGES;</span></font></div><div><span style="font-size: 9pt;"><span style="font-family: 宋体;"><span style="color: rgb(1, 1, 1);"><br/></span></span></span></div></div></span>
</div>
<hr>
<a name="572"/>

<div>
<span><ol><li><div><a href="#353" style="color:#69aa35">6.1：配置Zookeeper.html</a></div></li><li><div><a href="#354" style="color:#69aa35">1.2：MySQL 主从安装要点步骤.html</a></div></li><li><div><a href="#356" style="color:#69aa35">文件在线预览.html</a></div></li><li><div><a href="#358" style="color:#69aa35">文件在线预览.html</a></div></li><li><div><a href="#359" style="color:#69aa35">安装ffmpeg.html （转换工具）</a></div></li><li><div><a href="#364" style="color:#69aa35">nginx 流媒体部署.html（视频播放）</a></div></li><li><div><a href="#366" style="color:#69aa35">翻墙软件</a></div></li><li><div><a href="#367" style="color:#69aa35">7.1：配置Redis.html</a></div></li><li><div><a href="#370" style="color:#69aa35">5.2：vsftp.html</a></div></li><li><div><a href="#372" style="color:#69aa35">3.1：安装 JavaJDK.html</a></div></li><li><div><a href="#373" style="color:#69aa35">标题</a></div></li><li><div><a href="#375" style="color:#69aa35">配置多个tomcat.html</a></div></li><li><div><a href="#376" style="color:#69aa35">账号密码.html</a></div></li><li><div><a href="#378" style="color:#69aa35">笔记.html</a></div></li><li><div><a href="#381" style="color:#69aa35">安装ffmpeg.html</a></div></li><li><div><a href="#388" style="color:#69aa35">地址信息.html</a></div></li><li><div><a href="#390" style="color:#69aa35">IP地址.html</a></div></li><li><div><a href="#391" style="color:#69aa35">ftp 防火墙.html</a></div></li><li><div><a href="#394" style="color:#69aa35">nginx 流媒体部署.html</a></div></li><li><div><a href="#397" style="color:#69aa35">centos全面卸载mysql.html</a></div></li><li><div><a href="#398" style="color:#69aa35">C：6台服务器磁盘分区列表.html</a></div></li><li><div><a href="#400" style="color:#69aa35">B：数据库配置信息.html</a></div></li><li><div><a href="#404" style="color:#69aa35">9.2：安装PHP可能会遇到的问题无标题笔记.html</a></div></li><li><div><a href="#405" style="color:#69aa35">A：系统配置信息.html</a></div></li><li><div><a href="#408" style="color:#69aa35">8.2：keepalived实现双机热备.html</a></div></li><li><div><a href="#409" style="color:#69aa35">8.1：配置keepalived.html</a></div></li><li><div><a href="#410" style="color:#69aa35">9.1：安装PHP.html</a></div></li><li><div><a href="#413" style="color:#69aa35">6-PC-Service 分布式文件系统.html</a></div></li><li><div><a href="#415" style="color:#69aa35">6.1：配置Zookeeper.html</a></div></li><li><div><a href="#419" style="color:#69aa35">7.1：配置Redis.html</a></div></li><li><div><a href="#421" style="color:#69aa35">5.2：vsftp.html</a></div></li><li><div><a href="#423" style="color:#69aa35">5.1：配置FTP.html</a></div></li><li><div><a href="#424" style="color:#69aa35">2.1：安装Nginx.html</a></div></li><li><div><a href="#425" style="color:#69aa35">4.1 ：安装tomcat.html</a></div></li><li><div><a href="#427" style="color:#69aa35">3.1：安装 JavaJDK.html</a></div></li><li><div><a href="#431" style="color:#69aa35">10.1 分布式文件系统.html</a></div></li><li><div><a href="#520" style="color:#69aa35">1.4：MySQL 常用操作手册.html</a></div></li><li><div><a href="#434" style="color:#69aa35">1.3：MySQL 主从配置上的一些操作要点.html</a></div></li><li><div><a href="#436" style="color:#69aa35">1.2：MySQL 主从安装要点步骤.html</a></div></li><li><div><a href="#437" style="color:#69aa35">1.1：MySQL 安装要点步骤.html</a></div></li><li><div><a href="#440" style="color:#69aa35">5.1：配置FTP.html</a></div></li><li><div><a href="#441" style="color:#69aa35">1.1：MySQL 安装要点步骤.html</a></div></li><li><div><a href="#444" style="color:#69aa35">2.1：安装Nginx.html</a></div></li><li><div><a href="#447" style="color:#69aa35">新增学科</a></div></li><li><div><a href="#449" style="color:#69aa35">配置多个tomcat.html</a></div></li><li><div><a href="#450" style="color:#69aa35">11.1 在Tomat7上使用Redis保存Session</a></div></li><li><div><a href="#453" style="color:#69aa35">9.2：安装PHP可能会遇到的问题无标题笔记.html</a></div></li><li><div><a href="#454" style="color:#69aa35">1.3：MySQL 主从配置上的一些操作要点.html</a></div></li><li><div><a href="#455" style="color:#69aa35">1.4：MySQL 常用操作手册.html</a></div></li><li><div><a href="#456" style="color:#69aa35">ftp 防火墙.html</a></div></li><li><div><a href="#457" style="color:#69aa35">B：数据库配置信息.html</a></div></li><li><div><a href="#460" style="color:#69aa35">C：6台服务器磁盘分区列表.html</a></div></li><li><div><a href="#461" style="color:#69aa35">4.1 ：安装tomcat.html</a></div></li><li><div><a href="#463" style="color:#69aa35">10.1 分布式文件系统.html</a></div></li><li><div><a href="#470" style="color:#69aa35">8.2：keepalived实现双机热备.html</a></div></li><li><div><a href="#472" style="color:#69aa35">centos全面卸载mysql.html</a></div></li><li><div><a href="#474" style="color:#69aa35">A：系统配置信息.html</a></div></li><li><div><a href="#475" style="color:#69aa35">IP地址.html</a></div></li><li><div><a href="#476" style="color:#69aa35">6-PC-Service 分布式文件系统.html</a></div></li><li><div><a href="#477" style="color:#69aa35">1.4：MySQL 常用操作手册</a></div></li><li><div><a href="#482" style="color:#69aa35">9.1：安装PHP.html</a></div></li><li><div><a href="#483" style="color:#69aa35">8.1：配置keepalived.html</a></div></li><li><div><a href="#490" style="color:#69aa35">1.1：MySQL 安装要点步骤.html</a></div></li></ol></span>
</div>
<hr>
<a name="575"/>

<div>
<span><div><div>网站验证码突然无法显示，并报如下错误。</div>
Caused by: java.lang.NoClassDefFoundError: Could not initialize class sun.awt.X11GraphicsEnvironment<br/>
Caused by: java.lang.InternalError: Can't connect to X11 window server using 'localhost:10.0' as the value of the DISPLAY variable.<br/>
 <br/>
网上搜索了一下，在catalina.sh里加上一句“-Djava.awt.headless=true \”，问题解决。<br/>
经查，出现这种情况一般就是启动tomcat的用户无法访问Xserver，包括Xserver没有启动或者没有权限访问.<br/>
 <br/>
以下为转贴：<br/>
1.什么是Headless mode？ <br/>
Headless模式是系统的一种配置模式。在该模式下，系统缺少了显示设备、键盘或鼠标。<br/>
 <br/>
2.何时使用和headless mode？<br/>
Headless模式虽然不是我们愿意见到的，但事实上我们却常常需要在该模式下工作，尤其是服务器端程序开发者。因为服务器（如提供Web服务的主机）往往可能缺少前述设备，但又需要使用他们提供的功能，生成相应的数据，以提供给客户端（如浏览器所在的配有相关的显示设备、键盘和鼠标的主机）。<br/>
 <br/>
3.如何使用和Headless mode？<br/>
一般是在程序开始激活headless模式，告诉程序，现在你要工作在Headless mode下，就不要指望硬件帮忙了，你得自力更生，依靠系统的计算能力模拟出这些特性来:<br/>
System.setProperty(&quot;java.awt.headless&quot;,&quot;true&quot;);<br/>
 <br/>
修改${TOMCAT_HOME}/bin/catalina.sh或${TOMCAT_HOME}/bin/catalina.bat文件：<br/>
在所有类似以下代码：<br/>
    &quot;$_RUNJAVA&quot; $JAVA_OPTS $CATALINA_OPTS \<br/>
      -Djava.endorsed.dirs=&quot;$JAVA_ENDORSED_DIRS&quot; -classpath &quot;$CLASSPATH&quot; \<br/>
      -Djava.security.manager \<br/>
      -Djava.security.policy==&quot;$CATALINA_BASE&quot;/conf/catalina.policy \<br/>
      -Dcatalina.base=&quot;$CATALINA_BASE&quot; \<br/>
      -Dcatalina.home=&quot;$CATALINA_HOME&quot; \<br/>
      -Djava.io.tmpdir=&quot;$CATALINA_TMPDIR&quot; \<br/>
 <br/>
在尾部加上一句：<br/>
      -Djava.awt.headless=true \<br/>
 <br/>
修改后内容如下：<br/>
    exec &quot;$_RUNJAVA&quot; $JAVA_OPTS $CATALINA_OPTS \<br/>
      -Djava.endorsed.dirs=&quot;$JAVA_ENDORSED_DIRS&quot; -classpath &quot;$CLASSPATH&quot; \<br/>
      -Dcatalina.base=&quot;$CATALINA_BASE&quot; \<br/>
      -Dcatalina.home=&quot;$CATALINA_HOME&quot; \<br/>
      -Djava.io.tmpdir=&quot;$CATALINA_TMPDIR&quot; \<br/>
      -Djava.awt.headless=true \<br/>
 <br/>
以tomcat6.0为例，总共有七处这样的地方，修改好后即可。<br/><br/><br/><br/><br/>
linux下图形验证码失效画不出来，加入这个可能就可以了</div><div>export DISPLAY=:0</div></span>
</div>
<hr>
<a name="578"/>

<div>
<span><a href="Evernote_files/mysql高级部分(非常实用的-不要分)包含索引建立优化-函数-存储过程-触发器-及游标.doc"><img src="Evernote_files/25869120407ce9991bdd8ce1db2f08e5.png" alt="mysql高级部分(非常实用的-不要分)包含索引建立优化-函数-存储过程-触发器-及游标.doc"></a></span>
</div>
<hr>
<a name="581"/>

<div>
<span>提高mysql千万级大数据SQL查询优化30条经验（Mysql索引优化注意）  <br/><br/>2014-07-09 17:13:55|  分类： DataBase |举报|字号 订阅<br/>    <br/>  下载LOFTER我的照片书  |<br/>转自：http://www.jincon.com/archives/120/<br/>1.对查询进行优化，应尽量避免全表扫描，首先应考虑在 where 及 order by 涉及的列上建立索引。<br/><br/><br/><br/>2.应尽量避免在 where 子句中对字段进行 null 值判断，否则将导致引擎放弃使用索引而进行全表扫描，如：select id from t where num is null可以在num上设置默认值0，确保表中num列没有null值，然后这样查询：select id from t where num=0<br/><br/><br/><br/>3.应尽量避免在 where 子句中使用!=或&lt;&gt;操作符，否则引擎将放弃使用索引而进行全表扫描。<br/><br/><br/><br/>4.应尽量避免在 where 子句中使用or 来连接条件，否则将导致引擎放弃使用索引而进行全表扫描，如：select id from t where num=10 or num=20可以这样查询：select id from t where num=10 union all select id from t where num=20<br/><br/><br/><br/>5.in 和 not in 也要慎用，否则会导致全表扫描，如：select id from t where num in(1,2,3) 对于连续的数值，能用 between 就不要用 in 了：select id from t where num between 1 and 3<br/><br/><br/><br/>6.下面的查询也将导致全表扫描：select id from t where name like '李%'若要提高效率，可以考虑全文检索。<br/><br/><br/><br/>7. 如果在 where 子句中使用参数，也会导致全表扫描。因为SQL只有在运行时才会解析局部变量，但优化程序不能将访问计划的选择推迟到运行时；它必须在编译时进行选择。然 而，如果在编译时建立访问计划，变量的值还是未知的，因而无法作为索引选择的输入项。如下面语句将进行全表扫描：select id from t where num=@num可以改为强制查询使用索引：select id from t with(index(索引名)) where num=@num<br/><br/><br/><br/>8.应尽量避免在 where 子句中对字段进行表达式操作，这将导致引擎放弃使用索引而进行全表扫描。如：select id from t where num/2=100应改为:select id from t where num=100*2<br/><br/><br/><br/>9.应尽量避免在where子句中对字段进行函数操作，这将导致引擎放弃使用索引而进行全表扫描。如：select id from t where substring(name,1,3)='abc' ，name以abc开头的id<br/><br/>应改为:<br/><br/>select id from t where name like 'abc%'<br/><br/><br/><br/>10.不要在 where 子句中的“=”左边进行函数、算术运算或其他表达式运算，否则系统将可能无法正确使用索引。<br/><br/><br/><br/>11.在使用索引字段作为条件时，如果该索引是复合索引，那么必须使用到该索引中的第一个字段作为条件时才能保证系统使用该索引，否则该索引将不会被使用，并且应尽可能的让字段顺序与索引顺序相一致。<br/><br/><br/><br/>12.不要写一些没有意义的查询，如需要生成一个空表结构：select col1,col2 into #t from t where 1=0<br/><br/>这类代码不会返回任何结果集，但是会消耗系统资源的，应改成这样：<br/><br/>create table #t(...)<br/><br/><br/><br/>13.很多时候用 exists 代替 in 是一个好的选择：select num from a where num in(select num from b)<br/><br/>用下面的语句替换：<br/><br/>select num from a where exists(select 1 from b where num=a.num)<br/><br/><br/><br/>14.并不是所有索引对查询都有效，SQL是根据表中数据来进行查询优化的，当索引列有大量数据重复时，SQL查询可能不会去利用索引，如一表中有字段sex，male、female几乎各一半，那么即使在sex上建了索引也对查询效率起不了作用。<br/><br/><br/><br/>15. 索引并不是越多越好，索引固然可 以提高相应的 select 的效率，但同时也降低了 insert 及 update 的效率，因为 insert 或 update 时有可能会重建索引，所以怎样建索引需要慎重考虑，视具体情况而定。一个表的索引数最好不要超过6个，若太多则应考虑一些不常使用到的列上建的索引是否有 必要。<br/><br/><br/><br/>16. 应尽可能的避免更新 clustered 索引数据列，因为 clustered 索引数据列的顺序就是表记录的物理存储顺序，一旦该列值改变将导致整个表记录的顺序的调整，会耗费相当大的资源。若应用系统需要频繁更新 clustered 索引数据列，那么需要考虑是否应将该索引建为 clustered 索引。<br/><br/><br/><br/>17.尽量使用数字型字段，若只含数值信息的字段尽量不要设计为字符型，这会降低查询和连接的性能，并会增加存储开销。这是因为引擎在处理查询和连接时会逐个比较字符串中每一个字符，而对于数字型而言只需要比较一次就够了。<br/><br/><br/><br/>18.尽可能的使用 varchar/nvarchar 代替 char/nchar ，因为首先变长字段存储空间小，可以节省存储空间，其次对于查询来说，在一个相对较小的字段内搜索效率显然要高些。<br/><br/><br/><br/>19.任何地方都不要使用 select * from t ，用具体的字段列表代替“*”，不要返回用不到的任何字段。<br/><br/><br/><br/>20.尽量使用表变量来代替临时表。如果表变量包含大量数据，请注意索引非常有限（只有主键索引）。<br/><br/><br/><br/>21.避免频繁创建和删除临时表，以减少系统表资源的消耗。<br/><br/><br/><br/>22.临时表并不是不可使用，适当地使用它们可以使某些例程更有效，例如，当需要重复引用大型表或常用表中的某个数据集时。但是，对于一次性事件，最好使用导出表。<br/><br/><br/><br/>23.在新建临时表时，如果一次性插入数据量很大，那么可以使用 select into 代替 create table，避免造成大量 log ，以提高速度；如果数据量不大，为了缓和系统表的资源，应先create table，然后insert。<br/><br/><br/><br/>24.如果使用到了临时表，在存储过程的最后务必将所有的临时表显式删除，先 truncate table ，然后 drop table ，这样可以避免系统表的较长时间锁定。<br/><br/><br/><br/>25.尽量避免使用游标，因为游标的效率较差，如果游标操作的数据超过1万行，那么就应该考虑改写。<br/><br/><br/><br/>26.使用基于游标的方法或临时表方法之前，应先寻找基于集的解决方案来解决问题，基于集的方法通常更有效。<br/><br/><br/><br/>27. 与临时表一样，游标并不是不可使 用。对小型数据集使用 FAST_FORWARD 游标通常要优于其他逐行处理方法，尤其是在必须引用几个表才能获得所需的数据时。在结果集中包括“合计”的例程通常要比使用游标执行的速度快。如果开发时 间允许，基于游标的方法和基于集的方法都可以尝试一下，看哪一种方法的效果更好。<br/><br/><br/><br/>28.在所有的存储过程和触发器的开始处设置 SET NOCOUNT ON ，在结束时设置 SET NOCOUNT OFF 。无需在执行存储过程和触发器的每个语句后向客户端发送DONE_IN_PROC 消息。<br/><br/><br/><br/>29.尽量避免大事务操作，提高系统并发能力。<br/><br/><br/><br/>30.尽量避免向客户端返回大数据量，若数据量过大，应该考虑相应需求是否合理</span>
</div>
<hr>
<a name="586"/>

<div>
<span><a href="Evernote_files/消息中间件对比分析.pdf"><img src="Evernote_files/7158a874d89b7c40ddbdc2a3fac83b9d.png" alt="消息中间件对比分析.pdf"></a>
</span>
</div>
<hr>
<a name="589"/>

<div>
<span><a href="Evernote_files/zookeeper分布式锁.pdf"><img src="Evernote_files/937263b87be54a896e9f41f925361ca0.png" alt="zookeeper分布式锁.pdf"></a>
</span>
</div>
<hr>
<a name="591"/>

<div>
<span><a href="Evernote_files/vsftpd使用笔记.pdf"><img src="Evernote_files/0238f3c275fb6d08b0506dcb7014f406.png" alt="vsftpd使用笔记.pdf"></a>
</span>
</div>
<hr>
<a name="593"/>

<div>
<span><a href="Evernote_files/1-MongoDb集群搭建_Master-Slave.pdf"><img src="Evernote_files/4e4ef2b00b4c2f69fec6a4b73b70e327.png" alt="1-MongoDb集群搭建_Master-Slave.pdf"></a>
</span>
</div>
<hr>
<a name="595"/>

<div>
<span><a href="Evernote_files/SVN分支操作图.pdf"><img src="Evernote_files/161ff8ab8f420f696548d3c725c72a43.png" alt="SVN分支操作图.pdf"></a></span>
</div>
<hr>
<a name="606"/>

<div>
<span><a href="Evernote_files/PackingImageTest.java"><img src="Evernote_files/cf6c2ef5ff756c0d1a255a4effbe6fe9.png" alt="PackingImageTest.java"></a>
</span>
</div>
<hr>
<a name="609"/>

<div>
<span><a href="Evernote_files/pdflm15.dll"><img src="Evernote_files/27db9ff1635a35454fc8954ffbe9390f.png" alt="pdflm15.dll"></a></span>
</div>
<hr>
<a name="612"/>

<div>
<span><a href="Evernote_files/FreeMarker_Manual_zh_CN.pdf"><img src="Evernote_files/cd72decaeda9fd6bdf23b0cfa6d691f6.png" alt="FreeMarker_Manual_zh_CN.pdf"></a></span>
</div>
<hr>
<a name="617"/>

<div>
<span><a href="Evernote_files/freemarker.jar"><img src="Evernote_files/014261aefa8ad4b17b6a17be6bc6383a.png" alt="freemarker.jar"></a></span>
</div>
<hr>
<a name="622"/>

<div>
<span><div>                                                               <b>mysql sql优化之straight_join</b></div><div>          在oracle中可以指定的表连接的hint有很多：ordered hint 指示oracle按照from关键字后的表顺序来进行连接；leading hint 指示查询优化器使用指定的表作为连接的首表，即驱动表；</div><div>use_nl hint指示查询优化器使用nested loops方式连接指定表和其他行源，并且将强制指定表作为inner表。在mysql中就有之对应的straight_join,由于mysql只支持nested loops的连接方式，所以这里的straight_join类似oracle中的use_nl hint。mysql优化器在处理多表的关联的时候，很有可能会选择错误的驱动表进行关联，导致了关联次数的增加，从而使得sql语句执行变得非常的缓慢，这个时候需要有经验的DBA进行判断，选择正确的驱动表，这个时候straight_join就起了作用了，下面我们来看一看使用straight_join进行优化的案例：</div><div>              1．用户实例：spxxxxxx的一条sql执行非常的缓慢，sql如下：</div><div>73871 | root            | 127.0.0.1:49665     | user_app_test   | Query       |     500 | Sorting result           |</div><div>    SELECT DATE(practicetime) date_time,COUNT(DISTINCT a.userid) people_rows</div><div>                            FROM  test_log a,USER b</div><div>        WHERE a.userid=b.userid AND b.isfree=0 AND LENGTH(b.username)&gt;4</div><div>                          GROUP BY DATE(practicetime)</div><div>                                2.查看执行计划：</div><div>mysql&gt; explain  SELECT DATE(practicetime) date_time,COUNT(DISTINCT a.userid) people_rows</div><div>                            FROM  test_log a,USER b</div><div>        WHERE a.userid=b.useri d AND b.isfree=0 AND LENGTH(b.username)&gt;4</div><div>                          GROUP BY DATE(practicetime);</div><div>mysql&gt; explain SELECT DATE(practicetime) date_time,COUNT(DISTINCT a.userid) people_rows</div><div>                           -&gt; FROM test_log a,USER b</div><div>       -&gt; WHERE a.userid=b.userid AND b.isfree=0 AND LENGTH(b.username)&gt;4</div><div>                       -&gt; GROUP BY DATE(practicetime)\G;</div><div>         *************************** 1. row ***************************</div><div>                                     id: 1</div><div>                              select_type: SIMPLE</div><div>                                    table: a</div><div>                                   type: ALL</div><div>                       possible_keys: ix_test_log_userid</div><div>                                   key: NULL</div><div>                                 key_len: NULL</div><div>                                   ref: NULL</div><div>                                  rows: 416782</div><div>                             Extra: Using filesort</div><div>         *************************** 2. row ***************************</div><div>                                     id: 1</div><div>                              select_type: SIMPLE</div><div>                                    table: b</div><div>                                  type: eq_ref</div><div>                             possible_keys: PRIMARY</div><div>                                  key: PRIMARY</div><div>                                  key_len: 96</div><div>                         ref: user_app_testnew.a.userid</div><div>                                    rows: 1</div><div>                               Extra: Using where</div><div>                            2 rows in set (0.00 sec)</div><div><br/></div><div>                                  3.查看索引：</div><div>                        mysql&gt; show index from test_log;</div><div>              +————–+————+————————-+————–+————-+———–+————-+———-++</div><div>| Table        | Non_unique | Key_name                | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |</div><div>              +————–+————+————————-+————–+————-+———–+————-+———-++</div><div>| test_log |          0 | ix_test_log_unique_ |            1 | unitid      | A         |          20 |     NULL | NULL   |      | BTREE      |         |</div><div>| test_log |          0 | ix_test_log_unique_ |            2 | paperid     | A         |          20 |     NULL | NULL   |      | BTREE      |         |</div><div>| test_log |          0 | ix_test_log_unique_ |            3 | qtid        | A         |          20 |     NULL | NULL   |      | BTREE      |         |</div><div>| test_log |          0 | ix_test_log_unique_ |            4 | userid      | A         |      400670 |     NULL | NULL   |      | BTREE      |         |</div><div>| test_log |          0 | ix_test_log_unique_ |            5 | serial      | A         |      400670 |     NULL | NULL   |      | BTREE      |         |</div><div>| test_log |          1 | ix_test_log_unit    |            1 | unitid      | A         |         519 |     NULL | NULL   |      | BTREE      |         |</div><div>| test_log |          1 | ix_test_log_unit    |            2 | paperid     | A         |        2023 |     NULL | NULL   |      | BTREE      |         |</div><div>| test_log |          1 | ix_test_log_unit    |            3 | qtid        | A         |       16694 |     NULL | NULL   |      | BTREE      |         |</div><div>| test_log |          1 | ix_test_log_serial  |            1 | serial      | A         |      133556 |     NULL | NULL   |      | BTREE      |         |</div><div>| test_log |          1 | ix_test_log_userid  |            1 | userid      | A         |        5892 |     NULL | NULL   |      | BTREE      |         |</div><div>         +————–+————+————————-+————–+————-+———–+————-+———-+——–+——+——-+</div><div><br/></div><div>                        4.调整索引，A表优化采用覆盖索引：</div><div>mysql&gt;alter table test_log drop index ix_test_log_userid,add index ix_test_log_userid(userid,practicetime)</div><div><br/></div><div>                                5.查看执行计划：</div><div>mysql&gt; explain  SELECT DATE(practicetime) date_time,COUNT(DISTINCT a.userid) people_rows</div><div>                            FROM  test_log a,USER b</div><div>        WHERE a.userid=b.userid AND b.isfree=0 AND LENGTH(b.username)&gt;4</div><div>                         GROUP BY DATE(practicetime)\G</div><div>         *************************** 1. row ***************************</div><div>                                     id: 1</div><div>                              select_type: SIMPLE</div><div>                                    table: a</div><div>                                  type: index</div><div>                       possible_keys: ix_test_log_userid</div><div>                            key: ix_test_log_userid</div><div>                                  key_len: 105</div><div>                                   ref: NULL</div><div>                                  rows: 388451</div><div>                       Extra: Using index; Using filesort</div><div>         *************************** 2. row ***************************</div><div>                                     id: 1</div><div>                              select_type: SIMPLE</div><div>                                    table: b</div><div>                                  type: eq_ref</div><div>                             possible_keys: PRIMARY</div><div>                                  key: PRIMARY</div><div>                                  key_len: 96</div><div>                          ref: user_app_test.a.userid</div><div>                                    rows: 1</div><div>                               Extra: Using where</div><div>                            2 rows in set (0.00 sec)</div><div><br/></div><div>                调整后执行稍有效果，但是还不明显，还没有找到要害：</div><div>    SELECT DATE(practicetime) date_time,COUNT(DISTINCT a.userid) people_rows</div><div>                            FROM  test_log a,USER b</div><div>        WHERE a.userid=b.userid AND b.isfree=0 AND LENGTH(b.username)&gt;4</div><div>                          GROUP BY DATE(practicetime);</div><div>                                    ……………….</div><div>                       143 rows in set (1 min 12.62 sec)</div><div><br/></div><div>6.执行时间仍然需要很长，时间的消耗主要耗费在Using filesort中，参与排序的数据量有38W之多，所以需要转换驱动表；尝试采用user表做驱动表：使用straight_join强制连接顺序：</div><div>mysql&gt; explain  SELECT DATE(practicetime) date_time,COUNT(DISTINCT a.userid) people_rows</div><div>                     FROM  USER b straight_join test_log a</div><div>        WHERE a.userid=b.userid AND b.isfree=0 AND LENGTH(b.username)&gt;4</div><div>                         GROUP BY DATE(practicetime)\G;</div><div>         *************************** 1. row ***************************</div><div>                                     id: 1</div><div>                              select_type: SIMPLE</div><div>                                    table: b</div><div>                                   type: ALL</div><div>                             possible_keys: PRIMARY</div><div>                                   key: NULL</div><div>                                 key_len: NULL</div><div>                                   ref: NULL</div><div>                                  rows: 42806</div><div>              Extra: Using where; Using temporary; Using filesort</div><div>         *************************** 2. row ***************************</div><div>                                     id: 1</div><div>                              select_type: SIMPLE</div><div>                                    table: a</div><div>                                   type: ref</div><div>                       possible_keys: ix_test_log_userid</div><div>                            key: ix_test_log_userid</div><div>                                  key_len: 96</div><div>                          ref: user_app_test.b.userid</div><div>                                    rows: 38</div><div>                               Extra: Using index</div><div>                            2 rows in set (0.00 sec)</div><div>                    执行时间已经有了质的变化，降低到了2.56秒；</div><div>mysql&gt;SELECT DATE(practicetime) date_time,COUNT(DISTINCT a.userid) people_rows</div><div>                     FROM  USER b straight_join test_log a</div><div>        WHERE a.userid=b.userid AND b.isfree=0 AND LENGTH(b.username)&gt;4</div><div>                          GROUP BY DATE(practicetime);</div><div>                                      ……..</div><div>                           143 rows in set (2.56 sec)</div><div><br/></div><div>7.在分析执行计划的第一步：Using where; Using temporary; Using filesort，user表其实也可以采用覆盖索引来避免using where的出现，所以继续调整索引：</div><div>                          mysql&gt; show index from user;</div><div>         +——-+————+——————+————–+————-+———–+————-+———-+——–+——+————+———+</div><div>| Table | Non_unique | Key_name         | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |</div><div>         +——-+————+——————+————–+————-+———–+————-+———-+——–+——+————+———+</div><div>| user  |          0 | PRIMARY          |            1 | userid      | A         |       43412 |     NULL | NULL   |      | BTREE      |         |</div><div>| user  |          0 | ix_user_email    |            1 | email       | A         |       43412 |     NULL | NULL   |      | BTREE      |         |</div><div>| user  |          1 | ix_user_username |            1 | username    | A         |         202 |     NULL | NULL   |      | BTREE      |         |</div><div>         +——-+————+——————+————–+————-+———–+————-+———-+——–+——+————+———+</div><div>                            3 rows in set (0.01 sec)</div><div><br/></div><div>mysql&gt;alter table user drop index ix_user_username,add index ix_user_username(username,isfree);</div><div>                    Query OK, 42722 rows affected (0.73 sec)</div><div>                   Records: 42722  Duplicates: 0  Warnings: 0</div><div><br/></div><div>mysql&gt;explain SELECT DATE(practicetime) date_time,COUNT(DISTINCT a.userid) people_rows</div><div>                     FROM  USER b straight_join test_log a</div><div>        WHERE a.userid=b.userid AND b.isfree=0 AND LENGTH(b.username)&gt;4</div><div>                          GROUP BY DATE(practicetime);</div><div>         *************************** 1. row ***************************</div><div>                                     id: 1</div><div>                              select_type: SIMPLE</div><div>                                    table: b</div><div>                                  type: index</div><div>                             possible_keys: PRIMARY</div><div>                             key: ix_user_username</div><div>                                  key_len: 125</div><div>                                   ref: NULL</div><div>                                  rows: 42466</div><div>        Extra: Using where; Using index; Using temporary; Using filesort</div><div>         *************************** 2. row ***************************</div><div>                                     id: 1</div><div>                              select_type: SIMPLE</div><div>                                    table: a</div><div>                                   type: ref</div><div>                       possible_keys: ix_test_log_userid</div><div>                            key: ix_test_log_userid</div><div>                                  key_len: 96</div><div>                          ref: user_app_test.b.userid</div><div>                                    rows: 38</div><div>                               Extra: Using index</div><div>                            2 rows in set (0.00 sec)</div><div><br/></div><div>                           8.执行时间降低到了1.43秒：</div><div>mysql&gt;SELECT DATE(practicetime) date_time,COUNT(DISTINCT a.userid) people_rows</div><div>                     FROM  USER b straight_join test_log a</div><div>        WHERE a.userid=b.userid AND b.isfree=0 AND LENGTH(b.username)&gt;4</div><div>                          GROUP BY DATE(practicetime);</div><div>                                 。。。。。。。</div></span>
</div>
<hr>
<a name="624"/>

<div>
<span><div>[慢查优化]联表查询注意谁是驱动表 &amp; 你搞不清楚谁join谁更好时请放手让mysql自行判定</div><div>写在前面的话：</div><div><br/></div><div>   不要求每个人一定理解 联表查询(join/left join/inner join等)时的mysql运算过程；</div><div><br/></div><div>   不要求每个人一定知道线上（现在或未来）哪张表数据量大，哪张表数据量小；</div><div><br/></div><div>    但把mysql客户端（如SQLyog，如HeidiSQL）放在桌面上，时不时拿出来 explain 一把，这是一种美德！</div><div><br/></div><div>在实例讲解之前，我们先回顾一下联表查询的基础知识。</div><div>——联表查询的基础知识——</div><div><br/></div><div>引子：为什么第一个查询using temporary，第二个查询不用临时表呢？</div><div><br/></div><div>下面两个查询，它们只差了一个order by，效果却迥然不同。</div><div><br/></div><div>第一个查询：</div><div><br/></div><div>EXPLAIN extended</div><div><br/></div><div>SELECT ads.id</div><div><br/></div><div>FROM ads, city</div><div><br/></div><div>WHERE</div><div><br/></div><div>   city.city_id = 8005</div><div><br/></div><div>   AND ads.status = 'online'</div><div><br/></div><div>   AND city.ads_id=ads.id</div><div><br/></div><div>ORDER BY ads.id desc</div><div><br/></div><div>执行计划为：</div><div><br/></div><div>    id  select_type  table   type    possible_keys   key      key_len  ref                     rows  filtered  Extra                         </div><div>------  -----------  ------  ------  --------------  -------  -------  --------------------  ------  --------  -------------------------------</div><div>     1  SIMPLE       city    ref     ads_id,city_id  city_id  4        const                   2838    100.00  Using temporary; Using filesort</div><div>     1  SIMPLE       ads     eq_ref  PRIMARY         PRIMARY  4        city.ads_id       1    100.00  Using where                   </div><div><br/></div><div>第二个查询：</div><div><br/></div><div>EXPLAIN extended</div><div><br/></div><div>SELECT ads.id</div><div><br/></div><div>FROM ads,city</div><div><br/></div><div>WHERE</div><div><br/></div><div>   city.city_id =8005</div><div><br/></div><div>   AND ads.status = 'online'</div><div><br/></div><div>   AND city.ads_id=ads.id</div><div><br/></div><div>ORDER BY city.ads_id desc</div><div><br/></div><div>执行计划里没有了using temporary：</div><div>    id  select_type  table   type    possible_keys   key      key_len  ref                     rows  filtered  Extra                     </div><div>------  -----------  ------  ------  --------------  -------  -------  --------------------  ------  --------  ---------------------------</div><div>     1  SIMPLE       city    ref     ads_id,city_id  city_id  4        const                   2838    100.00  Using where; Using filesort</div><div>     1  SIMPLE       ads    eq_ref  PRIMARY         PRIMARY  4        city.ads_id       1    100.00  Using where               </div><div>为什么？</div><div><br/></div><div>DBA告诉我们：</div><div>    MySQL 表关联的算法是 Nest Loop Join，是通过驱动表的结果集作为循环基础数据，然后一条一条地通过该结果集中的数据作为过滤条件到下一个表中查询数据，然后合并结果。</div><div><br/></div><div>EXPLAIN 结果中，第一行出现的表就是驱动表（Important!）</div><div><br/></div><div>以上两个查询语句，驱动表都是 city，如上面的执行计划所示！</div><div><br/></div><div>对驱动表可以直接排序，对非驱动表（的字段排序）需要对循环查询的合并结果（临时表）进行排序（Important!）</div><div>因此，order by ads.id desc 时，就要先 using temporary 了！</div><div><br/></div><div>驱动表的定义</div><div>wwh999 在 2006年总结说，当进行多表连接查询时， [驱动表] 的定义为：</div><div>1）指定了联接条件时，满足查询条件的记录行数少的表为[驱动表]；</div><div>2）未指定联接条件时，行数少的表为[驱动表]（Important!）。</div><div><br/></div><div>忠告：如果你搞不清楚该让谁做驱动表、谁 join 谁，请让 MySQL 运行时自行判断</div><div>既然“未指定联接条件时，行数少的表为[驱动表]”了，</div><div>而且你也对自己写出的复杂的 Nested Loop Join 不太有把握（如下面的实例所示），</div><div>就别指定谁 left/right join 谁了，</div><div>请交给 MySQL优化器 运行时决定吧。</div><div>如果您对自己特别有信心，可以像火丁一样做优化。</div><div><br/></div><div>小结果集驱动大结果集</div><div>de.cel 在2012年总结说，不管是你，还是 MySQL，</div><div>优化的目标是尽可能减少JOIN中Nested Loop的循环次数，</div><div>以此保证：</div><div>永远用小结果集驱动大结果集（Important!）！</div><div>——实例讲解——</div><div><br/></div><div>Nested Loop Join慢查SQL语句</div><div>先了解一下 mb 表有 千万级记录，mbei 表要少得多。慢查实例如下：</div><div>explain</div><div>SELECT mb.id, ……</div><div>FROMmb LEFT JOIN mbei ON mb.id=mbei.mb_id INNER JOINu ON mb.uid=u.uid </div><div>WHERE 1=1 </div><div>ORDER BY mbei.apply_time DESC</div><div>limit 0,10</div><div>够复杂吧。Nested Loop Join 就是这样，</div><div>以驱动表的结果集作为循环的基础数据，然后将结果集中的数据作为过滤条件一条条地到下一个表中查询数据，最后合并结果；此时还有第三个表，则将前两个表的 Join 结果集作为循环基础数据，再一次通过循环查询条件到第三个表中查询数据，如此反复。</div><div>这条语句的执行计划如下：</div><div>    id  select_type  table   type    possible_keys   key             key_len  ref                     rows  Extra                                       </div><div>------  -----------  ------  ------  --------------  --------------  -------  -------------------  -------  --------------------------------------------</div><div>     1  SIMPLE       mb      index   userid          userid          4        (NULL)               6060455  Using index; Using temporary; Using filesort</div><div>     1  SIMPLE       mbei    eq_ref  mb_id  mb_id  4        mb.id             1                                             </div><div>     1  SIMPLE       u       eq_ref  PRIMARY         PRIMARY         4        mb.uid        1  Using index                               </div><div>由于动用了“LEFT JOIN”，所以攻城狮已经指定了驱动表，虽然这张驱动表的结果集记录数达到百万级！</div><div>.</div><div>.</div><div>如何优化？</div><div>.</div><div>.</div><div>优化第一步：LEFT JOIN改为JOIN</div><div>干嘛要 left join 啊？直接 join！</div><div>explain</div><div>SELECT mb.id……</div><div>FROM mb JOIN mbei ON mb.id=mbei.mb_id INNER JOINu ON mb.uid=u.uid </div><div>WHERE 1=1 </div><div>ORDER BY mbei.apply_time DESC</div><div>limit 0,10</div><div>立竿见影，驱动表立刻变为小表 mbei 了， Using temporary 消失了，影响行数少多了：</div><div>    id  select_type  table   type    possible_keys   key      key_len  ref                             rows  Extra         </div><div>------  -----------  ------  ------  --------------  -------  -------  ----------------------------  ------  --------------</div><div>     1  SIMPLE       mbei    ALL     mb_id  (NULL)   (NULL)   (NULL)                         13383  Using filesort</div><div>     1  SIMPLE       mb      eq_ref  PRIMARY,userid  PRIMARY  4        mbei.mb_id       1               </div><div>     1  SIMPLE       u       eq_ref  PRIMARY         PRIMARY  4        mb.uid                1  Using index </div><div><br/></div><div>优化第一步之分支1：根据驱动表的字段排序，好吗？</div><div>left join不变。干嘛要根据非驱动表的字段排序呢？我们前面说过“对驱动表可以直接排序，对非驱动表（的字段排序）需要对循环查询的合并结果（临时表）进行排序！”的。</div><div>explain</div><div>SELECT mb.id……</div><div>FROM mb LEFT JOIN mbei ON mb.id=mbei.mb_id INNER JOINu ON mb.uid=u.uid </div><div>WHERE 1=1 </div><div>ORDER BY mb.id DESC</div><div>limit 0,10</div><div>也满足业务场景，做到了rows最小：</div><div>    id  select_type  table   type    possible_keys   key             key_len  ref                    rows  Extra     </div><div>------  -----------  ------  ------  --------------  --------------  -------  -------------------  ------  -----------</div><div>     1  SIMPLE       mb      index   userid          PRIMARY         4        (NULL)                   10             </div><div>     1  SIMPLE       mbei    eq_ref  mb_id  mb_id  4        mb.id            1  Using index</div><div>     1  SIMPLE       u       eq_ref  PRIMARY         PRIMARY         4        mb.uid       1  Using index</div><div><br/></div><div><br/></div><div>优化第二步：去除所有JOIN，让MySQL自行决定！</div><div>写这么多密密麻麻的 left join/inner join 很开心吗？</div><div>explain</div><div>SELECT mb.id……</div><div>FROM mb,mbei,u   </div><div>WHERE</div><div>    mb.id=mbei.mb_id</div><div>    and mb.uid=u.user_id</div><div>order by mbei.apply_time desc</div><div>limit 0,10</div><div>立竿见影，驱动表一样是小表 mbei：</div><div>    id  select_type  table   type    possible_keys   key      key_len  ref                             rows  Extra         </div><div>------  -----------  ------  ------  --------------  -------  -------  ----------------------------  ------  --------------</div><div>     1  SIMPLE       mbei    ALL     mb_id  (NULL)   (NULL)   (NULL)                         13388  Using filesort</div><div>     1  SIMPLE       mb      eq_ref  PRIMARY,userid  PRIMARY  4        mbei.mb_id       1               </div><div>     1  SIMPLE       u       eq_ref  PRIMARY         PRIMARY  4        mb.uid                1  Using index </div><div><br/></div><div>最后的总结：</div><div>强调再强调：</div><div>不要过于相信你的运气！</div><div>不要相信你的开发环境里SQL的执行速度！</div><div>请拿起 explain 武器，</div><div>如果你看到以下现象，请优化：</div><div>出现了Using temporary；</div><div>rows过多，或者几乎是全表的记录数；</div><div>key 是 (NULL)；</div><div>possible_keys 出现过多（待选）索引。</div><div><br/></div><div>记住，explain 是一种美德！</div></span>
</div>
<hr>
<a name="626"/>

<div>
<span><div>Spring的@Transactional事务无法处理thread线程的解决方案</div><div>  问题描述：</div><div>  在Spring的web项目中，查询了多行数据，对这些数据遍历处理，并对每一条数据采取线程的方式去执行，方式如下：</div><div>  new Thread(new Runnable() {</div><div>　　@Override</div><div>　　public void run() {</div><div>   　　try {</div><div>      　　processEachPlan(learn); // 处理逐条数据</div><div>   　　} catch (Exception e) {</div><div>      　　Logger.info(&quot;异常信息：&quot; + e.toString());</div><div>   　　}</div><div>　　}</div><div>   }).start();</div><div>   问题在于run(){}方法中的processEachPlan(learn)不受声明式事务管理了，但是我的需求是让每一个processEachPlan(learn)都在各自的事务中管理，这样能够     保证逐条处理的数据的完整性。</div><div>   解决方案：手动控制事物</div><div>   new Thread(new Runnable() {</div><div>　　@Override</div><div>　　public void run() {</div><div>　　　　// spring无法处理thread的事务，声明式事务无效</div><div>　　　　DefaultTransactionDefinition def = new DefaultTransactionDefinition();</div><div>   　　def.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRED);</div><div>   　　PlatformTransactionManager txManager = ContextLoader.getCurrentWebApplicationContext().getBean(PlatformTransactionManager.class);</div><div>   　　TransactionStatus status = txManager.getTransaction(def);</div><div><br/></div><div>   　　try {</div><div>      　　processEachPlan(learn);</div><div>      　　txManager.commit(status); // 提交事务</div><div>   　　} catch (Exception e) {</div><div>      　　Logger.info(&quot;异常信息：&quot; + e.toString());</div><div>      　　txManager.rollback(status); // 回滚事务</div><div>    　 }</div><div>　　}</div><div>    }).start();</div></span>
</div>
<hr>
<a name="635"/>

<div>
<span>
&lt;Context debug=&quot;0&quot; docBase=&quot;/datas/www.iqcedu.com.80&quot; path=&quot;/IQCloud&quot; reloadable=&quot;true&quot;/&gt;
</span>
</div>
<hr>
<a name="640"/>

<div>
<span><div>这节重点是讲Solr的查询相关的知识点</div><div><br/></div><div>一、 查询参数说明</div><div><br/></div><div>在做solr查询的时候，solr提供了很多参数来扩展它自身的强大功能！以下是使用频率最高的一些参数！</div><div><br/></div><div>1、常用</div><div>q - 查询字符串，这个是必须的。如果查询所有*:* ，根据指定字段查询（Name:张三 AND Address:北京）</div><div>fq - （filter query）过虑查询，作用：在q查询符合结果中同时是fq查询符合的，例如：q=Name:张三&amp;fq=CreateDate:[20081001 TO 20091031],找关键字mm，并且CreateDate是20081001</div><div>fl - 指定返回那些字段内容，用逗号或空格分隔多个。</div><div>start - 返回第一条记录在完整找到结果中的偏移位置，0开始，一般分页用。</div><div>rows - 指定返回结果最多有多少条记录，配合start来实现分页。</div><div>sort - 排序，格式：sort=&lt;field name&gt;+&lt;desc|asc&gt;[,&lt;field name&gt;+&lt;desc|asc&gt;]… 。示例：（score desc, price asc）表示先 “score” 降序, 再 “price” 升序，默认是相关性降序。</div><div>wt - (writer type)指定输出格式，可以有 xml, json, php, phps。</div><div>fl表示索引显示那些field( *表示所有field,如果想查询指定字段用逗号或空格隔开（如：Name,SKU,ShortDescription或Name SKU ShortDescription【注：字段是严格区分大小写的】）)</div><div>q.op 表示q 中 查询语句的 各条件的逻辑操作 AND(与) OR(或)</div><div>hl 是否高亮 ,如hl=true</div><div>hl.fl 高亮field ,hl.fl=Name,SKU</div><div>hl.snippets :默认是1,这里设置为3个片段</div><div>hl.simple.pre 高亮前面的格式</div><div>hl.simple.post 高亮后面的格式</div><div>facet 是否启动统计</div><div>facet.field  统计field</div><div>【注：以上是比较常用的参数，当然具体的参数使用还是多看Solr官方的技术文档以及一些大神的博文日志，这里只是抛砖引玉】</div><div><br/></div><div>二、 Solr运算符</div><div>1. “:” 指定字段查指定值，如返回所有值*:*</div><div>2. “?” 表示单个任意字符的通配</div><div>3. “*” 表示多个任意字符的通配（不能在检索的项开始使用*或者?符号）</div><div>4. “~” 表示模糊检索，如检索拼写类似于”roam”的项这样写：roam~将找到形如foam和roams的单词；roam~0.8，检索返回相似度在0.8以上的记录。</div><div>5. 邻近检索，如检索相隔10个单词的”apache”和”jakarta”，”jakarta apache”~10</div><div>6. “^” 控制相关度检索，如检索jakarta apache，同时希望去让”jakarta”的相关度更加好，那么在其后加上”^”符号和增量值，即jakarta^4 apache</div><div>7. 布尔操作符AND、||</div><div>8. 布尔操作符OR、&amp;&amp;</div><div>9. 布尔操作符NOT、!、- （排除操作符不能单独与项使用构成查询）</div><div>10. “+” 存在操作符，要求符号”+”后的项必须在文档相应的域中存在</div><div>11. ( ) 用于构成子查询</div><div>12. [] 包含范围检索，如检索某时间段记录，包含头尾，date:[200707 TO 200710]</div><div>13. {} 不包含范围检索，如检索某时间段记录，不包含头尾</div><div>date:{200707 TO 200710}</div><div>14. / 转义操作符，特殊字符包括+ - &amp;&amp; || ! ( ) { } [ ] ^ ” ~ * ? : /</div><div><br/></div><div> 注：①“+”和”-“表示对单个查询单元的修饰，and 、or 、 not 是对两个查询单元是否做交集或者做差集还是取反的操作的符号</div><div>　　 比如:AB:china +AB:america ,表示的是AB:china忽略不计可有可无，必须满足第二个条件才是对的,而不是你所认为的必须满足这两个搜索条件</div><div>　　 如果输入:AB:china AND AB:america ,解析出来的结果是两个条件同时满足，即+AB:china AND +AB:america或+AB:china +AB:america</div><div>　　总而言之，查询语法：  修饰符 字段名:查询关键词 AND/OR/NOT 修饰符 字段名:查询关键词</div><div>三、 Solr查询语法</div><div>1.最普通的查询，比如查询姓张的人（ Name:张）,如果是精准性搜索相当于SQL SERVER中的LIKE搜索这需要带引号（&quot;&quot;）,比如查询含有北京的（Address:&quot;北京&quot;）</div><div>2.多条件查询，注：如果是针对单个字段进行搜索的可以用（Name:搜索条件加运算符(OR、AND、NOT) Name：搜索条件）,比如模糊查询（ Name:张 OR Name:李 ）单个字段多条件搜索不建议这样写，一般建议是在单个字段里进行条件筛选，如（ Name:张 OR 李），多个字段查询（Name:张 + Address:北京 ）</div><div>3.排序，比如根据姓名升序（Name asc）,降序（Name desc）</div><div><br/></div><div> 未完待续。。</div></span>
</div>
<hr>
<a name="645"/>

<div>
<span><div>MySQL清除表空间碎片</div><div><br/></div><div>摘要：清除碎片操作会暂时锁表，数据量越大，耗费的时间越长，可以做个脚本，定期在访问低谷时间执行，例如每周三凌晨，检查DATA_FREE字段，大于自己认为的警戒值的话，就清理一次。</div><div>碎片产生的原因</div><div>（1）表的存储会出现碎片化，每当删除了一行内容，该段空间就会变为空白、被留空，而在一段时间内的大量删除操作，会使这种留空的空间变得比存储列表内容所使用的空间更大；</div><div>（2）当执行插入操作时，MySQL会尝试使用空白空间，但如果某个空白空间一直没有被大小合适的数据占用，仍然无法将其彻底占用，就形成了碎片；</div><div>（3）当MySQL对数据进行扫描时，它扫描的对象实际是列表的容量需求上限，也就是数据被写入的区域中处于峰值位置的部分；</div><div><br/></div><div>例如：</div><div>一个表有1万行，每行10字节，会占用10万字节存储空间，执行删除操作，只留一行，实际内容只剩下10字节，但MySQL在读取时，仍看做是10万字节的表进行处理，所以，碎片越多，就会越来越影响查询性能。</div><div><br/></div><div>查看表碎片大小</div><div>（1）查看某个表的碎片大小</div><div>mysql&gt; SHOW TABLE STATUS LIKE '表名';</div><div>结果中’Data_free’列的值就是碎片大小</div><div><br/></div><div>（2）列出所有已经产生碎片的表</div><div>mysql&gt; select table_schema db, table_name, data_free, engine from information_schema.tables where table_schema not in ('information_schema', 'mysql')  and data_free &gt; 0;</div><div><br/></div><div>清除表碎片</div><div>（1）MyISAM表</div><div>mysql&gt; optimize table 表名</div><div>（2）InnoDB表</div><div>mysql&gt; alter table 表名 engine=InnoDB</div><div><br/></div><div>Engine不同,OPTIMIZE 的操作也不一样的,MyISAM 因为索引和数据是分开的,所以 OPTIMIZE 可以整理数据文件,并重排索引.</div><div><br/></div><div>OPTIMIZE 操作会暂时锁住表,而且数据量越大,耗费的时间也越长,它毕竟不是简单查询操作.所以把 Optimize 命令放在程序中是不妥当的,不管设置的命中率多低,当访问量增大的时候,整体命中率也会上升,这样肯定会对程序的运行效率造成很大影响.比较好的方式就是做个shell,定期检查mysql中 information_schema.TABLES字段,查看 DATA_FREE 字段,大于0话,就表示有碎片</div><div><br/></div><div>建议：清除碎片操作会暂时锁表，数据量越大，耗费的时间越长，可以做个脚本，定期在访问低谷时间执行，例如每周三凌晨，检查DATA_FREE字段，大于自己认为的警戒值的话，就清理一次。</div><div><br/></div></span>
</div>
<hr>
<a name="747"/>

<div>
<span><div>  java异常Throwable和Sping事务控制的异常回滚</div><div>标签： aopSpring事务控制异常回滚</div><div>2017-05-15 19:34 459人阅读 评论(0) 收藏 举报</div><div> 分类： Spring事务管理（1）   SSH（3）   Spring（4）   Java开发（37） </div><div>版权声明：本文为博主原创文章，未经博主允许不得转载。</div><div>java异常Throwable和Sping事务控制的异常回滚</div><div><br/></div><div>    今天的讨论以一个项目中的实际问题入手：在后台管理系统中，对敏感数据的操作，</div><div>都需要记录审计日志。我们以修改为例，这个过程可以分解为2步操作，对某个数据的修</div><div>改和插入日志。并且这2个操作具有原子性，要么都执行，要么都不执行。</div><div><br/></div><div>    很显然，这里需要进行事务控制。在当前流行的Sping框架中，我们使用Spring的</div><div>AOP进行事务控制。我们只需要配置Spring事务，然后程序运行期间，一旦我们调用了指</div><div>定的方法，Spring就会自动拦截改方法，然后在该方法执行前后，加上事务控制的字节</div><div>码。关于AOP的底层实现，可以参考《 从JVM的角度看Spring的AOP》</div><div>http://blog.csdn.net/reggergdsg/article/details/71039507</div><div>    但是具体如何实现呢？先看下面的写法：</div><div><br/></div><div>[java] view plain copy</div><div>try{ </div><div>    // 修改操作 </div><div>    update(); </div><div>    // 记录日志操作 </div><div>    insert(); </div><div>} </div><div>catch(Exception e){ </div><div>    logger.info(&quot;异常&quot; + e); </div><div>} </div><div><br/></div><div><br/></div><div><br/></div><div>    很遗憾的是，如果你的程序是这样写的，那么当update()执行完成以后，但是</div><div>insert()执行时报错了，这时候，update()操作是不会回滚的。为什么呢，这个就要说</div><div>一下Spring事务控制的异常回滚了。Spring官方文档是这样描述的：spring声明式事务管</div><div>理默认对非检查异常和运行时异常进行事务回滚，而对检查异常则不进行回滚操作。上</div><div>面的程序抛出的是Exception异常，所以Spring不会进行回滚。</div><div><br/></div><div>    说到这里，要多说一句，我们回顾一下java异常相关的知识。java异常的祖先是</div><div>Throwable，所有的java异常都直接或者间接继承了Throwable。附上图片一张，一目了</div><div>然。</div><div><br/></div><div><br/></div><div>    因此，在使用Spring的事务控制时，我们需要在catch中手动抛RuntimeException，</div><div>示例代码如下：</div><div><br/></div><div>[java] view plain copy</div><div>try{ </div><div>    // 修改操作 </div><div>    update(); </div><div>    // 记录日志操作 </div><div>    insert(); </div><div>} </div><div>catch(Exception e){ </div><div>    logger.info(&quot;异常&quot; + e); </div><div>    throws new RuntimeException(); </div><div>} </div><div><br/></div><div><br/></div><div>    思考一个问题：如果这里抛了一个RuntimeException，这个异常会显示到页面，该如</div><div>何处理？</div><div><br/></div><div>    更安全的方式是使用TransactionAspectSupport类获取当前事务，然后强制回滚。关</div><div>于TransactionAspectSupport，Spring文档中是这样描述的： Base class for</div><div>transactional aspects, such as the AOP Alliance TransactionInterceptor or an</div><div>AspectJ aspect.This enables the underlying Spring transaction infrastructure</div><div>to be used easily to implement an aspect for any aspect system. 这种做法是</div><div>Spring支持的方式，并且不会抛RuntimeException，示例代码如下：</div><div><br/></div><div>[java] view plain copy</div><div>try{ </div><div>    // 修改操作 </div><div>    update(); </div><div>    // 记录日志操作 </div><div>    insert(); </div><div>} </div><div>catch(Exception e){ </div><div>    logger.info(&quot;异常&quot; + e); </div><div>    <span style="color: rgb(255, 0, 0);">TransactionAspectSupport.currentTransactionStatus().setRollbackOnly(); </span></div><div>} </div></span>
</div>
<hr>
<a name="749"/>

<div>
<span><div>Java中Comparator多级排序的实现 </div><div>标签： comparator 多级排序 java 分类： J2SE</div><div>JDK里的Comparator方法为用户提供了自定义排序规则的接口，而我们在实际使用是一般也只是用了一个排序维度，本文介绍下多级或多个维度的排序需求下的接口实现。</div><div>       我们假设一个雇员对象，包含级别、工资和入职年份（为了简单，这些属性写成 public），代码如下：</div><div> </div><div>Java代码 </div><div>public Class Employee {  </div><div>   </div><div>    public int level;  //级别  </div><div>    public int salary; //工资  </div><div>    public int years;  //入职年数  </div><div>   </div><div>}  </div><div>       现在我需要做一个这样的雇员列表，首先级别最高的排在前面，如果级别相等，那么按工资排序，工资高的排在前面，如果工资相当则按入职年数排序，入职时间最长的排在前面。</div><div>       因为雇员列表是在内存中的一个 List 对象，现在要对这个 List 中的雇员按上面的要求进行排序 Collections.sort(employeeList, comparator)，那么这个 Comparator 应该怎么写呢?</div><div><br/></div><div>下面这种肯定是不对的</div><div><br/></div><div>Java代码 </div><div>Comparator cp_by_default = new Comparator(){  </div><div>    @Override  </div><div>    public int compare(Employee a1, Employee a2) {  </div><div>        int a = a2.level - a1.level;  </div><div>        if(a &gt; 0)  </div><div>            return a;  </div><div>        a = a2.salary - a1.salary;  </div><div>        if(a &gt; 0)  </div><div>            return a;  </div><div>        return a2.years - a1.years;  </div><div>    }         </div><div>};  </div><div> </div><div><br/></div><div> 正确参考代码写法如下</div><div><br/></div><div>Java代码 </div><div>package net.oschina.tester;  </div><div>   </div><div>import java.util.ArrayList;  </div><div>import java.util.Collections;  </div><div>import java.util.Comparator;  </div><div>import java.util.List;  </div><div>   </div><div>  </div><div>public class Employee {  </div><div>   </div><div>    public static void main(String[] args) {  </div><div>        List objs = new ArrayList(){{  </div><div>            add(new Employee(5,3,5000,2));  </div><div>            add(new Employee(1,9,10000,10));  </div><div>            add(new Employee(4,5,8000,6));  </div><div>            add(new Employee(2,9,12000,7));  </div><div>            add(new Employee(6,1,2000,1));  </div><div>            add(new Employee(3,5,8000,12));  </div><div>        }};  </div><div>        Collections.sort(objs, comparator);  </div><div>        System.out.println(&quot;No\tLevel\tSalary\tYears\n=============================&quot;);  </div><div>        for(Employee a : objs)  </div><div>            System.out.printf(&quot;%d\t%d\t%d\t%d\n&quot;,a.id,a.level,a.salary,a.year);  </div><div>    }  </div><div>   </div><div>    public Employee(int id, int level, int salary, int year){  </div><div>        this.id = id;  </div><div>        this.level = level;  </div><div>        this.salary = salary;  </div><div>        this.year = year;  </div><div>    }  </div><div>       </div><div>    public int id;  </div><div>    public int level;  </div><div>    public int salary;  </div><div>    public int year;  </div><div>   </div><div>    private final static Comparator comparator = new Comparator(){  </div><div>        @Override  </div><div>        public int compare(Employee a1, Employee a2) {  </div><div>            int cr = 0;  </div><div>            int a = a2.level - a1.level;  </div><div>            if(a != 0)  </div><div>                cr = (a&gt;0)?3:-1;  </div><div>            else{  </div><div>                a = a2.salary - a1.salary;  </div><div>                if(a != 0)  </div><div>                    cr = (a&gt;0)?2:-2;  </div><div>                else{  </div><div>                    a = (int)(a2.year - a1.year);  </div><div>                    if(a != 0)  </div><div>                        cr = (a&gt;0)?1:-3;  </div><div>                }  </div><div>            }  </div><div>            return cr;  </div><div>        }         </div><div>    };  </div><div>       </div><div>}  </div></span>
</div></body></html> 